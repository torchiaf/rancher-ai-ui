(("undefined"!==typeof self?self:this)["webpackChunkrancher_ai_ui_0_1_29"]=("undefined"!==typeof self?self:this)["webpackChunkrancher_ai_ui_0_1_29"]||[]).push([[826,907],{1022:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".textlabel-popper[data-v-2999dae0]  .dropdownTarget{padding:0}.textlabel-popper[data-v-2999dae0]  .popperContainer .v-popper__popper .v-popper__wrapper .v-popper__inner{padding:16px}.textlabel-popper[data-v-2999dae0]  .v-popper__popper{display:flex;align-items:center;justify-content:center;border:none}.textlabel-popper[data-v-2999dae0]  .v-popper__inner{opacity:.95;border:1.5px solid var(--border)}.textlabel-popper[data-v-2999dae0]  .v-popper__wrapper{width:95%}.v-popper .btn[data-v-2999dae0]{height:10px;min-height:0;line-height:1;background-color:transparent}.inline-button[data-v-2999dae0]{-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap;margin-bottom:2px}.inline-button[data-v-2999dae0]:not(.btn-disabled){cursor:pointer;text-decoration:underline}",""]),t["default"]=c},1276:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".chat-context[data-v-17264177]{border-top:1px solid var(--border);padding:16px 16px;display:flex;align-items:center;gap:8px;font-size:.85rem}.chat-context .select-context[data-v-17264177]{margin-left:4px}",""]),t["default"]=c},4047:function(e,t,a){var n=a(25007);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("c674d166",n,!0,{sourceMap:!1,shadowMode:!1})},4948:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".system-msg-avatar[data-v-7bae8fb7]{width:32px;height:32px;border-radius:50%;background:var(--body-bg);border:1px solid var(--border);color:#22c55e;display:flex;align-items:center;justify-content:center;flex-shrink:0}",""]),t["default"]=c},5772:function(e,t,a){var n=a(78060);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("aa577142",n,!0,{sourceMap:!1,shadowMode:!1})},6264:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".confirmation-message[data-v-48bab9a2]{margin-bottom:12px}.confirmation-message[data-v-48bab9a2] code{padding:initial;border:initial;border-radius:initial;background-color:transparent;color:#025937}.confirmation-message span[data-v-48bab9a2]{word-break:break-word;white-space:pre-line;list-style-position:inside}.confirmation-buttons[data-v-48bab9a2],.delete-confirmation[data-v-48bab9a2],.standard-confirmation[data-v-48bab9a2]{display:flex;justify-content:flex-end;gap:8px}.confirmation-status .status-canceled[data-v-48bab9a2],.confirmation-status .status-confirmed[data-v-48bab9a2]{display:flex;flex-direction:row;align-items:center;gap:4px;justify-content:flex-end}.confirmation-status .status-confirmed .icon[data-v-48bab9a2]{color:var(--success)}.confirmation-status .status-canceled .icon[data-v-48bab9a2]{color:var(--error)}.rc-button-label[data-v-48bab9a2]{word-break:break-word;white-space:pre-line;list-style-position:inside}",""]),t["default"]=c},7662:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".chat-message[data-v-79f0d9d5]{display:flex;gap:8px}.chat-msg-content[data-v-79f0d9d5]{margin-right:40px}.chat-message-user[data-v-79f0d9d5]{flex-direction:row-reverse}.chat-message-user .chat-msg-content[data-v-79f0d9d5]{display:flex;flex-direction:column;align-items:flex-end;margin:0}.chat-message-user .chat-msg-text[data-v-79f0d9d5],.chat-msg-bubble[data-v-79f0d9d5]{color:var(--body-text)}.chat-msg-bubble[data-v-79f0d9d5]{position:relative;max-width:455px;background:var(--body-bg);border:1px solid var(--border);border-radius:12px;box-shadow:0 2px 8px 0 rgba(0,0,0,.04);padding:12px;line-height:21px;display:flex;flex-direction:column;gap:6px}.chat-msg-bubble:hover .chat-msg-bubble-actions[data-v-79f0d9d5]{opacity:1;pointer-events:auto}.chat-msg-bubble-user[data-v-79f0d9d5]{background:var(--tertiary-hover);align-items:flex-end}.chat-msg-bubble-error[data-v-79f0d9d5]{background:var(--error-banner-bg);border-color:var(--error);color:var(--error-banner-text,var(--error))}.chat-msg-bubble-actions[data-v-79f0d9d5]{position:absolute;top:-24px;right:-8px;display:flex;gap:4px;z-index:2;opacity:0;pointer-events:none;transition:opacity .2s}.chat-msg-text[data-v-79f0d9d5],[data-v-79f0d9d5]  pre{word-break:break-word;white-space:pre-line;list-style-position:inside}.chat-msg-text[data-v-79f0d9d5] code{padding:initial;border:initial;border-radius:initial;background-color:transparent;color:#025937}.chat-msg-text[data-v-79f0d9d5] ul{white-space:normal;margin:0;padding-left:1rem}.chat-msg-text[data-v-79f0d9d5] th{text-align:left}.chat-msg-text[data-v-79f0d9d5] pre{margin:0}.theme-dark .chat-msg-text[data-v-79f0d9d5] code{color:#c0efde}.chat-msg-section[data-v-79f0d9d5],.chat-msg-section-footer[data-v-79f0d9d5]{margin-top:8px}.chat-msg-timestamp[data-v-79f0d9d5]{font-size:.75rem;color:#94a3b8;margin-top:8px;margin-bottom:8px;align-self:flex-end}.icon-action-source[data-v-79f0d9d5]{width:16px;height:16px;min-width:16px;min-height:16px;display:inline-block;vertical-align:middle}.inline-button[data-v-79f0d9d5]{margin-left:auto;height:15px;min-height:15px}.chat-msg-user-expanded[data-v-79f0d9d5]{display:block;margin-top:16px}.chat-msg-user-expanded[data-v-79f0d9d5]  ul{padding:0 0 0 8px;margin:0;margin-top:-10px}.chat-msg-user-context-tags[data-v-79f0d9d5]{display:flex;flex-wrap:wrap;max-width:100%;align-items:center;justify-content:flex-end;gap:4px}.chat-msg-selected-agent[data-v-79f0d9d5]{margin-bottom:4px}.chat-msg-selected-agent-label[data-v-79f0d9d5]{color:#bfc1d3;font-family:Lato;font-size:14px;font-style:normal;font-weight:400;line-height:21px}",""]),t["default"]=c},8800:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".llm-model-label[data-v-3c3c8e2c]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0;font-size:12px}",""]),t["default"]=c},10002:function(e,t,a){var n=a(94514);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("9cc532de",n,!0,{sourceMap:!1,shadowMode:!1})},10027:function(e,t,a){var n=a(18251);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("5ceb82e6",n,!0,{sourceMap:!1,shadowMode:!1})},11951:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".history-chat-menu-dropdown-item[data-v-12b4496a]{height:32px}",""]),t["default"]=c},12558:function(e,t,a){var n=a(57646);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("518a5b75",n,!0,{sourceMap:!1,shadowMode:!1})},13384:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".chat-header[data-v-b2136e92]{background:#a7bff1;color:#3c57a3;padding:12px;display:flex;align-items:center;gap:16px}.theme-dark .chat-header[data-v-b2136e92]{color:#fff;background:var(--category-active,var(--nav-active))}.theme-dark .chat-header .chat-history-btn[data-v-b2136e92]:hover{background:color-mix(in srgb,var(--category-active,var(--nav-active)) 80%,#fff)}.chat-title[data-v-b2136e92]{display:flex;flex-direction:row;align-items:baseline;min-width:0;flex:1}.chat-title .chat-name[data-v-b2136e92]{display:flex;gap:8px;align-items:center;font-weight:600;font-size:1em;margin:0;width:60px}.chat-title .chat-name .label[data-v-b2136e92]{font-size:1.3em}.chat-history-btn[data-v-b2136e92]{background:transparent;border:none;cursor:pointer;border-radius:8px;transition:background .2s}.chat-history-btn.disabled[data-v-b2136e92]{opacity:1;pointer-events:none}.chat-history-btn .btn-close[data-v-b2136e92]{margin:0 8px}.chat-history-btn[data-v-b2136e92]:hover{background:color-mix(in srgb,#a7bff1 80%,#fff)}.btn-close[data-v-b2136e92],.btn-open-history[data-v-b2136e92]{margin:0!important}.icon-close[data-v-b2136e92],.icon-menu[data-v-b2136e92]{width:32px}",""]),t["default"]=c},14871:function(e,t,a){var n=a(67863);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("8ec5edaa",n,!0,{sourceMap:!1,shadowMode:!1})},17649:function(e,t,a){var n=a(54801);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("31768eae",n,!0,{sourceMap:!1,shadowMode:!1})},18251:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".prompt-remove.card-container[data-v-4193a598]{box-shadow:none}.prompt-remove #confirm[data-v-4193a598]{width:90%;margin-left:3px}.prompt-remove .actions[data-v-4193a598]{text-align:right}button.bg-error[data-v-4193a598]{background-color:var(--error)}",""]),t["default"]=c},19206:function(e,t,a){var n=a(54278);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("19e24cbe",n,!0,{sourceMap:!1,shadowMode:!1})},19251:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".suggestions-header[data-v-10a0aa9c]{margin-bottom:8px;font-weight:600}.suggestions-list[data-v-10a0aa9c]{padding:0 0 0 24px;margin:0;list-style-position:outside;list-style-type:disc}.suggestions-list li[data-v-10a0aa9c]{padding:0;margin:0}.suggestions-list li[data-v-10a0aa9c]::marker{color:var(--primary);font-size:15px}.suggestions-list li .btn-sm[data-v-10a0aa9c]{margin-bottom:2px;line-height:24px;min-height:24px}.suggestion-item[data-v-10a0aa9c]{padding:0;margin:0}.rc-button-label[data-v-10a0aa9c]{word-break:break-word;white-space:pre-line;list-style-position:inside}",""]),t["default"]=c},20051:function(e,t,a){var n=a(19251);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("62c81bb4",n,!0,{sourceMap:!1,shadowMode:!1})},20128:function(e,t,a){var n=a(27872);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("0c49c660",n,!0,{sourceMap:!1,shadowMode:!1})},25007:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".processing-message .dots[data-v-051cdf32]{display:inline-flex;width:12px}",""]),t["default"]=c},25746:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".chat-msg-action-title[data-v-061588ed]{display:flex;align-items:center;gap:4px;color:var(--on-secondary)}.chat-msg-action-title span[data-v-061588ed]{font:9px sans-serif;font-weight:500}.chat-msg-actions-container[data-v-061588ed]{display:flex;flex-direction:column;gap:8px}.chat-msg-action-tags[data-v-061588ed]{display:flex;gap:4px;flex-wrap:wrap;margin-top:4px}.chat-msg-actions[data-v-061588ed]{display:flex;gap:6px;flex-wrap:wrap;margin-top:2px}.chat-msg-actions-more[data-v-061588ed]{color:#94a3b8;cursor:pointer}",""]),t["default"]=c},26321:function(e,t,a){var n=a(43281);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("ccec3e2e",n,!0,{sourceMap:!1,shadowMode:!1})},27872:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".chat-system-suggestion-message[data-v-54f5af72]{display:flex;gap:8px}.chat-system-suggestion-msg-bubble[data-v-54f5af72]{position:relative;background:var(--body-bg);color:var(--body-text);border:1px solid var(--border);border-radius:12px;box-shadow:0 2px 8px 0 rgba(0,0,0,.04);padding:12px;line-height:21px;display:flex;flex-direction:column;gap:6px}.chat-system-suggestion-msg-bubble:hover .chat-system-suggestion-msg-bubble-actions[data-v-54f5af72]{opacity:1;pointer-events:auto}.chat-system-suggestion-msg-text[data-v-54f5af72],[data-v-54f5af72]  pre{word-break:break-word;white-space:pre-line;list-style-position:inside}.chat-system-suggestion-msg-text[data-v-54f5af72] code{padding:initial;border:initial;border-radius:initial;background-color:transparent;color:#025937}.chat-system-suggestion-msg-text[data-v-54f5af72] ul{white-space:normal;margin:0;padding-left:1rem}.chat-system-suggestion-msg-text[data-v-54f5af72] th{text-align:left}.chat-system-suggestion-msg-text[data-v-54f5af72] pre{margin:0}.theme-dark .chat-system-suggestion-msg-text[data-v-54f5af72] code{color:#c0efde}.chat-system-suggestion-actions[data-v-54f5af72]{display:flex;flex-direction:row;gap:8px;margin-top:16px}.chat-system-suggestion-actions .chat-system-suggestion-actions-buttons[data-v-54f5af72]{display:flex;width:100%;gap:4px;flex-wrap:wrap;justify-content:space-between}.chat-system-suggestion-actions-result[data-v-54f5af72]{display:flex;flex-direction:row;align-items:center;gap:4px;height:30px;margin-left:auto}.chat-system-suggestion-actions-result.status-confirmed .icon[data-v-54f5af72]{color:var(--success)}.chat-system-suggestion-actions-result.status-canceled .icon[data-v-54f5af72]{color:var(--error)}",""]),t["default"]=c},29230:function(e,t,a){var n=a(7662);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("5fe4b5e0",n,!0,{sourceMap:!1,shadowMode:!1})},30161:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var n=a(9274),o=a(65359),s=a(23610),i=a(45180),c=a(68412);const l={class:"text-default-text"},r={class:"mb-10"},d={key:0};var u=(0,n.defineComponent)({__name:"DeleteChatCard",props:{name:{type:String,default:""},onConfirm:{type:Function,required:!0},onClose:{type:Function,default:()=>{}}},emits:["confirm","close"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:u}=(0,s.s)(a),m=e,p=t,g=(0,n.computed)(()=>{const e=m.name;return e?e.length>13?`${e.substring(0,10)}...`:e:""});function h(){m.onConfirm(),p("confirm"),v()}function v(){m.onClose(),p("close")}return(e,t)=>((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(i.Z),{class:"prompt-remove","show-highlight-border":!1},{title:(0,n.withCtx)(()=>[(0,n.createElementVNode)("h4",l,(0,n.toDisplayString)((0,n.unref)(u)("promptRemove.title")),1)]),body:(0,n.withCtx)(()=>[(0,n.createElementVNode)("div",r,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(u)("ai.history.chat.delete.modal.message")),1),m.name?((0,n.openBlock)(),(0,n.createElementBlock)("span",d,[(0,n.createElementVNode)("b",null,(0,n.toDisplayString)(g.value),1)])):(0,n.createCommentVNode)("",!0),t[0]||(t[0]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(u)("ai.history.chat.delete.modal.warning")),1)])]),actions:(0,n.withCtx)(()=>[(0,n.createElementVNode)("button",{class:"btn role-secondary",onClick:v},(0,n.toDisplayString)((0,n.unref)(u)("ai.history.chat.delete.modal.cancel")),1),t[1]||(t[1]=(0,n.createElementVNode)("div",{class:"spacer"},null,-1)),(0,n.createVNode)(c.A,{class:"btn bg-error ml-10","data-testid":"prompt-remove-confirm-button",onClick:h},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(u)("ai.history.chat.delete.modal.confirm")),1)]),_:1})]),_:1}))}}),m=(a(10027),a(47433));const p=(0,m.A)(u,[["__scopeId","data-v-4193a598"]]);var g=p},31160:function(e,t,a){var n=a(83832);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("54d56375",n,!0,{sourceMap:!1,shadowMode:!1})},31570:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".chat-messages[data-v-67c9f315]{flex:1;overflow-y:auto;padding:24px 12px 16px 12px;display:flex;flex-direction:column;gap:16px}.chat-message-template-welcome[data-v-67c9f315]{margin-bottom:16px}.chat-message-fast-scroll[data-v-67c9f315]{position:sticky;bottom:0;margin-left:auto}.chat-message-processing-label[data-v-67c9f315]{color:#9fabc6;font-family:Inter,Arial,sans-serif;font-size:.875rem;font-weight:500;margin:0}.chat-message-processing-label.sticky-bottom[data-v-67c9f315]{margin-top:auto}",""]),t["default"]=c},32704:function(e,t,a){var n=a(8800);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("2b1c5de0",n,!0,{sourceMap:!1,shadowMode:!1})},35058:function(e,t,a){var n=a(31570);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("63fa44aa",n,!0,{sourceMap:!1,shadowMode:!1})},37324:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".disclaimer[data-v-b04f1c04],.disclaimer-section[data-v-b04f1c04]{display:flex;flex-direction:column}.disclaimer[data-v-b04f1c04]{gap:16px}.disclaimer-section[data-v-b04f1c04]{gap:8px}.disclaimer-section-title[data-v-b04f1c04]{font-family:Lato;font-size:16px;font-style:normal;font-weight:600;line-height:24px}.disclaimer-section-body[data-v-b04f1c04]{font-family:Lato;font-size:14px;font-style:normal;font-weight:400;line-height:21px}",""]),t["default"]=c},41596:function(e,t,a){var n=a(1276);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("1db419a1",n,!0,{sourceMap:!1,shadowMode:!1})},43188:function(e,t,a){var n=a(4948);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("5a324ef2",n,!0,{sourceMap:!1,shadowMode:!1})},43281:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".history-panel-overlay[data-v-da1ad2b6]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:200;display:flex;align-items:stretch}.history-panel[data-v-da1ad2b6]{width:min(75%,100vw);max-width:90vw;height:100vh;background:var(--body-bg);opacity:.95;box-shadow:2px 0 8px rgba(0,0,0,.08);display:flex;flex-direction:column}.history-header[data-v-da1ad2b6]{height:54px}.history-body[data-v-da1ad2b6]{padding:16px;overflow:hidden}.history-chat-list[data-v-da1ad2b6]{display:flex;flex-direction:column;gap:4px;overflow-y:auto;max-height:calc(100vh - 250px);padding-bottom:8px}.history-chat-item[data-v-da1ad2b6]{display:flex;flex-direction:row;justify-content:space-between;gap:16px;padding:0 16px;flex-shrink:0}.history-chat-title-label[data-v-da1ad2b6]{font-family:Lato;font-size:16px;font-style:normal;font-weight:600;line-height:24px;display:block;margin-bottom:12px}.btn-create-chat[data-v-da1ad2b6]{display:flex;flex-direction:row;justify-content:center;width:100%;margin:16px 0 28px 0}.history-chat-name[data-v-da1ad2b6]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%;display:block}.history-chat-name-edit[data-v-da1ad2b6]{padding:2px;border-radius:4px;border:1px solid var(--border)}.slide-in-enter-active[data-v-da1ad2b6],.slide-in-leave-active[data-v-da1ad2b6]{transition:all .3s cubic-bezier(.4,0,.2,1)}.slide-in-enter-from[data-v-da1ad2b6],.slide-in-leave-to[data-v-da1ad2b6]{transform:translateX(-100%)}",""]),t["default"]=c},46776:function(e,t,a){var n=a(6264);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("d2c74dee",n,!0,{sourceMap:!1,shadowMode:!1})},51208:function(e,t,a){var n=a(13384);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("56c3493a",n,!0,{sourceMap:!1,shadowMode:!1})},54278:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".chat-container[data-v-efcad322]{display:flex;flex-direction:row;height:calc(100vh - 55px);position:relative;z-index:20}.chat-container[data-v-efcad322] .disabled-panel{opacity:.5;pointer-events:none}.chat-panel[data-v-efcad322]{width:100%;background:var(--box-bg);display:flex;flex-direction:column;margin:0 auto;font-family:Inter,Arial,sans-serif}.resize-bar[data-v-efcad322]{position:absolute;top:0;left:0;width:4px;height:100%;cursor:ew-resize;background:transparent;transition:background .2s;z-index:20;opacity:0}.resize-bar[data-v-efcad322]:hover{background:var(--primary);opacity:1}.connection-processing-label[data-v-efcad322]{color:#9fabc6;font-family:Inter,Arial,sans-serif;font-size:.875rem;font-weight:500;margin:0;padding:16px}",""]),t["default"]=c},54801:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".tag[data-v-40445c5c]{display:flex;flex-direction:row;gap:8px;height:24px;line-height:1;margin-right:0;margin-left:0;padding:0 8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;border-radius:4px}.tag .tag-content[data-v-40445c5c]{display:flex;justify-content:center;gap:4px}.tag .vs__deselect[data-v-40445c5c]{margin:0}.vs__selected[data-v-40445c5c]{line-height:2px;border:none;color:var(--active-nav)}.user-context[data-v-40445c5c]{background-color:transparent;color:#9fabc6;height:16px;font-size:.75rem;border:1px solid #9fabc6;border-radius:4px;margin:0;cursor:default;word-break:break-word;white-space:pre-line}",""]),t["default"]=c},57646:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".context-trigger[data-v-5bc848de]{display:flex;gap:4px;min-height:24px}.context-select[data-v-5bc848de]{display:flex;flex-wrap:wrap;max-width:100%;align-items:center;gap:12px;color:var(--active-nav)}.context-reset[data-v-5bc848de]{height:28px}.context-reset .btn[data-v-5bc848de]{height:28px;min-height:28px}.no-context[data-v-5bc848de]{margin:7px 0 7px 0}.tags[data-v-5bc848de]{display:flex;flex-wrap:wrap;max-width:100%;align-items:center;gap:8px}.icon-pin-outlined[data-v-5bc848de],.tags[data-v-5bc848de]{color:var(--active-nav)}",""]),t["default"]=c},60789:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".user-msg-avatar[data-v-2d4aa4a2]{width:32px;height:32px;border-radius:50%;background:var(--body-bg);border:1px solid var(--border);color:var(--primary);display:flex;align-items:center;justify-content:center;flex-shrink:0}.round-avatar[data-v-2d4aa4a2]{border:0;border-radius:50%}",""]),t["default"]=c},62773:function(e,t,a){var n=a(60789);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("6b08468e",n,!0,{sourceMap:!1,shadowMode:!1})},64312:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".agent-selector-container[data-v-a0c07ec0]{align-items:center;cursor:pointer;gap:4px;color:var(--active-nav);font-weight:500;min-width:0;max-width:100%}.agent-selector-container .agent-trigger[data-v-a0c07ec0]{display:flex!important;min-width:0!important;max-width:100%!important;overflow:hidden}.chevron-icon[data-v-a0c07ec0]{font-size:12px;transition:transform .2s ease;color:var(--active-nav)}.chevron-icon.is-open[data-v-a0c07ec0]{transform:rotate(180deg)}.agent-label[data-v-a0c07ec0]{display:flex;justify-content:space-between;align-items:center}.agent-label .agent-label-display-name[data-v-a0c07ec0]{max-width:200px;word-break:break-word;white-space:pre-line}.agent-label .icon[data-v-a0c07ec0]{color:var(--active-nav)}.agent-label .icon.hidden[data-v-a0c07ec0]{visibility:hidden}.agent-label .icon-error[data-v-a0c07ec0]{color:var(--error)}.selected-agent-name[data-v-a0c07ec0]{margin:0 4px;flex:1;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}",""]),t["default"]=c},67863:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".bubble-action-btn[data-v-6951721d]{background:var(--body-bg);border:1.5px solid var(--border);border-radius:50%;padding:2px;box-shadow:0 1px 4px 0 rgba(0,0,0,.04);cursor:pointer;transition:border .15s,box-shadow .15s;display:flex;align-items:center;justify-content:center;min-width:20px;min-height:20px;width:32px;height:32px}.bubble-action-btn[data-v-6951721d]:hover{border:solid 1px var(--secondary-border,var(--primary));box-shadow:0 2px 8px 0 rgba(61,152,211,.1)}.bubble-action-btn .icon[data-v-6951721d]{font-size:12px;width:12px;height:12px}",""]),t["default"]=c},70484:function(e,t,a){var n=a(91188);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("1994943a",n,!0,{sourceMap:!1,shadowMode:!1})},70543:function(e,t,a){var n=a(11951);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("60984e6e",n,!0,{sourceMap:!1,shadowMode:!1})},76761:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".chat-msg-source-label[data-v-224c7d0a]{display:flex;align-items:center;gap:8px;color:#9fabc6}.chat-msg-source-label span[data-v-224c7d0a]{font:9px sans-serif;font-weight:500}.chat-msg-source-tags[data-v-224c7d0a]{display:flex;gap:4px;flex-wrap:wrap;margin-top:8px}.chat-msg-source-tag[data-v-224c7d0a]{height:auto;color:#9fabc6;border-radius:8px;padding:2px 8px;font-size:.75rem;border:1px solid #9fabc6;cursor:pointer;line-height:normal}.sr-only[data-v-224c7d0a]{visibility:hidden}",""]),t["default"]=c},78060:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".chat-welcome-message[data-v-587599d4]{gap:12px;margin-top:auto}.chat-welcome-message[data-v-587599d4],.chat-welcome-msg-splash[data-v-587599d4]{display:flex;flex-direction:column;align-items:center}.chat-welcome-msg-splash[data-v-587599d4]{justify-content:center;width:100%;gap:16px;margin-bottom:24px}.chat-welcome-msg-avatar-panel[data-v-587599d4]{display:grid;place-items:center;position:relative;width:100%;max-width:250px;min-width:150px}.chat-welcome-msg-greeting[data-v-587599d4]{position:relative;background-color:transparent;width:100%;height:104px;grid-area:1/1;z-index:20}.chat-welcome-msg-avatar-circle[data-v-587599d4]{grid-area:1/1;width:75%;z-index:10;position:absolute;display:flex;align-items:center;justify-content:center;width:104px;height:104px;position:relative;background:var(--body-bg);color:var(--body-text);border:1px solid var(--border);border-radius:90px;box-shadow:0 2px 8px 0 rgba(0,0,0,.04)}.chat-welcome-msg-greeting-bubble[data-v-587599d4]{position:absolute;top:0;right:0;padding:8px 12px;border-radius:8px;border:1px solid var(--border);background:#35b777;color:var(--body-text);white-space:nowrap;pointer-events:none;transform-origin:right center}.chat-welcome-msg-text-panel[data-v-587599d4]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;text-align:center;font-family:Lato;font-size:18px;font-style:normal;font-weight:600;line-height:28px}.chat-welcome-msg-bubble[data-v-587599d4]{position:relative;background:var(--body-bg);color:var(--body-text);border:1px solid var(--border);border-radius:12px;box-shadow:0 2px 8px 0 rgba(0,0,0,.04);padding:12px;display:flex;flex-direction:column;gap:6px;width:100%;line-height:21px}.chat-welcome-msg-text[data-v-587599d4],[data-v-587599d4]  pre{word-break:break-word;white-space:pre-line;list-style-position:inside}",""]),t["default"]=c},83459:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return $n}});var n=a(9274),o=a(65359),s=a(56977),i=a(6743);function c(e){const t=(0,o.Pj)(),a=(0,n.computed)(()=>t.getters["rancher-ai-ui/connection/ws"]),i=(0,n.computed)(()=>t.getters["rancher-ai-ui/connection/phase"]),c=(0,n.computed)(()=>t.getters["rancher-ai-ui/connection/error"]),l=`wss://${window.location.host}/api/v1/namespaces/${s.AGENT_NAMESPACE}/services/http:${s.AGENT_NAME}:80/proxy/${s.AGENT_WS_API_PATH}`;async function r(a){const n=a?`${l}/${a}`:l,{onopen:o,onmessage:s,onclose:i}=e;await t.dispatch("rancher-ai-ui/connection/open",{url:n,onopen:o,onmessage:s,onclose:i})}function d(e){t.commit("rancher-ai-ui/connection/close",{phase:e})}function u(e){t.commit("rancher-ai-ui/connection/setPhase",e)}return{ws:a,phase:i,error:c,connect:r,disconnect:d,setPhase:u}}var l=a(23610),r=a(75156);function d(){const e=(0,o.Pj)(),t=(0,n.computed)(()=>e.getters["rancher-ai-ui/context/all"]),a=(0,n.ref)([]);function s(e){a.value=e}return(0,n.onBeforeUnmount)(()=>{e.commit("rancher-ai-ui/context/reset")}),{context:t,selectContext:s,selectedContext:a}}var u=a(79756),m=a(11738),p=a(4364);const g=!1,h="dismissed-agent-recommendation";function v(e,t,a,c){const v=(0,o.Pj)(),{t:f}=(0,l.s)(v),b=v.getters["rancher/byId"](r.k$.PRINCIPAL,v.getters["auth/principalId"])||{},y=(0,n.computed)(()=>Object.values(v.getters["rancher-ai-ui/chat/messages"](e))),x=(0,n.ref)({}),k=(0,n.computed)(()=>v.getters["rancher-ai-ui/chat/error"](e)),w=(0,n.computed)(()=>!!v.getters["rancher-ai-ui/chat/metadata"]?.chatId),C=(0,n.computed)(()=>v.getters["rancher-ai-ui/chat/phase"](e)||i.N$.Initializing),E=t=>{v.commit("rancher-ai-ui/chat/setPhase",{chatId:e,phase:t})},{selectContext:N,selectedContext:_}=d();function B(e,t){e&&e.send(t)}function V(e,n){let o,s=i.Xh.User,c="",l=e,r=_.value;e&&"object"===typeof e&&e.messageContent&&(s=e.role,c=e.summaryContent||"",c&&(o={[i.PR.Summary]:c}),l=e.messageContent||"",r=e.contextContent||[]),B(n,(0,u.zw)({prompt:l,context:_.value,agent:a.value,labels:o}));const d={agent:t.value.find(e=>e.name===a.value)||{}};A({role:s,agentMetadata:d,summaryContent:c,messageContent:l,contextContent:r}),E(i.N$.Processing)}async function A(t){return await v.dispatch("rancher-ai-ui/chat/addMessage",{chatId:e,message:t})}function M(t){v.commit("rancher-ai-ui/chat/updateMessage",{chatId:e,message:t})}function S({message:e,result:t},a){B(a,(0,u.zw)({prompt:t?i.Tc.Yes:i.Tc.No,tags:[i.Mv.Confirmation]})),M({id:e.id,confirmation:{action:e.confirmation?.action||null,status:t?i._r.Confirmed:i._r.Canceled}})}function D(t){return v.getters["rancher-ai-ui/chat/message"]({chatId:e,messageId:t})}function T(){return{role:i.Xh.Assistant,thinkingContent:"",messageContent:"",showThinking:g,thinking:!1,completed:!1}}function I(){return{role:i.Xh.System,templateContent:{component:i.dU.Welcome,content:{principal:b,message:f("ai.message.system.welcome.info",{},!0)}},completed:!1}}function $(e){return{role:i.Xh.System,completed:!0,templateContent:{component:i.dU.SystemSuggestion,content:{message:f("ai.message.system.switchAgent.info",{agent:e?.displayName||x.value.agentMetadata?.recommended},!0)}},actions:[{label:f("ai.message.system.switchAgent.actions.confirm"),type:i.X2.Button,action:()=>(c(x.value.agentMetadata?.recommended||""),{label:f("ai.message.system.switchAgent.results.confirm",{agent:e?.displayName||x.value.agentMetadata?.recommended},!0),status:i._r.Confirmed,icon:"icon-checkmark"})},{label:f("ai.message.system.switchAgent.actions.dismiss"),type:i.X2.Button,action:()=>(v.commit("rancher-ai-ui/chat/setSession",{[h]:!0}),{label:f("ai.message.system.switchAgent.results.dismiss",{},!0),status:i._r.Canceled,icon:"icon-close"})}]}}function z(e){if(E(i.N$.Processing),y.value.length>0)return;const t=e.target;if(t){const e=`Hi!\n        - Send me a message with 3 ${_.value?.length?"suggestions based on the context.":"generic suggestions."}.\n        - DO NOT ask for any confirmation or additional information.\n      `;B(t,(0,u.zw)({prompt:e,context:_.value,tags:[i.Mv.Ephemeral,i.Mv.Welcome]})),E(i.N$.Processing)}}async function P(t){const a=t.data;if(w.value)try{y.value.find(e=>e.completed)?await O(a):(E(i.N$.Initializing),await U(a))}catch(n){p.error("Error processing messages:",n),v.commit("rancher-ai-ui/chat/setError",{chatId:e,error:{message:`${f("ai.error.message.processing")} ${n.message||n||""}`}}),E(i.N$.Idle)}else try{j(a),R(a)}catch(n){p.error("Error initiating chat:",n),v.commit("rancher-ai-ui/chat/setError",{chatId:e,error:{message:n.message,action:{label:f("ai.settings.goToAgents"),type:i.X2.Button,resource:{cluster:"local",detailLocation:{name:`c-cluster-settings-${s.PRODUCT_NAME}`}}}}})}}function L(){x.value&&(x.value.completed=!0),E(i.N$.Idle)}function j(e){if(e.startsWith(i.vw.ChatErrorStart)&&e.endsWith(i.vw.ChatErrorEnd)){const t=(0,u.D5)(e);throw t}}function R(e){const t=(0,u.li)(e);t&&v.commit("rancher-ai-ui/chat/setMetadata",t)}async function U(e){switch(e){case i.vw.MessageStart:const t=await A(I());x.value=D(t);break;case i.vw.MessageEnd:E(i.N$.Idle),x.value.messageContent="",x.value.completed=!0;break;default:if(!1===x.value.completed){if(e.startsWith(i.vw.ErrorStart)&&e.endsWith(i.vw.ErrorEnd)){const t=(0,u.NR)(e);throw t}if(x.value.messageContent+=e,x.value.messageContent?.includes(i.vw.SuggestionsStart)&&x.value.messageContent?.includes(i.vw.SuggestionsEnd)){const{suggestionActions:e,remaining:t}=(0,u.hS)(x.value.suggestionActions||[],x.value.messageContent);x.value.suggestionActions=e,x.value.messageContent=t;break}}break}}async function O(e){switch(e){case i.vw.MessageStart:E(i.N$.Working);const a=await A(T());x.value=D(a);break;case i.vw.ThinkingStart:E(i.N$.Thinking),x.value.thinking=!0;break;case i.vw.ThinkingEnd:E(i.N$.GeneratingResponse),x.value.thinking=!1;break;case i.vw.MessageEnd:if(E(i.N$.Idle),x.value.messageContent=x.value.messageContent?.replace(/[\r\n]+$/,""),x.value.thinking=!1,x.value.completed=!0,!v.getters["rancher-ai-ui/chat/session"]?.[h]&&x.value.agentMetadata?.recommended&&x.value.agentMetadata?.selectionMode===i.zW.Auto&&Number(x.value.id)>10){const e=t.value.find(e=>e.name===x.value.agentMetadata?.recommended);await A($(e))}break;default:if(E(i.N$.GeneratingResponse),e.startsWith(i.vw.AgentMetadataStart)&&e.endsWith(i.vw.AgentMetadataEnd)){const a=(0,u.gK)(e,t.value);a&&(x.value.agentMetadata=a);break}if(!1===x.value.completed&&!0===x.value.thinking){if(!x.value.thinkingContent&&""===e.trim())break;x.value.thinkingContent+=e;break}if(!1===x.value.completed&&!1===x.value.thinking){if(!x.value.messageContent&&""===e.trim())break;if(e.startsWith(i.vw.McpResultStart)&&e.endsWith(i.vw.McpResultEnd)){E(i.N$.Finalizing),x.value.relatedResourcesActions=(0,u.YH)(e);break}if(e.startsWith(i.vw.ConfirmationStart)&&e.endsWith(i.vw.ConfirmationEnd)){const t=(0,u.Hx)(e);if(t){x.value.confirmation={action:t,status:i._r.Pending},x.value.thinking=!1,x.value.completed=!0;break}}if(e.startsWith(i.vw.DocLinkStart)&&e.endsWith(i.vw.DocLinkEnd)){x.value.sourceLinks=(0,u.aW)(x.value.sourceLinks||[],e);break}if(e.startsWith(i.vw.ErrorStart)&&e.endsWith(i.vw.ErrorEnd)){const t=(0,u.NR)(e);throw t}if(x.value.messageContent+=e,x.value.messageContent?.includes(i.vw.SuggestionsStart)&&x.value.messageContent?.includes(i.vw.SuggestionsEnd)){const{suggestionActions:e,remaining:t}=(0,u.hS)(x.value.suggestionActions||[],x.value.messageContent);x.value.suggestionActions=e,x.value.messageContent=t;break}break}break}}function F(){(0,m.PE)(`Rancher-liz-chat-${e}_${(new Date).toISOString().slice(0,10)}.txt`,(0,u.eY)(b,y.value))}function K(t){v.commit("rancher-ai-ui/chat/loadMessages",{chatId:e,messages:t})}function W(){v.commit("rancher-ai-ui/chat/resetMessages",e)}function X(){v.commit("rancher-ai-ui/chat/setError",{chatId:e,error:null})}return(0,n.onMounted)(()=>{v.commit("rancher-ai-ui/chat/init",e)}),{onopen:z,onmessage:P,onclose:L,messages:y,sendMessage:V,addMessage:A,updateMessage:M,confirmMessage:S,selectContext:N,resetErrors:X,downloadMessages:F,loadMessages:K,resetMessages:W,isChatInitialized:w,phase:C,error:k}}var f=a(42633),b=a(27696),y=a(82684),x=a(26328);function k(){const e=(0,o.Pj)(),{onTabClose:t}=(0,b.A)(),{setDimensions:a}=(0,y.A)({position:f.A.panelPosition}),{mouseResizeXStart:n}=(0,x.A)({position:f.A.panelPosition,setDimensions:a});function s(e){n(e)}function i(){t(f.A.panelId),f.A.close(e)}function c(){f.A.restoreDefaultPositions(e)}return{resize:s,close:i,restore:c}}var w=a(81211),C=a(74070);function E(){const e=(0,o.Pj)(),{t:t}=(0,l.s)(e),a=(0,n.ref)(!1),c=(0,n.ref)(null),d=(0,n.ref)(null),u=(0,n.computed)(()=>{const t=e.getters["management/all"](r.oU.DEPLOYMENT),n=t.find(e=>e.metadata?.name===s.AGENT_NAME&&e.metadata?.namespace===s.AGENT_NAMESPACE);if(a.value)return n?n?.state:i.v.NotFound});function m(e){try{return(0,w.u)(e)}catch(d){(0,C.R)("Error decoding ACTIVE_LLM:",d)}return""}function p(e,t){let a="";try{if(t){const n=`${t.toUpperCase()}_MODEL`;a=(0,w.u)(e[n]||"")}if(!a){const{MODEL:t}=e;a=(0,w.u)(t||"")}}catch(n){(0,C.R)(`Error decoding model for ${t}:`,n)}return a}function g(e){let a="",n="";const{ACTIVE_LLM:o,OLLAMA_URL:s,GOOGLE_API_KEY:i,OPENAI_API_KEY:c,AWS_SECRET_ACCESS_KEY:l,AWS_BEARER_TOKEN_BEDROCK:r}=e;return o?a=m(o):s?a="ollama":i?a="gemini":c?a="openai":(l||r)&&(a="bedrock"),n=p(e,a),a&&n?{name:t(`ai.configurations.models.${a}`),model:n}:null}async function h(){e.getters["management/canList"](r.oU.DEPLOYMENT)?await e.dispatch("management/findAll",{type:r.oU.DEPLOYMENT}):d.value={key:"ai.error.services.deployment.noPermission"}}async function v(){if(e.getters["management/canList"](r.bB)){try{const t=await e.dispatch("management/find",{type:r.bB,id:`${s.AGENT_NAMESPACE}/${s.AGENT_CONFIG_SECRET_NAME}`});t?.data&&(c.value=g(t.data))}catch(a){(0,C.R)("Error fetching llm-config secret:",a)}c.value||(d.value={key:"ai.error.services.secret.missingConfig",action:{label:t("ai.settings.goToSettings"),type:i.X2.Button,resource:{cluster:"local",detailLocation:{name:`c-cluster-settings-${s.PRODUCT_NAME}`}}}})}else d.value={key:"ai.error.services.secret.noPermission"}}function f(){d.value=null}return(0,n.watch)(()=>u.value,e=>{e===i.v.NotFound?d.value={key:"ai.error.services.deployment.notFound"}:(d.value=null,v())}),(0,n.onMounted)(async()=>{await h(),a.value=!0}),{aiAgentDeploymentState:u,llmConfig:c,error:d,resetError:f}}var N=a(4364);function _(e){const t=`/api/v1/namespaces/${s.AGENT_NAMESPACE}/services/http:${s.AGENT_NAME}:80/proxy/${s.AGENT_REST_API_PATH}`;async function a(){try{const e=await fetch(`${t}/chats`),a=await e.json();return a.filter(e=>!!e.name).map(e=>({...e,name:e.name?.split("\n")[0].slice(0,500).trim()}))}catch(e){return N.error("Failed to fetch chats:",e),[]}}async function n(e,a){try{const n=await fetch(`${t}/chats/${e}`,{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});return await n.json()}catch(n){throw N.error("Failed to update chat:",n),n}}async function o(e){try{await fetch(`${t}/chats/${e}`,{method:"DELETE"})}catch(a){N.error("Failed to delete chat:",a)}}async function i(a){try{const n=await fetch(`${t}/chats/${a}/messages`),o=await n.json();return o.map(t=>(0,u.VG)(t,e.value||[]))}catch(n){return N.error("Failed to fetch messages:",n),[]}}return{fetchChats:a,fetchMessages:i,updateChat:n,deleteChat:o}}function B(e){const t=(0,o.Pj)(),a=(0,n.computed)(()=>{const e=t.getters["management/all"](i.VA.AI_AGENT_CONFIG);return e.filter(e=>e.spec.enabled).map(u.MM)}),s=(0,n.computed)(()=>t.getters["rancher-ai-ui/chat/agentName"](e));async function c(){t.getters["management/canList"](i.VA.AI_AGENT_CONFIG)&&await t.dispatch("management/findAll",{type:i.VA.AI_AGENT_CONFIG})}function l(a){t.commit("rancher-ai-ui/chat/setAgentName",{chatId:e,agentName:a})}return(0,n.onMounted)(()=>{c()}),{agents:a,selectAgent:l,agentName:s}}var V=a(68412),A=a(78014);const M={class:"chat-console-menu-container"};var S=(0,n.defineComponent)({__name:"ChatPanelMenu",props:{disabled:{type:Boolean,default:!1}},emits:["download:chat","show:help","config:chat"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t,r=(0,n.ref)([{label:s("ai.menu.options.chat.download.label"),description:s("ai.menu.options.chat.download.description"),icon:"icon-download",action:()=>{c("download:chat")}},{label:s("ai.menu.options.chat.config.label"),description:s("ai.menu.options.chat.config.description"),icon:"icon-gear",action:()=>{c("config:chat")}}]),d=(0,n.ref)(!1);return(e,t)=>{const a=(0,n.resolveDirective)("clean-tooltip");return(0,n.openBlock)(),(0,n.createElementBlock)("div",M,[(0,n.createVNode)((0,n.unref)(A.Jj),{placement:"top-end","onUpdate:open":t[0]||(t[0]=e=>d.value=e)},{dropdownCollection:(0,n.withCtx)(()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(r.value,(e,t)=>(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(A.s$),{key:t,onClick:e.action},{before:(0,n.withCtx)(()=>[e.icon?((0,n.openBlock)(),(0,n.createElementBlock)("i",{key:0,class:(0,n.normalizeClass)(["icon",e.icon])},null,2)):(0,n.createCommentVNode)("",!0)]),default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.label)+" ",1)]),_:2},1032,["onClick"])),[[a,e.description]])),128))]),default:(0,n.withCtx)(()=>[(0,n.createVNode)((0,n.unref)(A.Nq),{ghost:"",small:"",disabled:i.disabled},{default:(0,n.withCtx)(()=>t[1]||(t[1]=[(0,n.createElementVNode)("i",{class:"icon icon-actions"},null,-1)])),_:1,__:[1]},8,["disabled"])]),_:1})])}}});const D=S;var T=D;const I={class:"chat-header"},$={class:"chat-title"},z={class:"chat-name"},P={class:"label"},L={class:"chat-menu"},j={class:"chat-close-btn"};var R=(0,n.defineComponent)({__name:"Header",props:{disabled:{type:Boolean,default:!1}},emits:["close:chat","download:chat","show:help","config:chat","toggle:history"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t;function r(){i.disabled||c("toggle:history")}return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",I,[(0,n.createElementVNode)("div",$,[(0,n.createElementVNode)("div",z,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["chat-history-btn",{disabled:e.disabled}])},[(0,n.createVNode)(V.A,{small:"",ghost:"",class:"btn-open-history","data-testid":"rancher-ai-ui-chat-history-button",onClick:r,onKeydown:[(0,n.withKeys)((0,n.withModifiers)(r,["stop"]),["enter"]),(0,n.withKeys)((0,n.withModifiers)(r,["stop"]),["space","enter"])]},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(i.disabled?"icon icon-ai":"icon icon-menu")},null,2)]),_:1},8,["onKeydown"])],2),(0,n.createElementVNode)("span",P,(0,n.toDisplayString)((0,n.unref)(s)("ai.header.title")),1)])]),(0,n.createElementVNode)("div",L,[(0,n.createVNode)(T,{"onDownload:chat":t[0]||(t[0]=e=>c("download:chat")),"onShow:help":t[1]||(t[1]=e=>c("show:help")),"onConfig:chat":t[2]||(t[2]=e=>c("config:chat"))})]),(0,n.createElementVNode)("div",j,[(0,n.createVNode)(V.A,{small:"",ghost:"",class:"btn-close","data-testid":"rancher-ai-ui-chat-close-button",onClick:t[3]||(t[3]=e=>c("close:chat")),onKeydown:[t[4]||(t[4]=(0,n.withKeys)((0,n.withModifiers)(e=>c("close:chat"),["stop"]),["enter"])),t[5]||(t[5]=(0,n.withKeys)((0,n.withModifiers)(e=>c("close:chat"),["stop"]),["space","enter"]))]},{default:(0,n.withCtx)(()=>t[6]||(t[6]=[(0,n.createElementVNode)("i",{class:"icon icon-close"},null,-1)])),_:1,__:[6]})])]))}}),U=(a(70484),a(47433));const O=(0,U.A)(R,[["__scopeId","data-v-309031dc"]]);var F=O,K=a(12784),W=a.n(K);const X=["data-testid"],G={key:0,class:"dots"},H="idle";var Y=(0,n.defineComponent)({__name:"Processing",props:{phases:{type:Array,default:()=>[]},phase:{type:String,default:""},showProgress:{type:Boolean,default:!0}},setup(e){const t=(0,o.Pj)(),{t:a}=(0,l.s)(t),s=(0,n.ref)(Date.now());let i;const c=e,r=(0,n.computed)(()=>{const e=Math.floor(s.value/500%4);return".".repeat(e)}),d=(0,n.ref)(c.phase),u=W()(e=>{d.value=e},150);(0,n.watch)(()=>c.phase,e=>u(e),{immediate:!0});const m=(0,n.computed)(()=>!d.value||d.value===H||c.phases.length&&!c.phases.includes(d.value)?"":a(`ai.phase.${d.value}`));return(0,n.onMounted)(()=>{i=setInterval(()=>{s.value=Date.now()},500)}),(0,n.onBeforeUnmount)(()=>{i&&clearInterval(i)}),(e,t)=>m.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"processing-message","data-testid":`rancher-ai-ui-processing-phase-${m.value}`},[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(m.value),1),c.showProgress?((0,n.openBlock)(),(0,n.createElementBlock)("div",G,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(r.value),1)])):(0,n.createCommentVNode)("",!0)],8,X)):(0,n.createCommentVNode)("",!0)}});a(4047);const q=(0,U.A)(Y,[["__scopeId","data-v-051cdf32"]]);var J=q;const Z=["data-testid"],Q={class:"rc-button-label"},ee={key:1},te={key:1},ae={key:0,class:"text-muted"};var ne=(0,n.defineComponent)({__name:"Action",props:{value:{type:Object,default:()=>({})}},setup(e){const t=(0,o.Pj)(),a=e,s=(0,n.ref)(null),c=(0,n.ref)("");function l(){s.value.detailLocation&&t.state.$router.push({...s.value.detailLocation,params:{...s.value.detailLocation.params||{},product:"explorer",cluster:a.value?.resource?.cluster||s.value.detailLocation.params?.cluster}})}return(0,n.onMounted)(async()=>{if(a.value.resource?.detailLocation)s.value=a.value.resource;else{const n="management";await t.dispatch("loadManagement");const{cluster:o,type:i,namespace:c,name:l}=a.value.resource||{};try{s.value=await t.dispatch(`${n}/find`,{cluster:o,type:i,id:c?`${c}/${l}`:l})}catch(e){(0,C.R)("Action - Could not find resource",e),s.value=null}}}),(e,t)=>{const o=(0,n.resolveDirective)("clean-tooltip");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[a.value.type===(0,n.unref)(i.X2).Button?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,"data-testid":`rancher-ai-ui-chat-message-action-button-${a.value?.resource?.name}`},[(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)(V.A,{small:"",secondary:"",disabled:!s.value,onClick:l},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",Q,(0,n.toDisplayString)(a.value.label),1)]),_:1},8,["disabled"])),[[o,c.value]])],8,Z)):(0,n.createCommentVNode)("",!0),a.value.type===(0,n.unref)(i.X2).Link?((0,n.openBlock)(),(0,n.createElementBlock)("span",ee,[s.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:0,class:"link",onClick:l},[(0,n.createTextVNode)((0,n.toDisplayString)(a.value.label),1)])),[[o,c.value]]):((0,n.openBlock)(),(0,n.createElementBlock)("span",te,[(0,n.createTextVNode)((0,n.toDisplayString)(a.value.label)+" ",1),a.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("span",ae,"â€”"))]))])):(0,n.createCommentVNode)("",!0)],64)}}});a(31160);const oe=(0,U.A)(ne,[["__scopeId","data-v-66198d4c"]]);var se=oe;const ie={class:"chat-actions-container"},ce={class:"chat-msg-action-title"},le={class:"chat-msg-actions-container"},re={class:"chat-msg-action-tags"},de=7;var ue=(0,n.defineComponent)({__name:"index",props:{label:{type:String,default:""},actions:{type:Array,default:()=>[]}},setup(e){const t=(0,o.Pj)(),{t:a}=(0,l.s)(t),s=e,i=(0,n.ref)(!1),c=(0,n.computed)(()=>s.actions.length>de?s.actions.slice(0,de):s.actions),r=(0,n.computed)(()=>s.actions.length>de?s.actions.slice(de):[]),d=()=>{i.value=!i.value};return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",ie,[(0,n.createElementVNode)("div",ce,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(s.label||"ACTIONS"),1)]),(0,n.createElementVNode)("div",le,[(0,n.createElementVNode)("div",re,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(c.value,(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:t,class:"mt-2 chat-msg-actions"},[(0,n.createVNode)(se,{value:e},null,8,["value"])]))),128)),i.value?((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,{key:0},(0,n.renderList)(r.value,(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:t,class:"mt-2 chat-msg-actions"},[(0,n.createVNode)(se,{value:e},null,8,["value"])]))),128)):(0,n.createCommentVNode)("",!0)]),r.value.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:0,class:"chat-msg-actions-more",onClick:d},[i.value?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(a)("ai.message.actions.less",{},!0)),1)],64)):((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:0},[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(a)("ai.message.actions.more",{count:r.value.length},!0)),1)],64)),(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(["icon icon-sm",{"icon icon-chevron-down text-label":!i.value,"icon icon-chevron-up text-label":i.value}])},null,2)])):(0,n.createCommentVNode)("",!0)])]))}});a(92914);const me=(0,U.A)(ue,[["__scopeId","data-v-061588ed"]]);var pe=me;const ge=["data-testid"];var he=(0,n.defineComponent)({__name:"ContextTag",props:{item:{default:()=>({tag:"",value:null})},removeEnabled:{type:Boolean,default:!0},type:{default:"default"}},emits:["remove"],setup(e,{emit:t}){const a=e,o=t;return(e,t)=>{const s=(0,n.resolveDirective)("clean-tooltip");return(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["vs__selected tag",{["user-context"]:"user"===a.type}])},[(0,n.createElementVNode)("div",{class:"tag-content","data-testid":`rancher-ai-ui-context-tag-${a.item.valueLabel||a.item.value}`},[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(a.item.valueLabel||a.item.value),1)],8,ge),a.removeEnabled?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,type:"button",class:"vs__deselect",onClick:t[0]||(t[0]=e=>o("remove",a.item))})):(0,n.createCommentVNode)("",!0)],2)),[[s,a.item.description]])}}});a(17649);const ve=(0,U.A)(he,[["__scopeId","data-v-40445c5c"]]);var fe=ve;const be={class:"chat-source-container"},ye={class:"chat-msg-source-label"},xe={key:0,class:"chat-msg-source-tags"},ke=["onClick"],we={class:"sr-only"};var Ce=(0,n.defineComponent)({__name:"SourceLinks",props:{links:{default:()=>[]}},setup(e){const t=(0,o.Pj)(),{t:a}=(0,l.s)(t),s=(0,n.ref)(!1),i=(0,n.computed)(()=>e.links.map(e=>{const t=e?.endsWith("/")?e.slice(0,-1):e,a=t?.split("/")||[],n=a[a.length-1]||"",o=n.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return{label:o||"Link",value:e}}));function c(e){window.open(e,"_blank")}return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",be,[(0,n.createElementVNode)("div",ye,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(a)("ai.message.source.label")),1),(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(["icon icon-sm",{"icon icon-chevron-up text-label":!s.value,"icon icon-chevron-down text-label":s.value}]),onClick:t[0]||(t[0]=e=>s.value=!s.value)},null,2)]),s.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",xe,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(i.value,(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:e.value,onClick:t=>c(e.value)},[(0,n.createElementVNode)("span",we,(0,n.toDisplayString)((0,n.unref)(a)("ai.generic.opensInNewTab")),1),(0,n.createVNode)(fe,{"data-testid":`rancher-ai-ui-chat-message-source-link-${t}`,"remove-enabled":!1,item:{value:e.label},type:"user",class:"chat-msg-source-tag"},null,8,["data-testid","item"])],8,ke))),128))]))]))}});a(97785);const Ee=(0,U.A)(Ce,[["__scopeId","data-v-224c7d0a"]]);var Ne=Ee;const _e={class:"confirmation-action"},Be={class:"confirmation-message"},Ve={"data-testid":"rancher-ai-ui-chat-message-confirmation-message"},Ae={key:0,class:"confirmation-buttons"},Me={key:0,class:"delete-confirmation"},Se={key:1,class:"standard-confirmation"},De={class:"rc-button-label"},Te={class:"rc-button-label"},Ie={key:1,class:"confirmation-status"},$e={key:0,class:"status-confirmed","data-testid":"rancher-ai-ui-chat-message-confirmation-confirmed"},ze={key:1,class:"status-canceled","data-testid":"rancher-ai-ui-chat-message-confirmation-canceled"};var Pe=(0,n.defineComponent)({__name:"Confirmation",props:{value:{type:Object,default:()=>({})},messageContent:{type:String,default:""}},emits:["confirm"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),c=e,r=t,d=(0,n.computed)(()=>{const e=s("ai.confirmation.message.question");try{if(!c.messageContent){const{kind:t,name:a,namespace:n,cluster:o}=c.value.action?.resource||{};if(t&&a&&n&&o){const i=c.value.action?.payload?.reduce((e,i)=>{const{op:c,value:l,path:r}=i||{};return c&&l&&r?`${e+s("ai.confirmation.message.description",{op:c,value:"string"===typeof l?l:JSON.stringify(l),path:r,name:a,kind:t,namespace:n,cluster:o},!0)}<br>`:e},"");if(i?.trim())return`${i}<br>${e}`}}}catch(t){(0,C.R)("Error generating confirmation description:",t)}return e});return(e,t)=>{const a=(0,n.resolveDirective)("clean-html");return(0,n.openBlock)(),(0,n.createElementBlock)("div",_e,[(0,n.createElementVNode)("div",Be,[(0,n.withDirectives)((0,n.createElementVNode)("span",Ve,null,512),[[a,d.value]])]),c.value.status===(0,n.unref)(i._r).Pending?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ae,[c.value.action?.type===(0,n.unref)(i.YB).Delete?((0,n.openBlock)(),(0,n.createElementBlock)("div",Me)):((0,n.openBlock)(),(0,n.createElementBlock)("div",Se,[(0,n.createVNode)(V.A,{small:"",tertiary:"","data-testid":"rancher-ai-ui-chat-message-confirmation-cancel-button",onClick:t[0]||(t[0]=e=>r("confirm",!1))},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",De,(0,n.toDisplayString)((0,n.unref)(s)("ai.confirmation.cancel")),1)]),_:1}),(0,n.createVNode)(V.A,{small:"",tertiary:"","data-testid":"rancher-ai-ui-chat-message-confirmation-confirm-button",onClick:t[1]||(t[1]=e=>r("confirm",!0))},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",Te,(0,n.toDisplayString)((0,n.unref)(s)("ai.confirmation.confirm")),1)]),_:1})]))])):((0,n.openBlock)(),(0,n.createElementBlock)("div",Ie,[c.value.status===(0,n.unref)(i._r).Confirmed?((0,n.openBlock)(),(0,n.createElementBlock)("div",$e,[t[2]||(t[2]=(0,n.createElementVNode)("i",{class:"icon icon-checkmark"},null,-1)),(0,n.createElementVNode)("p",null,(0,n.toDisplayString)((0,n.unref)(s)("ai.confirmation.confirmed")),1)])):c.value.status===(0,n.unref)(i._r).Canceled?((0,n.openBlock)(),(0,n.createElementBlock)("div",ze,[t[3]||(t[3]=(0,n.createElementVNode)("i",{class:"icon icon-close canceled"},null,-1)),(0,n.createElementVNode)("p",null,(0,n.toDisplayString)((0,n.unref)(s)("ai.confirmation.canceled")),1)])):(0,n.createCommentVNode)("",!0)]))])}}});a(46776);const Le=(0,U.A)(Pe,[["__scopeId","data-v-48bab9a2"]]);var je=Le;const Re={class:"suggestions-container"},Ue={class:"suggestions-header"},Oe={class:"suggestions-list"},Fe={class:"rc-button-label"};var Ke=(0,n.defineComponent)({__name:"Suggestions",props:{label:{type:String,default:()=>""},suggestions:{type:Array,default:()=>[]}},emits:["select"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t;return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Re,[(0,n.createElementVNode)("div",Ue,(0,n.toDisplayString)(i.label||(0,n.unref)(s)("ai.message.suggestions.label")),1),(0,n.createElementVNode)("ul",Oe,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(i.suggestions,(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("li",{key:t,class:"suggestion-item"},[(0,n.createVNode)(V.A,{tertiary:"",small:"","data-testid":`rancher-ai-ui-chat-message-suggestion-${t}`,onClick:()=>c("select",e)},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",Fe,(0,n.toDisplayString)(e),1)]),_:2},1032,["data-testid","onClick"])]))),128))])]))}});a(20051);const We=(0,U.A)(Ke,[["__scopeId","data-v-10a0aa9c"]]);var Xe=We;const Ge={class:"user-msg-avatar"},He=["src","alt"],Ye={key:1,class:"icon icon-user"};var qe=(0,n.defineComponent)({__name:"UserAvatar",setup(e){const t=(0,o.Pj)(),{t:a}=(0,l.s)(t),s=(0,n.computed)(()=>{const e=t.getters["rancher/byId"](r.k$.PRINCIPAL,t.getters["auth/principalId"])||{};return e?.avatarSrc});return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Ge,[s.value?((0,n.openBlock)(),(0,n.createElementBlock)("img",{key:0,src:s.value,class:"round-avatar",width:"20",height:"20",alt:(0,n.unref)(a)("nav.alt.userAvatar")},null,8,He)):((0,n.openBlock)(),(0,n.createElementBlock)("i",Ye))]))}});a(62773);const Je=(0,U.A)(qe,[["__scopeId","data-v-2d4aa4a2"]]);var Ze=Je,Qe=a.p+"img/liz-icon.fdbc7bd8.svg";const et={class:"system-msg-avatar"},tt=["src"];var at=(0,n.defineComponent)({__name:"SystemAvatar",setup(e){return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",et,[(0,n.createElementVNode)("img",{class:"img-svg",src:(0,n.unref)(Qe)},null,8,tt)]))}});a(43188);const nt=(0,U.A)(at,[["__scopeId","data-v-7bae8fb7"]]);var ot=nt,st=(0,n.defineComponent)({__name:"BubbleButton",props:{icon:{type:String,default:""},tooltip:{type:String,default:""}},emits:["click"],setup(e,{emit:t}){const a=e,o=t;return(e,t)=>{const s=(0,n.resolveDirective)("clean-tooltip");return(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("button",{class:"bubble-action-btn btn role-tertiary",type:"button",role:"button",onClick:t[0]||(t[0]=e=>o("click"))},[(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(`icon ${a.icon}`)},null,2)])),[[s,a.tooltip]])}}});a(14871);const it=(0,U.A)(st,[["__scopeId","data-v-6951721d"]]);var ct=it;const lt={class:"chat-msg-content"},rt={key:0,class:"chat-msg-bubble-actions"},dt={class:"chat-msg-text"},ut={key:0,class:"chat-msg-selected-agent"},mt=["data-testid"],pt={key:1},gt={key:2},ht={key:0},vt={key:1},ft={key:3},bt={key:1,class:"chat-msg-section-footer"},yt={key:2,class:"chat-msg-section-footer"},xt={key:0,class:"chat-msg-section chat-msg-user-context-tags"},kt={key:1,class:"chat-msg-section"},wt={key:2,class:"chat-msg-section"},Ct={key:3,class:"chat-msg-section"},Et={key:4,class:"chat-msg-timestamp"};var Nt=(0,n.defineComponent)({__name:"index",props:{message:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},pendingConfirmation:{type:Boolean,default:!1}},emits:["update:message","confirm:message","send:message"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),c=e,r=t,d=(0,n.computed)(()=>c.message.role===i.Xh.Assistant&&!c.message.completed&&(c.message.thinking||!c.message.formattedMessageContent)),u=(0,n.ref)(!1),m=(0,n.ref)(null);function p(){if(!c.message.summaryContent&&!c.message.messageContent&&!c.message.thinkingContent&&!c.message.formattedMessageContent)return;let e="";i.Xh.Assistant&&c.message.showThinking&&(e+=c.message.thinkingContent?`${c.message.thinkingContent}\n`:""),c.message.summaryContent?(e+=c.message.summaryContent,c.message.showCompleteMessage&&(e+=`\n${c.message.messageContent||""}`)):e+=c.message.messageContent||c.message.formattedMessageContent||"",navigator.clipboard.writeText(e.trim()),u.value=!0,m.value&&clearTimeout(m.value),m.value=setTimeout(()=>{u.value=!1},1e3)}function g(){(0,n.nextTick)(()=>r("send:message",c.message))}function h(){const e=!c.message.showCompleteMessage;(0,n.nextTick)(()=>r("update:message",{...c.message,showCompleteMessage:e}))}function v(){const e=!c.message.showThinking;(0,n.nextTick)(()=>r("update:message",{...c.message,showThinking:e}))}return(0,n.onBeforeUnmount)(()=>{m.value&&clearTimeout(m.value)}),(t,a)=>{const o=(0,n.resolveDirective)("clean-tooltip"),l=(0,n.resolveDirective)("clean-html");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["chat-message",{"chat-message-user":c.message.role===(0,n.unref)(i.Xh).User,"disabled-panel":c.disabled}])},[((0,n.openBlock)(),(0,n.createBlock)((0,n.resolveDynamicComponent)(c.message.role===(0,n.unref)(i.Xh).User?Ze:ot),{class:"chat-msg-avatar"})),(0,n.createElementVNode)("div",lt,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["chat-msg-bubble",{"chat-msg-bubble-user":c.message.role===(0,n.unref)(i.Xh).User,"chat-msg-bubble-assistant":c.message.role!==(0,n.unref)(i.Xh).User,"chat-msg-bubble-error":c.message.isError}])},[c.disabled?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",rt,[c.message.role===(0,n.unref)(i.Xh).Assistant&&c.message.thinkingContent?((0,n.openBlock)(),(0,n.createBlock)(ct,{key:0,"data-testid":"rancher-ai-ui-chat-message-show-thinking-button",icon:"icon-thinking-process",tooltip:c.message.showThinking?(0,n.unref)(s)("ai.message.actions.tooltip.hideThinking"):(0,n.unref)(s)("ai.message.actions.tooltip.showThinking"),onClick:v},null,8,["tooltip"])):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(ct,{icon:u.value?"icon-checkmark":"icon-copy",tooltip:(0,n.unref)(s)("ai.message.actions.tooltip.copy"),onClick:p},null,8,["icon","tooltip"]),c.message.role!==(0,n.unref)(i.Xh).User||e.pendingConfirmation?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(ct,{key:1,icon:"icon-backup",tooltip:(0,n.unref)(s)("ai.message.actions.tooltip.resend"),onClick:g},null,8,["tooltip"]))])),(0,n.createElementVNode)("div",dt,[c.message.role===(0,n.unref)(i.Xh).Assistant&&c.message.agentMetadata?.agent?((0,n.openBlock)(),(0,n.createElementBlock)("div",ut,[(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",{class:"chat-msg-selected-agent-label","data-testid":`rancher-ai-ui-chat-message-selected-agent-label-${c.message.agentMetadata?.agent?.name}`},[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(s)("ai.agents.selectedAgent.label",{agent:c.message.agentMetadata?.agent?.displayName}))+" "+(0,n.toDisplayString)((0,n.unref)(s)(`ai.agents.selectionMode.${c.message.agentMetadata?.selectionMode||"none"}`)),1)],8,mt)),[[o,c.message.agentMetadata?.agent?.description]])])):(0,n.createCommentVNode)("",!0),!c.disabled&&d.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",pt,[(0,n.createVNode)(J,{"data-testid":"rancher-ai-ui-chat-message-thinking-label",phase:(0,n.unref)(i.N$).Thinking},null,8,["phase"])])):(0,n.createCommentVNode)("",!0),c.message.showThinking?((0,n.openBlock)(),(0,n.createElementBlock)("span",gt,[d.value?((0,n.openBlock)(),(0,n.createElementBlock)("br",ht)):(0,n.createCommentVNode)("",!0),c.message.formattedThinkingContent?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",vt,null,512)),[[l,c.message.formattedThinkingContent]]):(0,n.createCommentVNode)("",!0),a[2]||(a[2]=(0,n.createElementVNode)("br",null,null,-1))])):(0,n.createCommentVNode)("",!0),c.message.summaryContent?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",ft,null,512)),[[l,c.message.summaryContent]]):(0,n.createCommentVNode)("",!0),!c.message.formattedMessageContent||c.message.summaryContent&&!c.message.showCompleteMessage?(0,n.createCommentVNode)("",!0):(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:4,"data-testid":"rancher-ai-ui-chat-message-formatted-content",class:(0,n.normalizeClass)({"chat-msg-user-expanded":!!c.message.summaryContent&&c.message.showCompleteMessage})},null,2)),[[l,c.message.formattedMessageContent]])]),c.message.suggestionActions?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",bt,[(0,n.createVNode)(Xe,{suggestions:c.message.suggestionActions,onSelect:a[0]||(a[0]=e=>r("send:message",e))},null,8,["suggestions"])])):(0,n.createCommentVNode)("",!0),c.message.confirmation?((0,n.openBlock)(),(0,n.createElementBlock)("div",yt,[(0,n.createVNode)(je,{value:c.message.confirmation,"message-content":c.message.messageContent,onConfirm:a[1]||(a[1]=e=>r("confirm:message",{message:c.message,result:e}))},null,8,["value","message-content"])])):(0,n.createCommentVNode)("",!0),c.message.role===(0,n.unref)(i.Xh).Assistant&&c.message.thinkingContent&&c.message.showThinking?((0,n.openBlock)(),(0,n.createBlock)(V.A,{key:3,class:"inline-button",small:"",ghost:"",onClick:v},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("a",null,(0,n.toDisplayString)((0,n.unref)(s)("ai.message.actions.hideThinking")),1)]),_:1})):(0,n.createCommentVNode)("",!0),c.message.summaryContent?((0,n.openBlock)(),(0,n.createBlock)(V.A,{key:4,class:"inline-button",small:"",ghost:"",onClick:h},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("a",null,(0,n.toDisplayString)(c.message.showCompleteMessage?(0,n.unref)(s)("ai.message.actions.hideCompleteMessage"):(0,n.unref)(s)("ai.message.actions.showCompleteMessage")),1)]),_:1})):(0,n.createCommentVNode)("",!0)],2),c.message.role===(0,n.unref)(i.Xh).User&&c.message.contextContent?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",xt,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(c.message.contextContent,(e,t)=>((0,n.openBlock)(),(0,n.createBlock)(fe,{key:t,item:e,"remove-enabled":!1,type:"user",class:"chat-msg-user-context-tag"},null,8,["item"]))),128))])):(0,n.createCommentVNode)("",!0),c.message.sourceLinks?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",kt,[(0,n.createVNode)(Ne,{links:c.message.sourceLinks},null,8,["links"])])):(0,n.createCommentVNode)("",!0),c.message.relatedResourcesActions?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",wt,[(0,n.createVNode)(pe,{label:(0,n.unref)(s)("ai.message.relatedResourcesActions.label"),actions:c.message.relatedResourcesActions},null,8,["label","actions"])])):(0,n.createCommentVNode)("",!0),c.message.actions?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ct,[(0,n.createVNode)(pe,{label:(0,n.unref)(s)("ai.message.quickActions.label"),actions:c.message.actions},null,8,["label","actions"])])):(0,n.createCommentVNode)("",!0),c.message.timestamp?((0,n.openBlock)(),(0,n.createElementBlock)("div",Et,(0,n.toDisplayString)(c.message.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)):(0,n.createCommentVNode)("",!0)])],2)}}});a(29230);const _t=(0,U.A)(Nt,[["__scopeId","data-v-79f0d9d5"]]);var Bt=_t;const Vt={class:"chat-welcome-msg-splash"},At={class:"chat-welcome-msg-avatar-panel"},Mt={class:"chat-welcome-msg-avatar-circle"},St=["src"],Dt={class:"chat-welcome-msg-greeting"},Tt={class:"chat-welcome-msg-greeting-bubble"},It={class:"chat-welcome-msg-text-panel"},$t={key:0,class:"chat-welcome-msg-bubble"},zt={class:"chat-welcome-msg-text"},Pt={key:1,class:"chat-welcome-msg-bubble"},Lt={class:"chat-welcome-msg-text"},jt={key:2,class:"chat-welcome-msg-bubble chat-welcome-suggestions"},Rt={class:"chat-welcome-msg-text"};var Ut=(0,n.defineComponent)({__name:"Welcome",props:{message:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["send:message"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t,r=(0,n.computed)(()=>{const e=i.message.templateContent?.content?.principal,t={name:e?.name||"User"};return"admin"===e?.loginName&&(t.name=e?.loginName),t});return(e,t)=>{const a=(0,n.resolveDirective)("clean-html");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["chat-welcome-message",{"disabled-panel":i.disabled}])},[(0,n.createElementVNode)("div",Vt,[(0,n.createElementVNode)("div",At,[(0,n.createElementVNode)("div",Mt,[(0,n.createElementVNode)("img",{src:(0,n.unref)(Qe),alt:"Liz Avatar",width:"70",height:"70"},null,8,St)]),(0,n.createElementVNode)("div",Dt,[(0,n.createElementVNode)("span",Tt,(0,n.toDisplayString)((0,n.unref)(s)("ai.message.system.welcome.greetings.line3",{name:r.value.name},!0)),1)])]),(0,n.createElementVNode)("div",It,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(s)("ai.message.system.welcome.greetings.line1",{},!0)),1),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(s)("ai.message.system.welcome.greetings.line2")),1)])]),i.message.templateContent?.content?.message?((0,n.openBlock)(),(0,n.createElementBlock)("div",$t,[(0,n.createElementVNode)("div",zt,[(0,n.withDirectives)((0,n.createElementVNode)("span",null,null,512),[[a,(0,n.unref)(u.gg)(i.message.templateContent?.content?.message||"")]])])])):(0,n.createCommentVNode)("",!0),i.message.completed&&i.message.messageContent?((0,n.openBlock)(),(0,n.createElementBlock)("div",Pt,[(0,n.createElementVNode)("div",Lt,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(i.message.messageContent),1)])])):(0,n.createCommentVNode)("",!0),i.message.completed&&i.message.suggestionActions?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",jt,[(0,n.createElementVNode)("div",Rt,[(0,n.createVNode)(Xe,{label:(0,n.unref)(s)("ai.message.system.welcome.suggestions.label"),suggestions:i.message.suggestionActions,onSelect:t[0]||(t[0]=e=>c("send:message",e))},null,8,["label","suggestions"])])])):(0,n.createCommentVNode)("",!0)],2)}}});a(5772);const Ot=(0,U.A)(Ut,[["__scopeId","data-v-587599d4"]]);var Ft=Ot;const Kt={key:0,class:"chat-system-suggestion-msg-bubble"},Wt={class:"chat-system-suggestion-msg-text"},Xt={class:"chat-system-suggestion-actions"},Gt=["data-testid"],Ht={class:"chat-system-suggestion-msg-text"},Yt={key:1,class:"chat-system-suggestion-actions-buttons"},qt={class:"rc-button-label"},Jt={class:"rc-button-label"};var Zt=(0,n.defineComponent)({__name:"SystemSuggestion",props:{message:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:message"],setup(e,{emit:t}){const a=e,o=t,s=(0,n.computed)(()=>{const e=a.message?.actions||[];return{confirm:e[0],cancel:e[1]}});function i(e){if(s.value[e]?.action){const t=s.value[e].action();o("update:message",{...a.message,confirmation:t})}}return(e,t)=>{const o=(0,n.resolveDirective)("clean-html");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["chat-system-suggestion-message",{"disabled-panel":a.disabled}])},[(0,n.createVNode)(ot,{class:"chat-msg-avatar"}),a.message?.templateContent?.content?.message?((0,n.openBlock)(),(0,n.createElementBlock)("div",Kt,[(0,n.createElementVNode)("div",Wt,[(0,n.withDirectives)((0,n.createElementVNode)("span",null,null,512),[[o,(0,n.unref)(u.gg)(a.message.templateContent.content.message||"")]])]),(0,n.createElementVNode)("div",Xt,[a.message.confirmation?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,"data-testid":`rancher-ai-ui-chat-message-confirmation-${a.message.confirmation.status}`,class:(0,n.normalizeClass)(["chat-system-suggestion-actions-result",`status-${a.message.confirmation.status}`])},[(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(["icon",a.message.confirmation.icon])},null,2),(0,n.withDirectives)((0,n.createElementVNode)("span",Ht,null,512),[[o,(0,n.unref)(u.gg)(a.message.confirmation.label||"")]])],10,Gt)):((0,n.openBlock)(),(0,n.createElementBlock)("div",Yt,[s.value.cancel?.action?((0,n.openBlock)(),(0,n.createBlock)(V.A,{key:0,small:"",tertiary:"","data-testid":"rancher-ai-ui-chat-message-confirmation-cancel-button",onClick:t[0]||(t[0]=e=>i("cancel"))},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",qt,(0,n.toDisplayString)(s.value.cancel?.label),1)]),_:1})):(0,n.createCommentVNode)("",!0),s.value.confirm?.action?((0,n.openBlock)(),(0,n.createBlock)(V.A,{key:1,small:"",secondary:"","data-testid":"rancher-ai-ui-chat-message-confirmation-confirm-button",onClick:t[1]||(t[1]=e=>i("confirm"))},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",Jt,(0,n.toDisplayString)(s.value.confirm?.label),1)]),_:1})):(0,n.createCommentVNode)("",!0)]))])])):(0,n.createCommentVNode)("",!0)],2)}}});a(20128);const Qt=(0,U.A)(Zt,[["__scopeId","data-v-54f5af72"]]);var ea=Qt;const ta={class:"scroll-button"};var aa=(0,n.defineComponent)({__name:"ScrollButton",props:{direction:{type:String,default:"down"}},emits:["scroll"],setup(e,{emit:t}){const a=e,o=t;return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",ta,[(0,n.createElementVNode)("button",{class:"scroll-button-btn role-tertiary",type:"button",role:"button",onClick:t[0]||(t[0]=e=>o("scroll",a.direction))},[(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(["icon",`icon-chevron-${a.direction}`,"text-label"])},null,2)])]))}});a(89524);const na=(0,U.A)(aa,[["__scopeId","data-v-5ac99e1f"]]);var oa=na,sa=(0,n.defineComponent)({__name:"Messages",props:{activeChatId:{type:String,default:""},messages:{type:Array,default:()=>[]},errors:{type:Array,default:()=>[]},messagePhase:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:message","confirm:message","send:message"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),c=e,r=t,d=(0,n.ref)(null),m=(0,n.ref)(!0),p=(0,n.ref)(!1),g=(0,n.computed)(()=>[...c.messages].filter(e=>e.messageContent||e.thinkingContent||e.confirmation||e.suggestionActions?.length||e.templateContent).map(e=>({...e,formattedMessageContent:e.role===i.Xh.Assistant||e.summaryContent?(0,u.gg)(e.messageContent||""):e.messageContent,formattedThinkingContent:e.role===i.Xh.Assistant?(0,u.gg)(e.thinkingContent||""):""})).sort((e,t)=>(Number(e.timestamp)||0)-(Number(t.timestamp)||0)||`${e.id}`.localeCompare(`${t.id}`))),h=(0,n.computed)(()=>c.errors.map(e=>({role:i.Xh.System,formattedMessageContent:e.message||s(e.key),timestamp:new Date,completed:!0,isError:!0,actions:e.action?[e.action]:[]})));function v(e){switch(e){case i.dU.Welcome:return Ft;case i.dU.SystemSuggestion:return ea;default:return null}}function f(){const e=d.value;e&&(0,n.nextTick)(()=>{m.value=e.scrollTop+e.clientHeight>=e.scrollHeight-2,p.value=e.scrollTop+e.clientHeight<e.scrollHeight-150})}function b(){d.value&&(d.value.scrollTop=d.value.scrollHeight)}(0,n.watch)(()=>c.activeChatId,(e,t)=>{t&&e!==t&&(0,n.nextTick)(()=>{f(),b()})}),(0,n.watch)(()=>[c.messages,c.messagePhase],(e,t)=>{const a=(e||[])[0],o=(t||[])[0];(0,n.nextTick)(()=>{const e=m.value||o&&a&&a.length>o.length&&a[a.length-1].role===i.Xh.User;e&&b()})},{immediate:!0,deep:!0});const y=(0,n.watch)(()=>c.errors,(e,t)=>{(0,n.nextTick)(()=>{d.value&&(e||[]).length>(t||[]).length&&(d.value.scrollTop=d.value.scrollHeight,y())})},{immediate:!0,deep:!0});return(0,n.onMounted)(()=>{d.value&&d.value.addEventListener("scroll",f)}),(0,n.onBeforeUnmount)(()=>{d.value&&d.value.removeEventListener("scroll",f)}),(t,a)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{ref_key:"messagesView",ref:d,class:"chat-messages"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(g.value,(t,o)=>((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:o},[t.templateContent?((0,n.openBlock)(),(0,n.createBlock)((0,n.resolveDynamicComponent)(v(t.templateContent?.component)),{key:0,class:(0,n.normalizeClass)({"chat-message-template-welcome":g.value.length>1}),"data-testid":`rancher-ai-ui-chat-message-box-${t.id}`,"data-teststatus":`rancher-ai-ui-chat-message-status-${t.id}-${t.completed?"completed":"inprogress"}`,disabled:c.disabled,message:t,"onUpdate:message":a[0]||(a[0]=e=>r("update:message",e)),"onSend:message":a[1]||(a[1]=e=>r("send:message",e))},null,40,["class","data-testid","data-teststatus","disabled","message"])):((0,n.openBlock)(),(0,n.createBlock)(Bt,{key:1,"data-testid":`rancher-ai-ui-chat-message-box-${t.id}`,"data-teststatus":`rancher-ai-ui-chat-message-status-${t.id}-${t.completed?"completed":"inprogress"}`,message:t,disabled:c.disabled,"pending-confirmation":e.messagePhase===(0,n.unref)(i.N$).AwaitingConfirmation,"onUpdate:message":a[2]||(a[2]=e=>r("update:message",e)),"onConfirm:message":a[3]||(a[3]=e=>r("confirm:message",e)),"onSend:message":a[4]||(a[4]=e=>r("send:message",e))},null,8,["data-testid","data-teststatus","message","disabled","pending-confirmation"]))],64))),128)),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(h.value,(e,t)=>((0,n.openBlock)(),(0,n.createBlock)(Bt,{key:t,"data-testid":`rancher-ai-ui-chat-error-message-box-${t+1}`,message:e},null,8,["data-testid","message"]))),128)),c.disabled?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(J,{key:0,class:(0,n.normalizeClass)(["chat-message-processing-label text-label",{"sticky-bottom":g.value.filter(e=>e.role===(0,n.unref)(i.Xh).User).length>0}]),phase:e.messagePhase},null,8,["class","phase"])),p.value&&!c.disabled?((0,n.openBlock)(),(0,n.createBlock)(oa,{key:1,class:"chat-message-fast-scroll",onScroll:b})):(0,n.createCommentVNode)("",!0)],512))}});a(35058);const ia=(0,U.A)(sa,[["__scopeId","data-v-67c9f315"]]);var ca=ia;const la={key:0,class:"context-select"},ra={class:"tags"},da={key:0,class:"context-reset"},ua={key:1,class:"text-muted no-context"};var ma=(0,n.defineComponent)({__name:"SelectContext",props:{options:{type:Array,default(){return[]}},autoSelect:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:t}){function a(e){return`${e.tag}_${e.value}`}const s=(0,o.Pj)(),{t:i}=(0,l.s)(s),c=e,r=(0,n.ref)([]),d=(0,n.ref)(!1),u=t;function m(e){r.value.find(t=>a(t)===a(e))?g(e):p(e)}function p(e){r.value.find(t=>a(t)===a(e))||(r.value=[...r.value,e],u("update",r.value))}function g(e){r.value=r.value.filter(t=>a(t)!==a(e)),u("update",r.value)}function h(){r.value=c.options,u("update",r.value)}return(0,n.watch)(()=>c.autoSelect,e=>{r.value=e,u("update",r.value)},{immediate:!0}),(0,n.watch)(()=>c.options,e=>{r.value=r.value.filter(t=>e.find(e=>a(e)===a(t))),u("update",r.value)}),(t,o)=>{const s=(0,n.resolveDirective)("clean-tooltip");return c.options.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",la,[(0,n.createVNode)((0,n.unref)(A.Jj),{class:"context-dropdown",placement:"top-end","onUpdate:open":o[0]||(o[0]=e=>d.value=e)},{dropdownCollection:(0,n.withCtx)(()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(c.options,(e,t)=>(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(A.s$),{key:t,onClick:t=>m(e)},{before:(0,n.withCtx)(()=>[e.icon?((0,n.openBlock)(),(0,n.createElementBlock)("i",{key:0,class:(0,n.normalizeClass)(["icon",e.icon])},null,2)):(0,n.createCommentVNode)("",!0)]),default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.tag)+":"+(0,n.toDisplayString)(e.valueLabel||e.value)+" ",1),r.value.find(t=>a(t)===a(e))?((0,n.openBlock)(),(0,n.createElementBlock)("i",{key:0,class:(0,n.normalizeClass)({"icon icon-close":r.value.find(t=>a(t)===a(e))})},null,2)):(0,n.createCommentVNode)("",!0)]),_:2},1032,["onClick"])),[[s,e.description]])),128))]),default:(0,n.withCtx)(()=>[(0,n.createVNode)((0,n.unref)(A.Nq),{ghost:"",small:"",class:"context-trigger",disabled:c.disabled},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["context-trigger-text",{"ml-5":c.disabled}])},(0,n.toDisplayString)((0,n.unref)(i)("ai.context.add")),3)]),_:1},8,["disabled"])]),_:1}),(0,n.createElementVNode)("div",ra,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(r.value,(e,t)=>((0,n.openBlock)(),(0,n.createBlock)(fe,{key:t,item:e,onRemove:t=>g(e)},null,8,["item","onRemove"]))),128))]),e.options.length!==r.value.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",da,[(0,n.createVNode)(V.A,{small:"",tertiary:"",onClick:h},{default:(0,n.withCtx)(()=>[o[1]||(o[1]=(0,n.createElementVNode)("i",{class:"icon icon-refresh mr-5"},null,-1)),(0,n.createTextVNode)(" "+(0,n.toDisplayString)((0,n.unref)(i)("ai.context.reset")),1)]),_:1,__:[1]})])):(0,n.createCommentVNode)("",!0)])):((0,n.openBlock)(),(0,n.createElementBlock)("span",ua,(0,n.toDisplayString)((0,n.unref)(i)("ai.context.none")),1))}}});a(12558);const pa=(0,U.A)(ma,[["__scopeId","data-v-5bc848de"]]);var ga=pa,ha=(0,n.defineComponent)({__name:"Context",props:{value:{type:Array,default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){const a=e,o=t;return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["chat-context",{"disabled-panel":a.disabled}])},[(0,n.createVNode)(ga,{class:"select-context",options:a.value,"auto-select":a.value,disabled:a.disabled,onUpdate:t[0]||(t[0]=e=>o("select",e))},null,8,["options","auto-select","disabled"])],2))}});a(41596);const va=(0,U.A)(ha,[["__scopeId","data-v-17264177"]]);var fa=va,ba=a(45250);const ya={class:"agent-selector-container","data-testid":"rancher-ai-ui-multi-agent-select"},xa={class:"selected-agent-name"},ka={class:"agent-label-display-name"},wa={key:0,class:"icon icon-error"},Ca="__adaptive__";var Ea=(0,n.defineComponent)({__name:"SelectAgent",props:{agents:{type:Array,default(){return[]}},agentName:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t,r=(0,n.computed)(()=>i.agents.filter(e=>"active"===e.status).map(e=>e.name)),d=(0,n.computed)(()=>{const e=r.value.length>1?[{name:Ca,displayName:s("ai.agents.items.default.displayName"),error:!1,tooltip:s("ai.agents.items.default.description")}]:[];return[...e,...i.agents.map(e=>({name:e.name,displayName:e.displayName||e.name,error:"active"!==e.status,tooltip:"active"!==e.status?s("ai.agents.items.unavailable",{},!0):s("ai.agents.items.default.description")}))]}),u=(0,n.computed)(()=>0===r.value.length?Ca:1===r.value.length?r.value[0]:i.agentName&&r.value.find(e=>e===i.agentName)?i.agentName:Ca),m=(0,ba.debounce)(e=>{c("select",e===Ca?"":e)},100),p=(0,n.ref)(!1);return(e,t)=>{const a=(0,n.resolveDirective)("clean-tooltip");return(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",ya,[(0,n.createVNode)((0,n.unref)(A.Jj),{placement:"top-end","onUpdate:open":t[0]||(t[0]=e=>p.value=e)},{dropdownCollection:(0,n.withCtx)(()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(d.value,(e,t)=>(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(A.s$),{key:t,"data-testid":`rancher-ai-ui-multi-agent-select-option-${e.name}`,class:"agent-label",disabled:e.error,onClick:t=>(0,n.unref)(m)(e.name)},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",ka,(0,n.toDisplayString)(e.displayName||e.name),1),e.error?((0,n.openBlock)(),(0,n.createElementBlock)("i",wa)):((0,n.openBlock)(),(0,n.createElementBlock)("i",{key:1,class:(0,n.normalizeClass)(["icon icon-checkmark",{hidden:e.name!==u.value}])},null,2))]),_:2},1032,["data-testid","disabled","onClick"])),[[a,{content:e.tooltip,delay:{show:500}}]])),128))]),default:(0,n.withCtx)(()=>[(0,n.createVNode)((0,n.unref)(A.Nq),{ghost:"",small:"",class:"agent-trigger",disabled:i.disabled},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",xa,(0,n.toDisplayString)(d.value?.find(e=>e.name===u.value)?.displayName||(0,n.unref)(s)("ai.agents.items.unknown")),1),(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(["icon icon-chevron-down chevron-icon",{"is-open":p.value}])},null,2)]),_:1},8,["disabled"])]),_:1})])),[[a,{content:(0,n.unref)(s)("ai.agents.selectAgent.tooltip"),delay:{show:500}}]])}}});a(99832);const Na=(0,U.A)(Ea,[["__scopeId","data-v-a0c07ec0"]]);var _a=Na;const Ba={class:"llm-model-label label text-deemphasized"};var Va=(0,n.defineComponent)({__name:"LlmModelLabel",props:{llmConfig:{type:Object,default:null}},setup(e){const t=(0,o.Pj)(),{t:a}=(0,l.s)(t),s=e,i=(0,n.computed)(()=>s.llmConfig?a("ai.configurations.label",{name:s.llmConfig.name,model:s.llmConfig.model},!0):a("ai.configurations.models.unknown")),c=(0,n.computed)(()=>s.llmConfig&&s.llmConfig.model?.length>20?s.llmConfig.model:"");return(e,t)=>{const a=(0,n.resolveDirective)("clean-tooltip");return(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",Ba,[(0,n.createTextVNode)((0,n.toDisplayString)(i.value),1)])),[[a,c.value]])}}});a(32704);const Aa=(0,U.A)(Va,[["__scopeId","data-v-3c3c8e2c"]]);var Ma=Aa;const Sa={class:"textlabel-popper"};var Da=(0,n.defineComponent)({__name:"TextLabel",props:{label:{type:String,default:""},disabled:{type:Boolean,default:!1}},setup(e){const t=e;return(a,o)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Sa,[(0,n.createVNode)((0,n.unref)(A.Jj),{placement:"top"},{dropdownCollection:(0,n.withCtx)(()=>[(0,n.renderSlot)(a.$slots,"default")]),default:(0,n.withCtx)(()=>[(0,n.createVNode)((0,n.unref)(A.Nq),{ghost:"",small:"",disabled:t.disabled},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["inline-button label text-deemphasized",{"btn-disabled":t.disabled}])},(0,n.toDisplayString)(e.label),3)]),_:1},8,["disabled"])]),_:3})]))}});a(94686);const Ta=(0,U.A)(Da,[["__scopeId","data-v-2999dae0"]]);var Ia=Ta;const $a={class:"disclaimer"},za={class:"disclaimer-section"},Pa={class:"disclaimer-section-title"},La={class:"disclaimer-section-body"},ja={class:"disclaimer-section"},Ra={class:"disclaimer-section-title"},Ua={class:"disclaimer-section-body"},Oa={class:"disclaimer-section"},Fa={class:"disclaimer-section-title"},Ka={class:"disclaimer-section-body"};var Wa=(0,n.defineComponent)({__name:"VerifyResultsDisclaimer",props:{disabled:{type:Boolean,default:!1}},setup(e){const t=(0,o.Pj)(),{t:a}=(0,l.s)(t),s=e;return(e,t)=>((0,n.openBlock)(),(0,n.createBlock)(Ia,{label:(0,n.unref)(a)("ai.configurations.verifyResults.button.label"),disabled:s.disabled},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("div",$a,[(0,n.createElementVNode)("div",za,[(0,n.createElementVNode)("span",Pa,(0,n.toDisplayString)((0,n.unref)(a)("ai.configurations.verifyResults.disclaimer.section1.title")),1),(0,n.createElementVNode)("span",La,(0,n.toDisplayString)((0,n.unref)(a)("ai.configurations.verifyResults.disclaimer.section1.body")),1)]),(0,n.createElementVNode)("div",ja,[(0,n.createElementVNode)("span",Ra,(0,n.toDisplayString)((0,n.unref)(a)("ai.configurations.verifyResults.disclaimer.section2.title")),1),(0,n.createElementVNode)("span",Ua,(0,n.toDisplayString)((0,n.unref)(a)("ai.configurations.verifyResults.disclaimer.section2.body")),1)]),(0,n.createElementVNode)("div",Oa,[(0,n.createElementVNode)("span",Fa,(0,n.toDisplayString)((0,n.unref)(a)("ai.configurations.verifyResults.disclaimer.section3.title")),1),(0,n.createElementVNode)("span",Ka,(0,n.toDisplayString)((0,n.unref)(a)("ai.configurations.verifyResults.disclaimer.section3.body")),1)])])]),_:1},8,["label","disabled"]))}});a(92908);const Xa=(0,U.A)(Wa,[["__scopeId","data-v-b04f1c04"]]);var Ga=Xa;function Ha(){const e=(0,o.Pj)(),t=(0,n.computed)(()=>e.getters["rancher-ai-ui/input/text"]);function a(t){e.commit("rancher-ai-ui/input/text",t)}function s(e){return(e||"").split("\n").filter(e=>""!==e.trim()).join("\n").trim()}return{inputText:t,updateInput:a,cleanInput:s}}const Ya={class:"chat-console","data-testid":"rancher-ai-ui-chat-console"},qa=["value","placeholder","disabled"],Ja={class:"chat-input-actions"},Za={class:"chat-console-row chat-console-chat-text-info"},Qa=200;var en=(0,n.defineComponent)({__name:"Console",props:{llmConfig:{type:Object,default:null},agents:{type:Array,default:()=>[]},agentName:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["input:content","select:agent"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t,{inputText:r,updateInput:d,cleanInput:u}=Ha(),m=(0,n.ref)(null),p=(0,n.ref)(!1),g=(0,n.computed)(()=>i.disabled?"":r.value);function h(e){d(e?.target?.value),(0,n.nextTick)(y)}function v(e){"Enter"!==e.key||e.shiftKey||f(e)}function f(e){e.preventDefault(),e.stopPropagation();const t=u(g.value);t&&c("input:content",t),d(""),(0,n.nextTick)(y)}function b(e){c("select:agent",e),(0,n.nextTick)(()=>{m.value?.focus()})}function y(){const e=m.value;if(e){e.style.height="36px";const t=e.scrollHeight,a=t>Qa?Qa:t;e.style.height=`${a}px`,e.style.overflowY=t>Qa?"auto":"hidden"}}return(0,n.onMounted)(()=>{(0,n.nextTick)(()=>{m.value?.focus(),y()})}),(0,n.watch)(()=>g.value,()=>{(0,n.nextTick)(()=>{y()})},{}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Ya,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["chat-input-wrapper",{focused:p.value,"disabled-panel":i.disabled}])},[(0,n.createElementVNode)("textarea",{ref_key:"promptTextarea",ref:m,class:"chat-input",rows:"1",value:g.value,placeholder:i.disabled?"":(0,n.unref)(s)("ai.prompt.placeholder"),disabled:i.disabled,autocomplete:"off","data-testid":"rancher-ai-ui-chat-input-textarea",onInput:h,onKeydown:v,onFocus:t[0]||(t[0]=e=>p.value=!0),onBlur:t[1]||(t[1]=e=>p.value=!1)},null,40,qa),(0,n.createElementVNode)("div",Ja,[i.agents.length>1?((0,n.openBlock)(),(0,n.createBlock)(_a,{key:0,agents:i.agents,"agent-name":i.agentName,disabled:i.disabled,onSelect:b},null,8,["agents","agent-name","disabled"])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["chat-input-send",{"disabled-panel":i.disabled}])},[(0,n.createVNode)(V.A,{class:"send-button",disabled:!(0,n.unref)(u)(g.value)||i.disabled,onClick:f,onKeydown:(0,n.withKeys)(f,["enter"])},{default:(0,n.withCtx)(()=>t[2]||(t[2]=[(0,n.createElementVNode)("i",{class:"icon icon-lg icon-send"},null,-1)])),_:1,__:[2]},8,["disabled"])],2)])],2),(0,n.createElementVNode)("div",Za,[(0,n.createVNode)(Ma,{"llm-config":i.llmConfig},null,8,["llm-config"]),(0,n.createVNode)(Ga)])]))}});a(10002);const tn=(0,U.A)(en,[["__scopeId","data-v-45913364"]]);var an=tn,nn=a(89815);const on={class:"chat-header"},sn={class:"chat-title"},cn={class:"chat-name"},ln={class:"label"};var rn=(0,n.defineComponent)({__name:"HistoryHeader",props:{disabled:{type:Boolean,default:!1}},emits:["toggle:history"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t;function r(){i.disabled||c("toggle:history")}return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",on,[(0,n.createElementVNode)("div",sn,[(0,n.createElementVNode)("div",cn,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["chat-history-btn",{"disabled-panel":i.disabled}])},[(0,n.createVNode)(V.A,{small:"",ghost:"",class:"btn-open-history","data-testid":"rancher-ai-ui-chat-history-header-button",onClick:r,onKeydown:[(0,n.withKeys)((0,n.withModifiers)(r,["stop"]),["enter"]),(0,n.withKeys)((0,n.withModifiers)(r,["stop"]),["space","enter"])]},{default:(0,n.withCtx)(()=>t[0]||(t[0]=[(0,n.createElementVNode)("i",{class:"icon icon-menu"},null,-1)])),_:1,__:[0]},8,["onKeydown"])],2),(0,n.createElementVNode)("span",ln,(0,n.toDisplayString)((0,n.unref)(s)("ai.header.title")),1)])])]))}});a(51208);const dn=(0,U.A)(rn,[["__scopeId","data-v-b2136e92"]]);var un=dn;const mn={class:"history-chat-item-menu-container","data-testid":"rancher-ai-ui-chat-history-chat-item-menu-button"},pn=["data-testid"];var gn=(0,n.defineComponent)({__name:"HistoryChatMenu",emits:["update:chat","delete:chat"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=t,c=(0,n.ref)([{id:"rename-chat",label:s("ai.history.menu.items.rename"),icon:"icon-edit",action:()=>{i("update:chat")}},{id:"delete-chat",label:s("ai.history.menu.items.delete"),icon:"icon-trash",action:()=>{i("delete:chat")}}]),r=(0,n.ref)(!1);return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",mn,[(0,n.createVNode)((0,n.unref)(A.Jj),{placement:"top-end","onUpdate:open":t[0]||(t[0]=e=>r.value=e)},{dropdownCollection:(0,n.withCtx)(()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(c.value,(e,t)=>((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(A.s$),{key:t,class:"history-chat-menu-dropdown-item",onClick:e.action},{before:(0,n.withCtx)(()=>[e.icon?((0,n.openBlock)(),(0,n.createElementBlock)("i",{key:0,class:(0,n.normalizeClass)(["icon",e.icon])},null,2)):(0,n.createCommentVNode)("",!0)]),default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",{"data-testid":`rancher-ai-ui-chat-history-chat-item-menu-button-option-${e.id}`},(0,n.toDisplayString)(e.label),9,pn)]),_:2},1032,["onClick"]))),128))]),default:(0,n.withCtx)(()=>[(0,n.createVNode)((0,n.unref)(A.Nq),{ghost:"",small:""},{default:(0,n.withCtx)(()=>t[1]||(t[1]=[(0,n.createElementVNode)("i",{class:"icon icon-actions"},null,-1)])),_:1,__:[1]})]),_:1})]))}});a(70543);const hn=(0,U.A)(gn,[["__scopeId","data-v-12b4496a"]]);var vn=hn,fn=a(30161);const bn={class:"history-panel","data-testid":"rancher-ai-ui-chat-history-panel"},yn={class:"history-header"},xn={class:"history-body"},kn={key:0,class:"history-chat-panel"},wn={class:"history-chat-title"},Cn={class:"history-chat-title-label text-label"},En={class:"history-chat-list"},Nn=["onBlur","onKeydown"],_n={key:1,"data-testid":"rancher-ai-ui-chat-history-item-name",class:"history-chat-name"};var Bn=(0,n.defineComponent)({__name:"History",props:{chats:{type:Array,default:()=>[]},activeChatId:{type:String,default:null},open:{type:Boolean,default:!1}},emits:["close:panel","create:chat","open:chat","update:chat","delete:chat"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=(0,nn.E)(),c=e,r=t,d=(0,n.reactive)({}),u=(0,n.ref)(null);function m(e){let t="";return e.createdAt&&(t=new Date(e.createdAt).toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})),s("ai.history.chat.items.nameTooltip",{name:e.name,createdAt:t},!0)}function p(){r("create:chat")}function g(e){u.value||r("open:chat",e)}function h(e){i.modal.open(fn["default"],{props:{name:e.name,onConfirm:()=>r("delete:chat",e.id)},width:"400px"})}function v(e){u.value={...e},(0,n.nextTick)(()=>{const e=document.getElementById("history-chat-name-edit-input");e?.focus()})}function f(e){const t=u.value?.id,a=u.value?.name?.trim();t&&a&&e.name!==a&&(e.name=a,r("update:chat",{id:t,payload:{name:a}})),b()}function b(){u.value=null}return(e,t)=>{const a=(0,n.resolveDirective)("clean-tooltip"),o=(0,n.resolveDirective)("clean-html");return(0,n.openBlock)(),(0,n.createBlock)(n.Transition,{name:"slide-in"},{default:(0,n.withCtx)(()=>[c.open?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"history-panel-overlay","data-testid":"rancher-ai-ui-chat-history-panel-overlay",onClick:t[3]||(t[3]=(0,n.withModifiers)(e=>r("close:panel"),["self"]))},[(0,n.createElementVNode)("div",bn,[(0,n.createElementVNode)("div",yn,[(0,n.createVNode)(un,{"onToggle:history":t[0]||(t[0]=e=>r("close:panel"))})]),(0,n.createElementVNode)("div",xn,[(0,n.createVNode)(V.A,{ref:"createBtn",primary:"",class:"btn-create-chat","data-testid":"rancher-ai-ui-chat-history-create-chat-button",onClick:p,onKeydown:[(0,n.withKeys)((0,n.withModifiers)(p,["stop"]),["enter"]),(0,n.withKeys)((0,n.withModifiers)(p,["stop"]),["space","enter"])]},{default:(0,n.withCtx)(()=>[t[4]||(t[4]=(0,n.createElementVNode)("i",{class:"icon icon-plus"},null,-1)),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(s)("ai.history.chat.create")),1)]),_:1,__:[4]},8,["onKeydown"]),c.chats.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",kn,[(0,n.createElementVNode)("div",wn,[(0,n.createElementVNode)("span",Cn,(0,n.toDisplayString)((0,n.unref)(s)("ai.history.chat.previous")),1)]),(0,n.createElementVNode)("div",En,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(c.chats,(e,s)=>((0,n.openBlock)(),(0,n.createBlock)(V.A,{key:e.id,tertiary:"",class:(0,n.normalizeClass)(["history-chat-item",{focused:c.activeChatId===e.id||u.value?.id===e.id}]),"data-testid":`rancher-ai-ui-chat-history-chat-item-${s}`,onClick:t=>g(e.id),onKeydown:[(0,n.withKeys)((0,n.withModifiers)(t=>g(e.id),["stop"]),["enter"]),(0,n.withKeys)((0,n.withModifiers)(t=>g(e.id),["stop"]),["space","enter"])],onMouseover:t=>d[e.id]=!0,onMouseleave:t=>d[e.id]=!1},{default:(0,n.withCtx)(()=>[u.value?.id===e.id?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("input",{key:0,id:"history-chat-name-edit-input","onUpdate:modelValue":t[1]||(t[1]=e=>u.value.name=e),"data-testid":"rancher-ai-ui-chat-history-item-name-input",class:"history-chat-name-edit",type:"text",maxlength:64,autocomplete:"off",onBlur:t=>f(e),onKeydown:[(0,n.withKeys)((0,n.withModifiers)(t=>f(e),["stop","prevent"]),["enter"]),(0,n.withKeys)((0,n.withModifiers)(b,["stop","prevent"]),["esc"])]},null,40,Nn)),[[n.vModelText,u.value.name]]):(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",_n,null,512)),[[a,m(e)],[o,e.name]]),d[e.id]?((0,n.openBlock)(),(0,n.createBlock)(vn,{key:2,onClick:t[2]||(t[2]=(0,n.withModifiers)(()=>{},["stop"])),"onUpdate:chat":t=>v(e),"onDelete:chat":t=>h(e)},null,8,["onUpdate:chat","onDelete:chat"])):(0,n.createCommentVNode)("",!0)]),_:2},1032,["class","data-testid","onClick","onKeydown","onMouseover","onMouseleave"]))),128))])])):(0,n.createCommentVNode)("",!0)])])])):(0,n.createCommentVNode)("",!0)]),_:1})}}});a(26321);const Vn=(0,U.A)(Bn,[["__scopeId","data-v-da1ad2b6"]]);var An=Vn;const Mn={class:"chat-container","data-testid":"rancher-ai-ui-chat-container"},Sn=["data-testid"],Dn="default";var Tn=(0,n.defineComponent)({__name:"Chat",setup(e){const t=(0,o.Pj)(),{aiAgentDeploymentState:a,llmConfig:l,error:r}=E(),{agents:u,agentName:m,selectAgent:p}=B(Dn),{messages:g,onopen:h,onmessage:b,onclose:y,sendMessage:x,updateMessage:w,confirmMessage:C,downloadMessages:N,loadMessages:V,selectContext:A,resetErrors:M,isChatInitialized:S,phase:D,error:T}=v(Dn,u,m,p),{fetchChats:I,fetchMessages:$,updateChat:z,deleteChat:P}=_(u),{ws:L,connect:j,disconnect:R,setPhase:U,phase:O,error:K}=c({onopen:h,onmessage:b,onclose:y}),{context:W}=d(),{resize:X,close:G,restore:H}=k(),Y=(0,n.ref)(!1),q=(0,n.ref)([]),Z=(0,n.computed)(()=>t.getters["rancher-ai-ui/chat/metadata"]||{}),Q=(0,n.computed)(()=>u.value.map(e=>{const t=Z.value.agents?.find(t=>t.name===e?.name);return{...e,status:t&&t.status!==i.ZD.Active||e.status!==i.ZD.Ready?i.ZD.Error:i.ZD.Active}})),ee=(0,n.computed)(()=>r.value?[r.value]:[K.value,T.value].filter(e=>e)),te=(0,n.computed)(()=>a.value!==i.v.Active||ee.value.length>0||D.value===i.N$.AwaitingConfirmation);function ae(){M(),G()}async function ne(){te.value||(Y.value||(q.value=await I()),Y.value=!Y.value)}async function oe(e){const{id:t,payload:a}=e;await z(t,a),q.value=await I()}async function se(e){await P(e),e===Z.value.chatId?ie(null):q.value=await I()}async function ie(e){if(Y.value=!1,e&&e===Z.value.chatId)return;M();const a=async()=>{V(e?await $(e):[]),(0,n.nextTick)(()=>{t.commit("rancher-ai-ui/chat/setMetadata",{chatId:e}),j(e)})};if(L.value&&L.value.readyState===WebSocket.OPEN){const e=(0,n.watch)(()=>L.value,async t=>{t||(await a(),e())});R(i.Ah.Idle)}else await a()}function ce(e){if(L.value&&L.value.readyState===WebSocket.OPEN)x(e,L.value);else{M(),U(i.Ah.Reconnecting);const t=(0,n.watch)(()=>L.value,a=>{a&&a.readyState===WebSocket.OPEN&&(x(e,L.value),t())});j(Z.value.chatId)}}function le(){t.state.$router.push({name:`c-cluster-settings-${s.PRODUCT_NAME}`,params:{cluster:t.state.$route.params.cluster||"local"}})}function re(){f.A.isOpen(t)||S.value||R(),H()}return(0,n.watch)(()=>a.value,(e,a)=>{const{chatId:n=null,storageType:o=i.eL.InMemory}=Z.value;a!==i.v.Active&&e===i.v.Active&&(M(),j(o===i.eL.InMemory?null:n)),a===i.v.Active&&e!==i.v.Active&&(Y.value=!1,o===i.eL.InMemory&&t.commit("rancher-ai-ui/chat/setMetadata",{chatId:"",agents:null,storageType:null}),R()),e&&e!==i.v.NotFound?e!==i.v.Active&&U(a&&a!==i.v.NotFound?i.Ah.Reconnecting:i.Ah.Connecting):U(i.Ah.Disconnected)}),(0,n.onMounted)(()=>{window.addEventListener("beforeunload",re)}),(0,n.onBeforeUnmount)(()=>{re(),window.removeEventListener("beforeunload",re)}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Mn,[(0,n.createElementVNode)("div",{class:"resize-bar",onMousedown:t[0]||(t[0]=(0,n.withModifiers)((...e)=>(0,n.unref)(X)&&(0,n.unref)(X)(...e),["prevent","stop"])),onTouchstart:t[1]||(t[1]=(0,n.withModifiers)((...e)=>(0,n.unref)(X)&&(0,n.unref)(X)(...e),["prevent","stop"]))},null,32),(0,n.createElementVNode)("div",{class:"chat-panel","data-testid":"rancher-ai-ui-chat-panel-"+((0,n.unref)(S)&&1===(0,n.unref)(L)?.readyState?"ready":"not-ready")},[(0,n.createVNode)(F,{disabled:te.value,"onClose:chat":ae,"onConfig:chat":le,"onDownload:chat":(0,n.unref)(N),"onToggle:history":ne},null,8,["disabled","onDownload:chat"]),(0,n.createVNode)(ca,{"active-chat-id":Z.value.chatId,messages:(0,n.unref)(g),errors:ee.value,disabled:ee.value?.length>0||!(0,n.unref)(S)||(0,n.unref)(a)!==(0,n.unref)(i.v).Active,"message-phase":(0,n.unref)(D),"onUpdate:message":(0,n.unref)(w),"onConfirm:message":t[2]||(t[2]=e=>(0,n.unref)(C)(e,(0,n.unref)(L))),"onSend:message":t[3]||(t[3]=e=>(0,n.unref)(x)(e,(0,n.unref)(L)))},null,8,["active-chat-id","messages","errors","disabled","message-phase","onUpdate:message"]),(0,n.createVNode)(J,{class:"connection-processing-label text-label",phase:(0,n.unref)(O),"show-progress":![(0,n.unref)(i.Ah).Connected,(0,n.unref)(i.Ah).Disconnected,(0,n.unref)(i.Ah).ConnectionClosed].includes((0,n.unref)(O))},null,8,["phase","show-progress"]),(0,n.createVNode)(fa,{value:(0,n.unref)(W),disabled:te.value,onSelect:(0,n.unref)(A)},null,8,["value","disabled","onSelect"]),(0,n.createVNode)(an,{"llm-config":(0,n.unref)(l),agents:Q.value,"agent-name":(0,n.unref)(m),disabled:te.value,"onInput:content":t[4]||(t[4]=e=>ce(e)),"onSelect:agent":(0,n.unref)(p)},null,8,["llm-config","agents","agent-name","disabled","onSelect:agent"]),(0,n.createVNode)(An,{chats:q.value,"active-chat-id":Z.value.chatId,open:Y.value&&!te.value,"onClose:panel":t[5]||(t[5]=e=>Y.value=!1),"onCreate:chat":t[6]||(t[6]=e=>ie(null)),"onOpen:chat":ie,"onUpdate:chat":oe,"onDelete:chat":se},null,8,["chats","active-chat-id","open"])],8,Sn)]))}});a(19206);const In=(0,U.A)(Tn,[["__scopeId","data-v-efcad322"]]);var $n=In},83832:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".rc-button-label[data-v-66198d4c]{word-break:break-word;white-space:pre-line;list-style-position:inside}.link[data-v-66198d4c]{cursor:pointer}",""]),t["default"]=c},84436:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".scroll-button-btn[data-v-5ac99e1f]{width:20px;height:20px;min-height:0;padding:0;border:1px solid #9fabc6;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;background:var(--body-bg);color:var(--body-text);cursor:pointer;outline:none}.scroll-button-btn[data-v-5ac99e1f]:focus,.scroll-button-btn[data-v-5ac99e1f]:hover{transform:translateY(-1px)}.scroll-button-btn[data-v-5ac99e1f]:active{transform:translateY(0)}.scroll-button[data-v-5ac99e1f]{pointer-events:auto}",""]),t["default"]=c},89524:function(e,t,a){var n=a(84436);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("6555be10",n,!0,{sourceMap:!1,shadowMode:!1})},91188:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".chat-header[data-v-309031dc]{background:var(--active-nav);color:var(--on-active);padding:12px;display:flex;align-items:center;gap:16px}.chat-title[data-v-309031dc]{display:flex;flex-direction:row;align-items:baseline;min-width:0;flex:1}.chat-title .chat-name[data-v-309031dc]{display:flex;gap:8px;align-items:center;font-weight:600;font-size:1em;color:var(--on-active);margin:0;width:60px}.chat-title .chat-name .label[data-v-309031dc]{font-size:1.3em}.chat-close-btn[data-v-309031dc],.chat-history-btn[data-v-309031dc]{background:transparent;border:none;cursor:pointer;border-radius:8px;transition:background .2s}.chat-close-btn .btn-close[data-v-309031dc],.chat-history-btn .btn-close[data-v-309031dc]{margin:0 8px}.chat-history-btn.disabled[data-v-309031dc]{opacity:1;pointer-events:none}.chat-close-btn[data-v-309031dc]:hover,.chat-history-btn[data-v-309031dc]:hover{background:var(--active-hover)}.btn-close[data-v-309031dc],.btn-open-history[data-v-309031dc]{margin:0!important}.icon[data-v-309031dc]{width:32px}",""]),t["default"]=c},92908:function(e,t,a){var n=a(37324);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("501b4838",n,!0,{sourceMap:!1,shadowMode:!1})},92914:function(e,t,a){var n=a(25746);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("7177c033",n,!0,{sourceMap:!1,shadowMode:!1})},94514:function(e,t,a){"use strict";a.r(t);var n=a(36758),o=a.n(n),s=a(40935),i=a.n(s),c=i()(o());c.push([e.id,".chat-console[data-v-45913364]{padding:0 16px 16px 16px;gap:.75rem}.chat-console[data-v-45913364],.chat-input-wrapper[data-v-45913364]{display:flex;flex-direction:column;height:auto}.chat-input-wrapper[data-v-45913364]{border:1px solid var(--border);border-radius:8px;background-color:var(--input-bg);transition:border-color .2s;min-height:-moz-min-content;min-height:min-content}.chat-input-wrapper.focused[data-v-45913364]{border:solid 1px var(--active-nav)}.chat-input-wrapper.disabled[data-v-45913364]{background-color:var(--disabled-bg)}.chat-input[data-v-45913364]{display:block;border:none;background:transparent;padding:12px 16px 0 16px;font-size:1rem;outline:none;color:var(--input-text);width:100%;resize:none;min-height:36px;max-height:200px;line-height:1.4;box-sizing:border-box}.chat-input-actions[data-v-45913364]{display:flex;justify-content:flex-end;align-items:center;gap:8px;padding:8px;min-height:36px}.chat-input-send .send-button[data-v-45913364]{height:32px;width:32px;min-width:32px;min-height:32px;padding:0;display:flex;align-items:center;justify-content:center;background-color:var(--accent-btn);color:var(--active-nav);border-radius:4px;border:none}.chat-input-send .send-button[data-v-45913364]:disabled{background-color:transparent;color:var(--primary)}.chat-input-send .send-button[data-v-45913364]:hover:not(:disabled){background-color:#c6dcff}.chat-console-row[data-v-45913364]{display:flex;align-items:center;gap:8px}.chat-console-chat-text-info[data-v-45913364]{font-family:Lato;font-size:12px;font-style:normal;font-weight:400;line-height:normal;justify-content:flex-start}",""]),t["default"]=c},94686:function(e,t,a){var n=a(1022);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("72eec44b",n,!0,{sourceMap:!1,shadowMode:!1})},97785:function(e,t,a){var n=a(76761);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("f0cd7406",n,!0,{sourceMap:!1,shadowMode:!1})},99832:function(e,t,a){var n=a(64312);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(74825).A;o("1ef591b2",n,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=rancher-ai-ui-0.1.29.umd.min.826.js.map