(("undefined"!==typeof self?self:this)["webpackChunkrancher_ai_ui_0_1_21"]=("undefined"!==typeof self?self:this)["webpackChunkrancher_ai_ui_0_1_21"]||[]).push([[442],{30:function(e,t,a){var n=a(1438);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("8f2adef6",n,!0,{sourceMap:!1,shadowMode:!1})},48:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".chat-container[data-v-f33e43aa]{display:flex;flex-direction:row;height:calc(100vh - 55px);position:relative;z-index:20}.chat-panel[data-v-f33e43aa]{width:100%;background:var(--box-bg);display:flex;flex-direction:column;margin:0 auto;font-family:Inter,Arial,sans-serif}.resize-bar[data-v-f33e43aa]{position:absolute;top:0;left:0;width:4px;height:100%;cursor:ew-resize;background:transparent;transition:background .2s;z-index:20;opacity:0}.resize-bar[data-v-f33e43aa]:hover{background:var(--primary);opacity:1}",""]),t["default"]=c},271:function(e,t,a){var n=a(860);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("2b8389da",n,!0,{sourceMap:!1,shadowMode:!1})},382:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".history-panel-overlay[data-v-0087f090]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:200;display:flex;align-items:stretch}.history-panel[data-v-0087f090]{width:min(75%,100vw);max-width:90vw;height:100vh;background:var(--body-bg);opacity:.95;box-shadow:2px 0 8px rgba(0,0,0,.08);display:flex;flex-direction:column}.history-header[data-v-0087f090]{height:54px}.history-body[data-v-0087f090]{padding:16px;overflow:hidden}.history-chat-list[data-v-0087f090]{display:flex;flex-direction:column;gap:4px;overflow-y:auto;max-height:calc(100vh - 250px);padding-bottom:8px}.history-chat-item[data-v-0087f090]{display:flex;flex-direction:row;justify-content:space-between;gap:16px;padding:0 16px;flex-shrink:0}.history-chat-title-label[data-v-0087f090]{font-family:Lato;font-size:16px;font-style:normal;font-weight:600;line-height:24px;display:block;margin-bottom:12px}.btn-create-chat[data-v-0087f090]{display:flex;flex-direction:row;justify-content:center;width:100%;margin:16px 0 28px 0}.history-chat-name[data-v-0087f090]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%;display:block}.history-chat-name-edit[data-v-0087f090]{padding:2px;border-radius:4px;border:1px solid var(--border)}.slide-in-enter-active[data-v-0087f090],.slide-in-leave-active[data-v-0087f090]{transition:all .3s cubic-bezier(.4,0,.2,1)}.slide-in-enter-from[data-v-0087f090],.slide-in-leave-to[data-v-0087f090]{transform:translateX(-100%)}",""]),t["default"]=c},391:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".chat-console[data-v-cc231536]{padding:16px;gap:.75rem;border-top:1px solid var(--border)}.chat-console[data-v-cc231536],.chat-input-wrapper[data-v-cc231536]{display:flex;flex-direction:column;height:auto}.chat-input-wrapper[data-v-cc231536]{border:1px solid var(--border);border-radius:8px;background-color:var(--input-bg);transition:border-color .2s;min-height:-moz-min-content;min-height:min-content}.chat-input-wrapper.focused[data-v-cc231536]{border:solid 1px var(--active-nav)}.chat-input-wrapper.disabled[data-v-cc231536]{background-color:var(--disabled-bg)}.chat-input[data-v-cc231536]{display:block;border:none;background:transparent;padding:12px 16px 0 16px;font-size:1rem;outline:none;color:var(--input-text);width:100%;resize:none;min-height:36px;max-height:200px;line-height:1.4;box-sizing:border-box}.chat-input-actions[data-v-cc231536]{display:flex;justify-content:flex-end;align-items:center;gap:8px;padding:8px;min-height:36px}.chat-input-send .send-button[data-v-cc231536]{height:32px;width:32px;min-width:32px;min-height:32px;padding:0;display:flex;align-items:center;justify-content:center;background-color:var(--accent-btn);color:var(--active-nav);border-radius:4px;border:none}.chat-input-send .send-button[data-v-cc231536]:disabled{background-color:transparent;color:var(--primary)}.chat-input-send .send-button[data-v-cc231536]:hover:not(:disabled){background-color:#c6dcff}.chat-console-row[data-v-cc231536]{display:flex;align-items:center;gap:8px}.chat-console-chat-text-info[data-v-cc231536]{justify-content:center}",""]),t["default"]=c},527:function(e,t,a){var n=a(7324);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("501b4838",n,!0,{sourceMap:!1,shadowMode:!1})},701:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".processing-message .dots[data-v-90034db0]{display:inline-flex;width:12px}",""]),t["default"]=c},789:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".user-msg-avatar[data-v-2d4aa4a2]{width:32px;height:32px;border-radius:50%;background:var(--body-bg);border:1px solid var(--border);color:var(--primary);display:flex;align-items:center;justify-content:center;flex-shrink:0}.round-avatar[data-v-2d4aa4a2]{border:0;border-radius:50%}",""]),t["default"]=c},794:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".prompt-remove.card-container[data-v-47df35ec]{box-shadow:none}.prompt-remove #confirm[data-v-47df35ec]{width:90%;margin-left:3px}.prompt-remove .actions[data-v-47df35ec]{text-align:right}.bg-error[data-v-47df35ec]{background-color:var(--error)}",""]),t["default"]=c},860:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".tag[data-v-1dd3e5a3]{display:flex;flex-direction:row;gap:8px;height:24px;line-height:1;margin-right:5px;margin-left:0;padding:0 8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;border-radius:4px}.tag .tag-content[data-v-1dd3e5a3]{display:flex;justify-content:center;gap:5px}.tag .vs__deselect[data-v-1dd3e5a3]{margin:0}.vs__selected[data-v-1dd3e5a3]{border:solid 1px var(--active-nav);color:var(--active-nav)}.user-context[data-v-1dd3e5a3]{background-color:transparent;color:#9fabc6;height:16px;font-size:.75rem;border:1px solid #9fabc6;border-radius:4px;margin:0;cursor:default;word-break:break-word;white-space:pre-line}",""]),t["default"]=c},884:function(e,t,a){var n=a(2724);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("446b20bd",n,!0,{sourceMap:!1,shadowMode:!1})},979:function(e,t,a){var n=a(6499);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("0966a96a",n,!0,{sourceMap:!1,shadowMode:!1})},1075:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".chat-system-suggestion-message[data-v-47139b43]{display:flex;gap:8px}.chat-system-suggestion-msg-bubble[data-v-47139b43]{position:relative;background:var(--body-bg);color:var(--body-text);border:1px solid var(--border);border-radius:12px;box-shadow:0 2px 8px 0 rgba(0,0,0,.04);padding:12px;line-height:21px;display:flex;flex-direction:column;gap:6px}.chat-system-suggestion-msg-bubble:hover .chat-system-suggestion-msg-bubble-actions[data-v-47139b43]{opacity:1;pointer-events:auto}.chat-system-suggestion-msg-text[data-v-47139b43],[data-v-47139b43]  pre{word-break:break-word;white-space:pre-line;list-style-position:inside}.chat-system-suggestion-msg-text[data-v-47139b43] code{padding:initial;border:initial;border-radius:initial;background-color:transparent;color:#025937}.chat-system-suggestion-msg-text[data-v-47139b43] ul{white-space:normal;margin:0;padding-left:1rem}.chat-system-suggestion-msg-text[data-v-47139b43] th{text-align:left}.chat-system-suggestion-msg-text[data-v-47139b43] pre{margin:0}.theme-dark .chat-system-suggestion-msg-text[data-v-47139b43] code{color:#c0efde}.chat-system-suggestion-actions[data-v-47139b43]{display:flex;flex-direction:row;gap:8px;margin-top:16px}.chat-system-suggestion-actions .chat-system-suggestion-actions-buttons[data-v-47139b43]{display:flex;width:100%;gap:4px;flex-wrap:wrap;justify-content:space-between}.chat-system-suggestion-actions-result[data-v-47139b43]{display:flex;flex-direction:row;align-items:center;gap:4px;height:30px;margin-left:auto}.chat-system-suggestion-actions-result.status-confirmed .icon[data-v-47139b43]{color:var(--success)}.chat-system-suggestion-actions-result.status-canceled .icon[data-v-47139b43]{color:var(--error)}",""]),t["default"]=c},1160:function(e,t,a){var n=a(3832);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("54d56375",n,!0,{sourceMap:!1,shadowMode:!1})},1438:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".disabled{opacity:.5;pointer-events:none}",""]),t["default"]=c},1507:function(e,t,a){var n=a(5811);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("1c5fae04",n,!0,{sourceMap:!1,shadowMode:!1})},1755:function(e,t,a){var n=a(9483);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("03573016",n,!0,{sourceMap:!1,shadowMode:!1})},1821:function(e,t,a){var n=a(701);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("f0806326",n,!0,{sourceMap:!1,shadowMode:!1})},1846:function(e,t,a){var n=a(3910);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("76a422a1",n,!0,{sourceMap:!1,shadowMode:!1})},1886:function(e,t,a){var n=a(382);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("056fd01a",n,!0,{sourceMap:!1,shadowMode:!1})},2176:function(e,t,a){var n=a(48);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("ec51571e",n,!0,{sourceMap:!1,shadowMode:!1})},2395:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".agent-selector-container[data-v-f027a0b2]{align-items:center;cursor:pointer;gap:4px;color:var(--active-nav);font-weight:500}.agent-selector-container[data-v-f027a0b2],.agent-selector-container .agent-dropdown[data-v-f027a0b2]{min-width:0;max-width:100%}.agent-selector-container .agent-trigger[data-v-f027a0b2]{display:flex!important;min-width:0!important;max-width:100%!important;overflow:hidden}.chevron-icon[data-v-f027a0b2]{font-size:12px;transition:transform .2s ease;color:var(--active-nav)}.chevron-icon.is-open[data-v-f027a0b2]{transform:rotate(180deg)}.agent-label[data-v-f027a0b2]{display:flex;justify-content:space-between;align-items:center}.agent-label .icon[data-v-f027a0b2]{color:var(--active-nav)}.agent-label .icon.hidden[data-v-f027a0b2]{visibility:hidden}.selected-agent-name[data-v-f027a0b2]{margin:0 4px;flex:1;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}",""]),t["default"]=c},2516:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".chat-welcome-message[data-v-015d8cf2]{gap:12px;margin-top:auto}.chat-welcome-message[data-v-015d8cf2],.chat-welcome-msg-splash[data-v-015d8cf2]{display:flex;flex-direction:column;align-items:center}.chat-welcome-msg-splash[data-v-015d8cf2]{justify-content:center;width:100%;gap:16px;margin-bottom:24px}.chat-welcome-msg-avatar-panel[data-v-015d8cf2]{display:grid;place-items:center;position:relative;width:100%;max-width:250px;min-width:150px}.chat-welcome-msg-greeting[data-v-015d8cf2]{position:relative;background-color:transparent;width:100%;height:104px;grid-area:1/1;z-index:20}.chat-welcome-msg-avatar-circle[data-v-015d8cf2]{grid-area:1/1;width:75%;z-index:10;position:absolute;display:flex;align-items:center;justify-content:center;width:104px;height:104px;position:relative;background:var(--body-bg);color:var(--body-text);border:1px solid var(--border);border-radius:90px;box-shadow:0 2px 8px 0 rgba(0,0,0,.04)}.chat-welcome-msg-greeting-bubble[data-v-015d8cf2]{position:absolute;top:0;right:0;padding:8px 12px;border-radius:8px;border:1px solid var(--border);background:#35b777;color:var(--body-text);white-space:nowrap;pointer-events:none;transform-origin:right center}.chat-welcome-msg-text-panel[data-v-015d8cf2]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;text-align:center;font-family:Lato;font-size:18px;font-style:normal;font-weight:600;line-height:28px}.chat-welcome-msg-bubble[data-v-015d8cf2]{position:relative;background:var(--body-bg);color:var(--body-text);border:1px solid var(--border);border-radius:12px;box-shadow:0 2px 8px 0 rgba(0,0,0,.04);padding:12px;display:flex;flex-direction:column;gap:6px;width:100%;line-height:21px}.chat-welcome-msg-text[data-v-015d8cf2],[data-v-015d8cf2]  pre{word-break:break-word;white-space:pre-line;list-style-position:inside}",""]),t["default"]=c},2704:function(e,t,a){var n=a(8800);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("2b1c5de0",n,!0,{sourceMap:!1,shadowMode:!1})},2724:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".history-chat-menu-dropdown-item[data-v-1e539b81]{height:32px}",""]),t["default"]=c},2773:function(e,t,a){var n=a(789);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("6b08468e",n,!0,{sourceMap:!1,shadowMode:!1})},2914:function(e,t,a){var n=a(5746);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("7177c033",n,!0,{sourceMap:!1,shadowMode:!1})},3188:function(e,t,a){var n=a(4948);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("5a324ef2",n,!0,{sourceMap:!1,shadowMode:!1})},3792:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".textlabel-popper[data-v-1969617f]  .v-popper__popper{display:flex;align-items:center;justify-content:center;border:none}.textlabel-popper[data-v-1969617f]  .v-popper__inner{padding:16px!important;border:1.5px solid var(--border)}.textlabel-popper[data-v-1969617f]  .v-popper__wrapper{width:95%}.v-popper .btn[data-v-1969617f]{height:10px;min-height:0;line-height:1;background-color:transparent}.inline-button[data-v-1969617f]{-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap;margin-bottom:2px}.inline-button[data-v-1969617f]:not(.btn-disabled){cursor:pointer;text-decoration:underline}",""]),t["default"]=c},3832:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".rc-button-label[data-v-66198d4c]{word-break:break-word;white-space:pre-line;list-style-position:inside}.link[data-v-66198d4c]{cursor:pointer}",""]),t["default"]=c},3910:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".suggestions-header[data-v-f038e55a]{margin-bottom:8px;font-weight:600}.suggestions-list[data-v-f038e55a]{padding:0;margin:0;padding-left:24px}.suggestion-item[data-v-f038e55a],.suggestions-list li[data-v-f038e55a]{padding:0;margin:0}.rc-button-label[data-v-f038e55a]{word-break:break-word;white-space:pre-line;list-style-position:inside}",""]),t["default"]=c},4436:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".scroll-button-btn[data-v-5ac99e1f]{width:20px;height:20px;min-height:0;padding:0;border:1px solid #9fabc6;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;background:var(--body-bg);color:var(--body-text);cursor:pointer;outline:none}.scroll-button-btn[data-v-5ac99e1f]:focus,.scroll-button-btn[data-v-5ac99e1f]:hover{transform:translateY(-1px)}.scroll-button-btn[data-v-5ac99e1f]:active{transform:translateY(0)}.scroll-button[data-v-5ac99e1f]{pointer-events:auto}",""]),t["default"]=c},4768:function(e,t,a){var n=a(1075);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("add8307e",n,!0,{sourceMap:!1,shadowMode:!1})},4948:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".system-msg-avatar[data-v-7bae8fb7]{width:32px;height:32px;border-radius:50%;background:var(--body-bg);border:1px solid var(--border);color:#22c55e;display:flex;align-items:center;justify-content:center;flex-shrink:0}",""]),t["default"]=c},5372:function(e,t,a){var n=a(5644);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("519d1376",n,!0,{sourceMap:!1,shadowMode:!1})},5644:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".chat-msg-source-label[data-v-126ae1ea]{display:flex;align-items:center;gap:8px;color:#9fabc6}.chat-msg-source-label span[data-v-126ae1ea]{font:9px sans-serif;font-weight:500}.chat-msg-source-tags[data-v-126ae1ea]{display:flex;gap:4px;flex-wrap:wrap;margin-top:8px}.chat-msg-source-tag[data-v-126ae1ea]{height:auto;color:#9fabc6;border-radius:8px;padding:2px 8px;font-size:.75rem;border:1px solid #9fabc6;cursor:pointer}.sr-only[data-v-126ae1ea]{visibility:hidden}",""]),t["default"]=c},5746:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".chat-msg-action-title[data-v-061588ed]{display:flex;align-items:center;gap:4px;color:var(--on-secondary)}.chat-msg-action-title span[data-v-061588ed]{font:9px sans-serif;font-weight:500}.chat-msg-actions-container[data-v-061588ed]{display:flex;flex-direction:column;gap:8px}.chat-msg-action-tags[data-v-061588ed]{display:flex;gap:4px;flex-wrap:wrap;margin-top:4px}.chat-msg-actions[data-v-061588ed]{display:flex;gap:6px;flex-wrap:wrap;margin-top:2px}.chat-msg-actions-more[data-v-061588ed]{color:#94a3b8;cursor:pointer}",""]),t["default"]=c},5811:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".chat-header[data-v-ae0338f0]{background:var(--active-nav);color:var(--on-active);padding:12px;display:flex;align-items:center;gap:16px}.chat-title[data-v-ae0338f0]{display:flex;flex-direction:row;align-items:baseline;min-width:0;flex:1}.chat-title .chat-name[data-v-ae0338f0]{display:flex;gap:8px;align-items:center;font-weight:600;font-size:1em;color:var(--on-active);margin:0;width:60px}.chat-title .chat-name .label[data-v-ae0338f0]{font-size:1.3em}.chat-close-btn[data-v-ae0338f0],.chat-history-btn[data-v-ae0338f0]{background:transparent;border:none;cursor:pointer;border-radius:8px;transition:background .2s}.chat-close-btn .btn-close[data-v-ae0338f0],.chat-history-btn .btn-close[data-v-ae0338f0]{margin:0 8px}.chat-history-btn.disabled[data-v-ae0338f0]{opacity:1;pointer-events:none}.chat-close-btn[data-v-ae0338f0]:hover,.chat-history-btn[data-v-ae0338f0]:hover{background:var(--active-hover)}.btn-close[data-v-ae0338f0],.btn-open-history[data-v-ae0338f0]{margin:0!important}.icon-close[data-v-ae0338f0],.icon-menu[data-v-ae0338f0]{width:32px}",""]),t["default"]=c},6058:function(e,t,a){var n=a(794);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("731bece8",n,!0,{sourceMap:!1,shadowMode:!1})},6264:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".confirmation-message[data-v-48bab9a2]{margin-bottom:12px}.confirmation-message[data-v-48bab9a2] code{padding:initial;border:initial;border-radius:initial;background-color:transparent;color:#025937}.confirmation-message span[data-v-48bab9a2]{word-break:break-word;white-space:pre-line;list-style-position:inside}.confirmation-buttons[data-v-48bab9a2],.delete-confirmation[data-v-48bab9a2],.standard-confirmation[data-v-48bab9a2]{display:flex;justify-content:flex-end;gap:8px}.confirmation-status .status-canceled[data-v-48bab9a2],.confirmation-status .status-confirmed[data-v-48bab9a2]{display:flex;flex-direction:row;align-items:center;gap:4px;justify-content:flex-end}.confirmation-status .status-confirmed .icon[data-v-48bab9a2]{color:var(--success)}.confirmation-status .status-canceled .icon[data-v-48bab9a2]{color:var(--error)}.rc-button-label[data-v-48bab9a2]{word-break:break-word;white-space:pre-line;list-style-position:inside}",""]),t["default"]=c},6499:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".context-trigger[data-v-6f60d4a9]{display:flex;gap:4px;min-height:24px}.context-trigger-text[data-v-6f60d4a9]{margin:0 4px}.context-select[data-v-6f60d4a9]{display:flex;flex-wrap:wrap;max-width:100%;align-items:center;gap:10px;color:var(--active-nav)}.context-reset[data-v-6f60d4a9]{height:28px}.context-reset .btn[data-v-6f60d4a9]{height:28px;min-height:28px}.no-context[data-v-6f60d4a9]{margin:7px 0 7px 0}.tags[data-v-6f60d4a9]{display:flex;flex-wrap:wrap;max-width:100%;align-items:center;gap:8px}.icon-pin-outlined[data-v-6f60d4a9],.tags[data-v-6f60d4a9]{color:var(--active-nav)}",""]),t["default"]=c},6563:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".chat-messages[data-v-34a5ab89]{flex:1;overflow-y:auto;padding:16px 12px;display:flex;flex-direction:column;gap:16px}.chat-message-template-welcome[data-v-34a5ab89]{margin-bottom:16px}.chat-message-fast-scroll[data-v-34a5ab89]{position:sticky;bottom:0;margin-left:auto}.chat-message-processing-label[data-v-34a5ab89]{color:#9fabc6;font-family:Inter,Arial,sans-serif;font-size:.875rem;font-weight:500;margin:0}.chat-message-processing-label.sticky-bottom[data-v-34a5ab89]{margin-top:auto}",""]),t["default"]=c},6776:function(e,t,a){var n=a(6264);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("d2c74dee",n,!0,{sourceMap:!1,shadowMode:!1})},6827:function(e,t,a){var n=a(2395);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("f0313960",n,!0,{sourceMap:!1,shadowMode:!1})},7324:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".disclaimer[data-v-b04f1c04],.disclaimer-section[data-v-b04f1c04]{display:flex;flex-direction:column}.disclaimer[data-v-b04f1c04]{gap:16px}.disclaimer-section[data-v-b04f1c04]{gap:8px}.disclaimer-section-title[data-v-b04f1c04]{font-family:Lato;font-size:16px;font-style:normal;font-weight:600;line-height:24px}.disclaimer-section-body[data-v-b04f1c04]{font-family:Lato;font-size:14px;font-style:normal;font-weight:400;line-height:21px}",""]),t["default"]=c},7380:function(e,t,a){var n=a(2516);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("ba398696",n,!0,{sourceMap:!1,shadowMode:!1})},7475:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var n=a(9274),o=a(5359),s=a(3610),i=a(5180),c=a(1006);const l={class:"text-default-text"},r={class:"mb-10"},d={key:0};var u=(0,n.defineComponent)({__name:"DeleteChatCard",props:{name:{type:String,default:""},onConfirm:{type:Function,required:!0},onClose:{type:Function,default:()=>{}}},emits:["confirm","close"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:u}=(0,s.s)(a),m=e,p=t,g=(0,n.computed)(()=>{const e=m.name;return e?e.length>13?`${e.substring(0,10)}...`:e:""});function h(){m.onConfirm(),p("confirm"),f()}function f(){m.onClose(),p("close")}return(e,t)=>((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(i.Z),{class:"prompt-remove","show-highlight-border":!1},{title:(0,n.withCtx)(()=>[(0,n.createElementVNode)("h4",l,(0,n.toDisplayString)((0,n.unref)(u)("promptRemove.title")),1)]),body:(0,n.withCtx)(()=>[(0,n.createElementVNode)("div",r,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(u)("ai.history.chat.delete.modal.message")),1),m.name?((0,n.openBlock)(),(0,n.createElementBlock)("span",d,[(0,n.createElementVNode)("b",null,(0,n.toDisplayString)(g.value),1)])):(0,n.createCommentVNode)("",!0),t[0]||(t[0]=(0,n.createElementVNode)("br",null,null,-1)),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(u)("ai.history.chat.delete.modal.warning")),1)])]),actions:(0,n.withCtx)(()=>[(0,n.createElementVNode)("button",{class:"btn role-secondary",onClick:f},(0,n.toDisplayString)((0,n.unref)(u)("ai.history.chat.delete.modal.cancel")),1),t[1]||(t[1]=(0,n.createElementVNode)("div",{class:"spacer"},null,-1)),(0,n.createVNode)(c.A,{class:"btn bg-error ml-10","data-testid":"prompt-remove-confirm-button",onClick:h},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(u)("ai.history.chat.delete.modal.confirm")),1)]),_:1})]),_:1}))}}),m=(a(6058),a(7433));const p=(0,m.A)(u,[["__scopeId","data-v-47df35ec"]]);var g=p},7648:function(e,t,a){var n=a(3792);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("7ea76ce5",n,!0,{sourceMap:!1,shadowMode:!1})},8792:function(e,t,a){var n=a(9256);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("480aa0c5",n,!0,{sourceMap:!1,shadowMode:!1})},8800:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".llm-model-label[data-v-3c3c8e2c]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0;font-size:12px}",""]),t["default"]=c},8930:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".chat-header[data-v-c4a8a7f4]{background:#a7bff1;color:#3c57a3;padding:12px;display:flex;align-items:center;gap:16px}.theme-dark .chat-header[data-v-c4a8a7f4]{color:#fff;background:var(--category-active,var(--nav-active))}.theme-dark .chat-header .chat-history-btn[data-v-c4a8a7f4]:hover{background:color-mix(in srgb,var(--category-active,var(--nav-active)) 80%,#fff)}.chat-title[data-v-c4a8a7f4]{display:flex;flex-direction:row;align-items:baseline;min-width:0;flex:1}.chat-title .chat-name[data-v-c4a8a7f4]{display:flex;gap:8px;align-items:center;font-weight:600;font-size:1em;margin:0;width:60px}.chat-title .chat-name .label[data-v-c4a8a7f4]{font-size:1.3em}.chat-history-btn[data-v-c4a8a7f4]{background:transparent;border:none;cursor:pointer;border-radius:8px;transition:background .2s}.chat-history-btn.disabled[data-v-c4a8a7f4]{opacity:1;pointer-events:none}.chat-history-btn .btn-close[data-v-c4a8a7f4]{margin:0 8px}.chat-history-btn[data-v-c4a8a7f4]:hover{background:color-mix(in srgb,#a7bff1 80%,#fff)}.btn-close[data-v-c4a8a7f4],.btn-open-history[data-v-c4a8a7f4]{margin:0!important}.icon-close[data-v-c4a8a7f4],.icon-menu[data-v-c4a8a7f4]{width:32px}",""]),t["default"]=c},9123:function(e,t,a){var n=a(6563);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("4dee013b",n,!0,{sourceMap:!1,shadowMode:!1})},9234:function(e,t,a){var n=a(8930);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("cbaa329e",n,!0,{sourceMap:!1,shadowMode:!1})},9256:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".chat-context[data-v-5213812e]{border-top:1px solid var(--border);padding:16px 16px;display:flex;align-items:center;gap:8px;font-size:.85rem}",""]),t["default"]=c},9483:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),i=a.n(s),c=i()(o());c.push([e.id,".chat-message[data-v-08b194e0]{display:flex;gap:8px}.chat-msg-content[data-v-08b194e0]{margin-right:40px}.chat-message-user[data-v-08b194e0]{flex-direction:row-reverse}.chat-message-user .chat-msg-content[data-v-08b194e0]{display:flex;flex-direction:column;align-items:flex-end;margin:0}.chat-message-user .chat-msg-text[data-v-08b194e0],.chat-msg-bubble[data-v-08b194e0]{color:var(--body-text)}.chat-msg-bubble[data-v-08b194e0]{position:relative;max-width:455px;background:var(--body-bg);border:1px solid var(--border);border-radius:12px;box-shadow:0 2px 8px 0 rgba(0,0,0,.04);padding:12px;line-height:21px;display:flex;flex-direction:column;gap:6px}.chat-msg-bubble:hover .chat-msg-bubble-actions[data-v-08b194e0]{opacity:1;pointer-events:auto}.chat-msg-bubble-user[data-v-08b194e0]{background:var(--tertiary-hover);align-items:flex-end}.chat-msg-bubble-error[data-v-08b194e0]{background:var(--error-banner-bg);border-color:var(--error);color:var(--error-banner-text,var(--error))}.chat-msg-bubble-actions[data-v-08b194e0]{position:absolute;top:-15px;right:-15px;display:flex;gap:5px;z-index:2;opacity:0;pointer-events:none;transition:opacity .2s}.bubble-action-btn[data-v-08b194e0]{background:var(--body-bg);border:1.5px solid var(--border);border-radius:8px;padding:2px 4px;box-shadow:0 1px 4px 0 rgba(0,0,0,.04);cursor:pointer;transition:border .15s,box-shadow .15s;display:flex;align-items:center;justify-content:center;min-width:24px;min-height:24px;width:24px;height:24px}.bubble-action-btn .icon[data-v-08b194e0]{font-size:14px;width:14px;height:14px}.bubble-action-btn.header-btn[data-v-08b194e0]{padding:2px;min-width:20px;min-height:20px;width:25px;height:25px}.bubble-action-btn.header-btn .icon[data-v-08b194e0]{font-size:12px;width:12px;height:12px}.bubble-action-btn[data-v-08b194e0]:hover{border:solid 1px var(--secondary-border,var(--primary));box-shadow:0 2px 8px 0 rgba(61,152,211,.1)}.chat-msg-text[data-v-08b194e0],[data-v-08b194e0]  pre{word-break:break-word;white-space:pre-line;list-style-position:inside}.chat-msg-text[data-v-08b194e0] code{padding:initial;border:initial;border-radius:initial;background-color:transparent;color:#025937}.chat-msg-text[data-v-08b194e0] ul{white-space:normal;margin:0;padding-left:1rem}.chat-msg-text[data-v-08b194e0] th{text-align:left}.chat-msg-text[data-v-08b194e0] pre{margin:0}.theme-dark .chat-msg-text[data-v-08b194e0] code{color:#c0efde}.chat-msg-section[data-v-08b194e0],.chat-msg-section-footer[data-v-08b194e0]{margin-top:8px}.chat-msg-timestamp[data-v-08b194e0]{font-size:.75rem;color:#94a3b8;margin-top:8px;margin-bottom:8px;align-self:flex-end}.icon-action-source[data-v-08b194e0]{width:16px;height:16px;min-width:16px;min-height:16px;display:inline-block;vertical-align:middle}.inline-button[data-v-08b194e0]{margin-left:auto;height:15px;min-height:15px}.chat-msg-user-expanded[data-v-08b194e0]{display:block;margin-top:16px}.chat-msg-user-expanded[data-v-08b194e0]  ul{padding:0 0 0 8px;margin:0;margin-top:-10px}.chat-msg-user-context-tags[data-v-08b194e0]{display:flex;flex-wrap:wrap;max-width:100%;align-items:center;justify-content:flex-end;gap:4px}.chat-msg-selected-agent[data-v-08b194e0]{margin-bottom:4px}.chat-msg-selected-agent-label[data-v-08b194e0]{color:#bfc1d3;font-family:Lato;font-size:14px;font-style:normal;font-weight:400;line-height:21px}",""]),t["default"]=c},9495:function(e,t,a){var n=a(391);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("f644be7c",n,!0,{sourceMap:!1,shadowMode:!1})},9524:function(e,t,a){var n=a(4436);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("6555be10",n,!0,{sourceMap:!1,shadowMode:!1})},9931:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Vn}});var n=a(9274),o=a(5359),s=a(6977),i=a(6743);function c(e){const t=(0,o.Pj)(),a=(0,n.computed)(()=>t.getters["rancher-ai-ui/connection/ws"]),c=(0,n.ref)(i.Ah.Idle),l=(0,n.computed)(()=>t.getters["rancher-ai-ui/connection/error"]),r=`wss://${window.location.host}/api/v1/namespaces/${s.AGENT_NAMESPACE}/services/http:${s.AGENT_NAME}:80/proxy/${s.AGENT_WS_API_PATH}`;async function d(a){const n=a?`${r}/${a}`:r,{onopen:o,onmessage:s,onclose:i}=e;await t.dispatch("rancher-ai-ui/connection/open",{url:n,onopen:o,onmessage:s,onclose:i||(()=>{t.commit("rancher-ai-ui/connection/setError",{key:"ai.error.websocket.disconnected"})})})}function u(n={showError:!0}){!n||void 0===n.showError||e.onclose||n.showError||(a.value.onclose=null),t.commit("rancher-ai-ui/connection/close")}return{ws:a,phase:c,error:l,connect:d,disconnect:u}}var l=a(3610),r=a(2784),d=a.n(r),u=a(5156);function m(){const e=(0,o.Pj)(),t=(0,n.computed)(()=>e.getters["rancher-ai-ui/context/all"]),a=(0,n.ref)([]);function s(e){a.value=e}return(0,n.onBeforeUnmount)(()=>{e.commit("rancher-ai-ui/context/reset")}),{context:t,selectContext:s,selectedContext:a}}var p=a(7375),g=a(1738),h=a(4364);const f=!1,v="dismissed-agent-recommendation";function b(e,t,a,s){const c=(0,o.Pj)(),{t:r}=(0,l.s)(c),b=c.getters["rancher/byId"](u.k$.PRINCIPAL,c.getters["auth/principalId"])||{},y=(0,n.computed)(()=>Object.values(c.getters["rancher-ai-ui/chat/messages"](e))),x=(0,n.ref)({}),k=(0,n.computed)(()=>c.getters["rancher-ai-ui/chat/error"](e)),w=(0,n.computed)(()=>c.getters["rancher-ai-ui/chat/phase"](e)),C=(0,n.ref)(w.value||i.N$.Initializing),E=d()(e=>{C.value=e},150);(0,n.watch)(w,e=>E(e),{immediate:!0});const N=t=>{c.commit("rancher-ai-ui/chat/setPhase",{chatId:e,phase:t})},{selectContext:_,selectedContext:B}=m();function V(e,t){e&&e.send(t)}function M(e,n){let o=i.Xh.User,s="",c=e,l=B.value;e&&"object"===typeof e&&e.messageContent&&(o=e.role,s=e.summaryContent||"",c=e.messageContent||"",l=e.contextContent||[]),V(n,(0,p.zw)({prompt:c,context:B.value,agent:a.value}));const r={agent:t.value.find(e=>e.name===a.value)||{}};A({role:o,agentMetadata:r,summaryContent:s,messageContent:c,contextContent:l}),N(i.N$.Processing)}async function A(t){return await c.dispatch("rancher-ai-ui/chat/addMessage",{chatId:e,message:t})}function S(t){c.commit("rancher-ai-ui/chat/updateMessage",{chatId:e,message:t})}function D({message:e,result:t},a){V(a,(0,p.zw)({prompt:t?i.Tc.Yes:i.Tc.No,tags:[i.Mv.Confirmation]})),S({id:e.id,confirmation:{action:e.confirmation?.action||null,status:t?i._r.Confirmed:i._r.Canceled}})}function T(t){return c.getters["rancher-ai-ui/chat/message"]({chatId:e,messageId:t})}function $(){return{role:i.Xh.Assistant,thinkingContent:"",messageContent:"",showThinking:f,thinking:!1,completed:!1}}function I(){return{role:i.Xh.System,templateContent:{component:i.dU.Welcome,content:{principal:b,message:r("ai.message.system.welcome.info",{},!0)}},completed:!1}}function z(e){return{role:i.Xh.System,completed:!0,templateContent:{component:i.dU.SystemSuggestion,content:{message:r("ai.message.system.switchAgent.info",{agent:e?.displayName||x.value.agentMetadata?.recommended},!0)}},actions:[{label:r("ai.message.system.switchAgent.actions.confirm"),type:i.X2.Button,action:()=>(s(x.value.agentMetadata?.recommended||""),{label:r("ai.message.system.switchAgent.results.confirm",{agent:e?.displayName||x.value.agentMetadata?.recommended},!0),status:i._r.Confirmed,icon:"icon-checkmark"})},{label:r("ai.message.system.switchAgent.actions.dismiss"),type:i.X2.Button,action:()=>(c.commit("rancher-ai-ui/chat/setSession",{[v]:!0}),{label:r("ai.message.system.switchAgent.results.dismiss",{},!0),status:i._r.Canceled,icon:"icon-close"})}]}}function P(e){if(N(i.N$.Processing),y.value.length>0)return;const t=e.target;if(t){const e=`Hi!\n        - Send me a message with 3 ${B.value?.length?"suggestions based on the context.":"generic suggestions."}.\n        - DO NOT ask for any confirmation or additional information.\n      `;V(t,(0,p.zw)({prompt:e,context:B.value,tags:[i.Mv.Ephemeral,i.Mv.Welcome]})),N(i.N$.Processing)}}async function j(t){const a=t.data;try{y.value.find(e=>e.completed)?await R(a):(N(i.N$.Initializing),L(a),await U(a))}catch(n){h.error("Error processing messages:",n),c.commit("rancher-ai-ui/chat/setError",{chatId:e,error:{message:`${r("ai.error.message.processing")} ${n.message||n||""}`}}),N(i.N$.Idle)}}function L(e){const t=(0,p.li)(e);t&&c.commit("rancher-ai-ui/chat/setMetadata",{activeChatId:t?.chatId})}async function U(e){switch(e){case i.vw.MessageStart:const t=await A(I());x.value=T(t);break;case i.vw.MessageEnd:N(i.N$.Idle),x.value.messageContent="",x.value.completed=!0;break;default:if(!1===x.value.completed){if(e.startsWith(i.vw.ErrorStart)&&e.endsWith(i.vw.ErrorEnd)){const t=(0,p.NR)(e);throw t}if(x.value.messageContent+=e,x.value.messageContent?.includes(i.vw.SuggestionsStart)&&x.value.messageContent?.includes(i.vw.SuggestionsEnd)){const{suggestionActions:e,remaining:t}=(0,p.hS)(x.value.suggestionActions||[],x.value.messageContent);x.value.suggestionActions=e,x.value.messageContent=t;break}}break}}async function R(e){switch(e){case i.vw.MessageStart:N(i.N$.Working);const a=await A($());x.value=T(a);break;case i.vw.ThinkingStart:N(i.N$.Thinking),x.value.thinking=!0;break;case i.vw.ThinkingEnd:N(i.N$.GeneratingResponse),x.value.thinking=!1;break;case i.vw.MessageEnd:if(N(i.N$.Idle),x.value.messageContent=x.value.messageContent?.replace(/[\r\n]+$/,""),x.value.thinking=!1,x.value.completed=!0,!c.getters["rancher-ai-ui/chat/session"]?.[v]&&x.value.agentMetadata?.recommended&&x.value.agentMetadata?.selectionMode===i.zW.Auto&&Number(x.value.id)>10){const e=t.value.find(e=>e.name===x.value.agentMetadata?.recommended);await A(z(e))}break;default:if(N(i.N$.GeneratingResponse),e.startsWith(i.vw.AgentMetadataStart)&&e.endsWith(i.vw.AgentMetadataEnd)){const a=(0,p.gK)(e,t.value);a&&(x.value.agentMetadata=a);break}if(!1===x.value.completed&&!0===x.value.thinking){if(!x.value.thinkingContent&&""===e.trim())break;x.value.thinkingContent+=e;break}if(!1===x.value.completed&&!1===x.value.thinking){if(!x.value.messageContent&&""===e.trim())break;if(e.startsWith(i.vw.McpResultStart)&&e.endsWith(i.vw.McpResultEnd)){N(i.N$.Finalizing),x.value.relatedResourcesActions=(0,p.YH)(e);break}if(e.startsWith(i.vw.ConfirmationStart)&&e.endsWith(i.vw.ConfirmationEnd)){const t=(0,p.Hx)(e);if(t){x.value.confirmation={action:t,status:i._r.Pending},x.value.thinking=!1,x.value.completed=!0;break}}if(e.startsWith(i.vw.DocLinkStart)&&e.endsWith(i.vw.DocLinkEnd)){x.value.sourceLinks=(0,p.aW)(x.value.sourceLinks||[],e);break}if(e.startsWith(i.vw.ErrorStart)&&e.endsWith(i.vw.ErrorEnd)){const t=(0,p.NR)(e);throw t}if(x.value.messageContent+=e,x.value.messageContent?.includes(i.vw.SuggestionsStart)&&x.value.messageContent?.includes(i.vw.SuggestionsEnd)){const{suggestionActions:e,remaining:t}=(0,p.hS)(x.value.suggestionActions||[],x.value.messageContent);x.value.suggestionActions=e,x.value.messageContent=t;break}break}break}}function K(){c.commit("rancher-ai-ui/chat/setError",{chatId:e,error:null})}function O(){(0,g.PE)(`Rancher-liz-chat-${e}_${(new Date).toISOString().slice(0,10)}.txt`,(0,p.eY)(b,y.value))}function F(t){c.commit("rancher-ai-ui/chat/loadMessages",{chatId:e,messages:t})}function X(){c.commit("rancher-ai-ui/chat/resetMessages",e)}return(0,n.onMounted)(()=>{c.commit("rancher-ai-ui/chat/init",e)}),{onopen:P,onmessage:j,messages:y,sendMessage:M,addMessage:A,updateMessage:S,confirmMessage:D,selectContext:_,resetChatError:K,downloadMessages:O,loadMessages:F,resetMessages:X,phase:C,error:k}}var y=a(2633),x=a(7696),k=a(2684),w=a(6328);function C(){const e=(0,o.Pj)(),{onTabClose:t}=(0,x.A)(),{setDimensions:a}=(0,k.A)({position:y.A.panelPosition}),{mouseResizeXStart:n}=(0,w.A)({position:y.A.panelPosition,setDimensions:a});function s(e){n(e)}function i(){t(y.A.panelId),y.A.close(e)}function c(){y.A.restoreDefaultPositions(e)}return{resize:s,close:i,restore:c}}var E=a(1211),N=a(4070);function _(){const e=(0,o.Pj)(),{t:t}=(0,l.s)(e),a=(0,n.ref)(null),c=(0,n.ref)(null);function r(e){try{return(0,E.u)(e)}catch(c){(0,N.R)("Error decoding ACTIVE_LLM:",c)}return""}function d(e,t){let a="";try{if(t){const n=`${t.toUpperCase()}_MODEL`;a=(0,E.u)(e[n]||"")}if(!a){const{MODEL:t}=e;a=(0,E.u)(t||"")}}catch(n){(0,N.R)(`Error decoding model for ${t}:`,n)}return a}function m(e){let a="",n="";const{ACTIVE_LLM:o,OLLAMA_URL:s,GOOGLE_API_KEY:i,OPENAI_API_KEY:c,AWS_SECRET_ACCESS_KEY:l,AWS_BEARER_TOKEN_BEDROCK:u}=e;return o?a=r(o):s?a="ollama":i?a="gemini":c?a="openai":(l||u)&&(a="bedrock"),n=d(e,a),a&&n?{name:t(`ai.configurations.models.${a}`),model:n}:null}async function p(){if(e.getters["management/canList"](u.oU.DEPLOYMENT))try{const a=await e.dispatch("management/find",{type:u.oU.DEPLOYMENT,id:`${s.AGENT_NAMESPACE}/${s.AGENT_NAME}`});a&&"active"!==a.state&&(c.value={key:"ai.error.services.deployment.notActive",action:{label:t("ai.installation.goToDeployment"),type:i.X2.Button,resource:{cluster:"local",type:u.oU.DEPLOYMENT,namespace:s.AGENT_NAMESPACE,name:s.AGENT_NAME}}})}catch(a){(0,N.R)("'rancher-ai-agent' deployment not found",a),c.value={key:"ai.error.services.deployment.notFound",action:{label:t("ai.installation.goToInstall"),type:i.X2.Button,resource:{detailLocation:{name:"c-cluster-apps-charts"}}}}}else c.value={key:"ai.error.services.deployment.noPermission"};return!c.value}async function g(){if(e.getters["management/canList"](u.bB)){try{const t=await e.dispatch("management/find",{type:u.bB,id:`${s.AGENT_NAMESPACE}/${s.AGENT_CONFIG_SECRET_NAME}`});t?.data&&(a.value=m(t.data))}catch(n){(0,N.R)("Error fetching agent configuration secret:",n)}a.value||(c.value={key:"ai.error.services.secret.missingConfig",action:{label:t("ai.settings.goToSettings"),type:i.X2.Button,resource:{detailLocation:{name:`c-cluster-settings-${s.PRODUCT_NAME}`}}}})}else c.value={key:"ai.error.services.secret.noPermission"}}return(0,n.onMounted)(async()=>{const e=await p();e&&g()}),{llmConfig:a,error:c}}var B=a(4364);function V(e){const t=`/api/v1/namespaces/${s.AGENT_NAMESPACE}/services/http:${s.AGENT_NAME}:80/proxy/${s.AGENT_REST_API_PATH}`;async function a(){try{const e=await fetch(`${t}/chats`),a=await e.json();return a.filter(e=>!!e.name)}catch(e){return B.error("Failed to fetch chats:",e),[]}}async function n(e,a){try{const n=await fetch(`${t}/chats/${e}`,{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});return await n.json()}catch(n){throw B.error("Failed to update chat:",n),n}}async function o(e){try{await fetch(`${t}/chats/${e}`,{method:"DELETE"})}catch(a){B.error("Failed to delete chat:",a)}}async function i(a){try{const n=await fetch(`${t}/chats/${a}/messages`),o=await n.json();return o.map(t=>(0,p.VG)(t,e.value||[]))}catch(n){return B.error("Failed to fetch messages:",n),[]}}return{fetchChats:a,fetchMessages:i,updateChat:n,deleteChat:o}}function M(e){const t=(0,o.Pj)(),a=(0,n.computed)(()=>{const e=t.getters["management/all"](i.VA.AI_AGENT_CONFIG);return e.filter(e=>e.spec.enabled).map(p.MM)}),s=(0,n.computed)(()=>t.getters["rancher-ai-ui/chat/agentName"](e));async function c(){await t.dispatch("management/findAll",{type:i.VA.AI_AGENT_CONFIG})}function l(a){t.commit("rancher-ai-ui/chat/setAgentName",{chatId:e,agentName:a})}return(0,n.onMounted)(()=>{c()}),{agents:a,selectAgent:l,agentName:s}}var A=a(1006),S=a(8014);const D={class:"chat-console-menu-container"};var T=(0,n.defineComponent)({__name:"ChatPanelMenu",props:{disabled:{type:Boolean,default:!1}},emits:["download:chat","show:help","config:chat"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t,r=(0,n.ref)([{label:s("ai.menu.options.chat.download.label"),description:s("ai.menu.options.chat.download.description"),icon:"icon-download",action:()=>{c("download:chat")}},{label:s("ai.menu.options.chat.config.label"),description:s("ai.menu.options.chat.config.description"),icon:"icon-gear",action:()=>{c("config:chat")}}]),d=(0,n.ref)(!1);return(e,t)=>{const a=(0,n.resolveDirective)("clean-tooltip");return(0,n.openBlock)(),(0,n.createElementBlock)("div",D,[(0,n.createVNode)((0,n.unref)(S.Jj),{class:"menu-dropdown",placement:"top-end","onUpdate:open":t[0]||(t[0]=e=>d.value=e)},{dropdownCollection:(0,n.withCtx)(()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(r.value,(e,t)=>(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(S.s$),{key:t,onClick:e.action},{before:(0,n.withCtx)(()=>[e.icon?((0,n.openBlock)(),(0,n.createElementBlock)("i",{key:0,class:(0,n.normalizeClass)(["icon",e.icon])},null,2)):(0,n.createCommentVNode)("",!0)]),default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.label)+" ",1)]),_:2},1032,["onClick"])),[[a,e.description]])),128))]),default:(0,n.withCtx)(()=>[(0,n.createVNode)((0,n.unref)(S.Nq),{ghost:"",small:"",disabled:i.disabled},{default:(0,n.withCtx)(()=>t[1]||(t[1]=[(0,n.createElementVNode)("i",{class:"icon icon-actions"},null,-1)])),_:1,__:[1]},8,["disabled"])]),_:1})])}}});const $=T;var I=$;const z={class:"chat-header"},P={class:"chat-title"},j={class:"chat-name"},L={class:"label"},U={class:"chat-menu"},R={class:"chat-close-btn"};var K=(0,n.defineComponent)({__name:"Header",props:{disabled:{type:Boolean,default:!1}},emits:["close:chat","download:chat","show:help","config:chat","toggle:history"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t;function r(){i.disabled||c("toggle:history")}return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",z,[(0,n.createElementVNode)("div",P,[(0,n.createElementVNode)("div",j,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["chat-history-btn",{disabled:e.disabled}])},[(0,n.createVNode)(A.A,{small:"",ghost:"",class:"btn-open-history","data-testid":"rancher-ai-ui-chat-history-button",onClick:r,onKeydown:[(0,n.withKeys)((0,n.withModifiers)(r,["stop"]),["enter"]),(0,n.withKeys)((0,n.withModifiers)(r,["stop"]),["space","enter"])]},{default:(0,n.withCtx)(()=>t[6]||(t[6]=[(0,n.createElementVNode)("i",{class:"icon icon-menu"},null,-1)])),_:1,__:[6]},8,["onKeydown"])],2),(0,n.createElementVNode)("span",L,(0,n.toDisplayString)((0,n.unref)(s)("ai.header.title")),1)])]),(0,n.createElementVNode)("div",U,[(0,n.createVNode)(I,{"onDownload:chat":t[0]||(t[0]=e=>c("download:chat")),"onShow:help":t[1]||(t[1]=e=>c("show:help")),"onConfig:chat":t[2]||(t[2]=e=>c("config:chat"))})]),(0,n.createElementVNode)("div",R,[(0,n.createVNode)(A.A,{small:"",ghost:"",class:"btn-close","data-testid":"rancher-ai-ui-chat-close-button",onClick:t[3]||(t[3]=e=>c("close:chat")),onKeydown:[t[4]||(t[4]=(0,n.withKeys)((0,n.withModifiers)(e=>c("close:chat"),["stop"]),["enter"])),t[5]||(t[5]=(0,n.withKeys)((0,n.withModifiers)(e=>c("close:chat"),["stop"]),["space","enter"]))]},{default:(0,n.withCtx)(()=>t[7]||(t[7]=[(0,n.createElementVNode)("i",{class:"icon icon-close"},null,-1)])),_:1,__:[7]})])]))}}),O=(a(1507),a(7433));const F=(0,O.A)(K,[["__scopeId","data-v-ae0338f0"]]);var X=F;const W=["data-testid"],G={class:"dots"};var H=(0,n.defineComponent)({__name:"Processing",props:{phases:{default:()=>[]},phase:{default:null}},setup(e){const t=(0,o.Pj)(),{t:a}=(0,l.s)(t),s=(0,n.ref)(Date.now());let i;const c=e,r=(0,n.computed)(()=>{const e=Math.floor(s.value/500%4);return".".repeat(e)}),d=(0,n.computed)(()=>!c.phase||"idle"===c.phase||c.phases.length&&!c.phases.includes(c.phase)?"":a(`ai.phase.${c.phase}`));return(0,n.onMounted)(()=>{i=setInterval(()=>{s.value=Date.now()},500)}),(0,n.onBeforeUnmount)(()=>{i&&clearInterval(i)}),(e,t)=>d.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"processing-message","data-testid":`rancher-ai-ui-processing-phase-${d.value}`},[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(d.value),1),(0,n.createElementVNode)("div",G,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(r.value),1)])],8,W)):(0,n.createCommentVNode)("",!0)}});a(1821);const Y=(0,O.A)(H,[["__scopeId","data-v-90034db0"]]);var q=Y;const J=["data-testid"],Z={class:"rc-button-label"},Q={key:1},ee={key:1},te={key:0,class:"text-muted"};var ae=(0,n.defineComponent)({__name:"Action",props:{value:{type:Object,default:()=>({})}},setup(e){const t=(0,o.Pj)(),a=e,s=(0,n.ref)(null),c=(0,n.ref)("");function l(){s.value.detailLocation&&t.state.$router.push({...s.value.detailLocation,params:{...s.value.detailLocation.params||{},product:"explorer",cluster:a.value?.resource?.cluster||s.value.detailLocation.params?.cluster}})}return(0,n.onMounted)(async()=>{if(a.value.resource?.detailLocation)s.value=a.value.resource;else{const n="management";await t.dispatch("loadManagement");const{cluster:o,type:i,namespace:c,name:l}=a.value.resource||{};try{s.value=await t.dispatch(`${n}/find`,{cluster:o,type:i,id:c?`${c}/${l}`:l})}catch(e){(0,N.R)("Action - Could not find resource",e),s.value=null}}}),(e,t)=>{const o=(0,n.resolveDirective)("clean-tooltip");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[a.value.type===(0,n.unref)(i.X2).Button?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,"data-testid":`rancher-ai-ui-chat-message-action-button-${a.value?.resource?.name}`},[(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)(A.A,{small:"",secondary:"",disabled:!s.value,onClick:l},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",Z,(0,n.toDisplayString)(a.value.label),1)]),_:1},8,["disabled"])),[[o,c.value]])],8,J)):(0,n.createCommentVNode)("",!0),a.value.type===(0,n.unref)(i.X2).Link?((0,n.openBlock)(),(0,n.createElementBlock)("span",Q,[s.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:0,class:"link",onClick:l},[(0,n.createTextVNode)((0,n.toDisplayString)(a.value.label),1)])),[[o,c.value]]):((0,n.openBlock)(),(0,n.createElementBlock)("span",ee,[(0,n.createTextVNode)((0,n.toDisplayString)(a.value.label)+" ",1),a.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("span",te,"â€”"))]))])):(0,n.createCommentVNode)("",!0)],64)}}});a(1160);const ne=(0,O.A)(ae,[["__scopeId","data-v-66198d4c"]]);var oe=ne;const se={class:"chat-actions-container"},ie={class:"chat-msg-action-title"},ce={class:"chat-msg-actions-container"},le={class:"chat-msg-action-tags"},re=7;var de=(0,n.defineComponent)({__name:"index",props:{label:{type:String,default:""},actions:{type:Array,default:()=>[]}},setup(e){const t=(0,o.Pj)(),{t:a}=(0,l.s)(t),s=e,i=(0,n.ref)(!1),c=(0,n.computed)(()=>s.actions.length>re?s.actions.slice(0,re):s.actions),r=(0,n.computed)(()=>s.actions.length>re?s.actions.slice(re):[]),d=()=>{i.value=!i.value};return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",se,[(0,n.createElementVNode)("div",ie,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(s.label||"ACTIONS"),1)]),(0,n.createElementVNode)("div",ce,[(0,n.createElementVNode)("div",le,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(c.value,(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:t,class:"mt-2 chat-msg-actions"},[(0,n.createVNode)(oe,{value:e},null,8,["value"])]))),128)),i.value?((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,{key:0},(0,n.renderList)(r.value,(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:t,class:"mt-2 chat-msg-actions"},[(0,n.createVNode)(oe,{value:e},null,8,["value"])]))),128)):(0,n.createCommentVNode)("",!0)]),r.value.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:0,class:"chat-msg-actions-more",onClick:d},[i.value?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(a)("ai.message.actions.less",{},!0)),1)],64)):((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:0},[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(a)("ai.message.actions.more",{count:r.value.length},!0)),1)],64)),(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(["icon icon-sm",{"icon icon-chevron-down text-label":!i.value,"icon icon-chevron-up text-label":i.value}])},null,2)])):(0,n.createCommentVNode)("",!0)])]))}});a(2914);const ue=(0,O.A)(de,[["__scopeId","data-v-061588ed"]]);var me=ue;const pe=["data-testid"];var ge=(0,n.defineComponent)({__name:"ContextTag",props:{item:{default:()=>({tag:"",value:null})},removeEnabled:{type:Boolean,default:!0},type:{default:"default"}},emits:["remove"],setup(e,{emit:t}){const a=e,o=t;return(e,t)=>{const s=(0,n.resolveDirective)("clean-tooltip");return(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["vs__selected tag",{["user-context"]:"user"===a.type}])},[(0,n.createElementVNode)("div",{class:"tag-content","data-testid":`rancher-ai-ui-context-tag-${a.item.valueLabel||a.item.value}`},[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(a.item.valueLabel||a.item.value),1)],8,pe),a.removeEnabled?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,type:"button",class:"vs__deselect",onClick:t[0]||(t[0]=e=>o("remove",a.item))})):(0,n.createCommentVNode)("",!0)],2)),[[s,a.item.description]])}}});a(271);const he=(0,O.A)(ge,[["__scopeId","data-v-1dd3e5a3"]]);var fe=he;const ve={class:"chat-source-container"},be={class:"chat-msg-source-label"},ye={key:0,class:"chat-msg-source-tags"},xe=["onClick"],ke={class:"sr-only"};var we=(0,n.defineComponent)({__name:"SourceLinks",props:{links:{default:()=>[]}},setup(e){const t=(0,o.Pj)(),{t:a}=(0,l.s)(t),s=(0,n.ref)(!1),i=(0,n.computed)(()=>e.links.map(e=>{const t=e?.endsWith("/")?e.slice(0,-1):e,a=t?.split("/")||[],n=a[a.length-1]||"",o=n.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return{label:o||"Link",value:e}}));function c(e){window.open(e,"_blank")}return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",ve,[(0,n.createElementVNode)("div",be,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(a)("ai.message.source.label")),1),(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(["icon icon-sm",{"icon icon-chevron-up text-label":!s.value,"icon icon-chevron-down text-label":s.value}]),onClick:t[0]||(t[0]=e=>s.value=!s.value)},null,2)]),s.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",ye,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(i.value,(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:e.value,onClick:t=>c(e.value)},[(0,n.createElementVNode)("span",ke,(0,n.toDisplayString)((0,n.unref)(a)("ai.generic.opensInNewTab")),1),(0,n.createVNode)(fe,{"data-testid":`rancher-ai-ui-chat-message-source-link-${t}`,"remove-enabled":!1,item:{value:e.label},type:"user",class:"chat-msg-source-tag"},null,8,["data-testid","item"])],8,xe))),128))]))]))}});a(5372);const Ce=(0,O.A)(we,[["__scopeId","data-v-126ae1ea"]]);var Ee=Ce;const Ne={class:"confirmation-action"},_e={class:"confirmation-message"},Be={"data-testid":"rancher-ai-ui-chat-message-confirmation-message"},Ve={key:0,class:"confirmation-buttons"},Me={key:0,class:"delete-confirmation"},Ae={key:1,class:"standard-confirmation"},Se={class:"rc-button-label"},De={class:"rc-button-label"},Te={key:1,class:"confirmation-status"},$e={key:0,class:"status-confirmed","data-testid":"rancher-ai-ui-chat-message-confirmation-confirmed"},Ie={key:1,class:"status-canceled","data-testid":"rancher-ai-ui-chat-message-confirmation-canceled"};var ze=(0,n.defineComponent)({__name:"Confirmation",props:{value:{type:Object,default:()=>({})},messageContent:{type:String,default:""}},emits:["confirm"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),c=e,r=t,d=(0,n.computed)(()=>{const e=s("ai.confirmation.message.question");try{if(!c.messageContent){const{kind:t,name:a,namespace:n,cluster:o}=c.value.action?.resource||{};if(t&&a&&n&&o){const i=c.value.action?.payload?.reduce((e,i)=>{const{op:c,value:l,path:r}=i||{};return c&&l&&r?`${e+s("ai.confirmation.message.description",{op:c,value:"string"===typeof l?l:JSON.stringify(l),path:r,name:a,kind:t,namespace:n,cluster:o},!0)}<br>`:e},"");if(i?.trim())return`${i}<br>${e}`}}}catch(t){(0,N.R)("Error generating confirmation description:",t)}return e});return(e,t)=>{const a=(0,n.resolveDirective)("clean-html");return(0,n.openBlock)(),(0,n.createElementBlock)("div",Ne,[(0,n.createElementVNode)("div",_e,[(0,n.withDirectives)((0,n.createElementVNode)("span",Be,null,512),[[a,d.value]])]),c.value.status===(0,n.unref)(i._r).Pending?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ve,[c.value.action?.type===(0,n.unref)(i.YB).Delete?((0,n.openBlock)(),(0,n.createElementBlock)("div",Me)):((0,n.openBlock)(),(0,n.createElementBlock)("div",Ae,[(0,n.createVNode)(A.A,{small:"",tertiary:"","data-testid":"rancher-ai-ui-chat-message-confirmation-cancel-button",onClick:t[0]||(t[0]=e=>r("confirm",!1))},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",Se,(0,n.toDisplayString)((0,n.unref)(s)("ai.confirmation.cancel")),1)]),_:1}),(0,n.createVNode)(A.A,{small:"",tertiary:"","data-testid":"rancher-ai-ui-chat-message-confirmation-confirm-button",onClick:t[1]||(t[1]=e=>r("confirm",!0))},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",De,(0,n.toDisplayString)((0,n.unref)(s)("ai.confirmation.confirm")),1)]),_:1})]))])):((0,n.openBlock)(),(0,n.createElementBlock)("div",Te,[c.value.status===(0,n.unref)(i._r).Confirmed?((0,n.openBlock)(),(0,n.createElementBlock)("div",$e,[t[2]||(t[2]=(0,n.createElementVNode)("i",{class:"icon icon-checkmark"},null,-1)),(0,n.createElementVNode)("p",null,(0,n.toDisplayString)((0,n.unref)(s)("ai.confirmation.confirmed")),1)])):c.value.status===(0,n.unref)(i._r).Canceled?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ie,[t[3]||(t[3]=(0,n.createElementVNode)("i",{class:"icon icon-close canceled"},null,-1)),(0,n.createElementVNode)("p",null,(0,n.toDisplayString)((0,n.unref)(s)("ai.confirmation.canceled")),1)])):(0,n.createCommentVNode)("",!0)]))])}}});a(6776);const Pe=(0,O.A)(ze,[["__scopeId","data-v-48bab9a2"]]);var je=Pe;const Le={class:"suggestions-container"},Ue={class:"suggestions-header"},Re={class:"suggestions-list"},Ke={class:"rc-button-label"};var Oe=(0,n.defineComponent)({__name:"Suggestions",props:{label:{type:String,default:()=>""},suggestions:{type:Array,default:()=>[]}},emits:["select"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t;return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Le,[(0,n.createElementVNode)("div",Ue,(0,n.toDisplayString)(i.label||(0,n.unref)(s)("ai.message.suggestions.label")),1),(0,n.createElementVNode)("ul",Re,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(i.suggestions,(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("li",{key:t,class:"suggestion-item"},[(0,n.createVNode)(A.A,{tertiary:"",small:"","data-testid":`rancher-ai-ui-chat-message-suggestion-${t}`,onClick:()=>c("select",e)},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",Ke,(0,n.toDisplayString)(e),1)]),_:2},1032,["data-testid","onClick"])]))),128))])]))}});a(1846);const Fe=(0,O.A)(Oe,[["__scopeId","data-v-f038e55a"]]);var Xe=Fe;const We={class:"user-msg-avatar"},Ge=["src","alt"],He={key:1,class:"icon icon-user"};var Ye=(0,n.defineComponent)({__name:"UserAvatar",setup(e){const t=(0,o.Pj)(),{t:a}=(0,l.s)(t),s=(0,n.computed)(()=>{const e=t.getters["rancher/byId"](u.k$.PRINCIPAL,t.getters["auth/principalId"])||{};return e?.avatarSrc});return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",We,[s.value?((0,n.openBlock)(),(0,n.createElementBlock)("img",{key:0,src:s.value,class:"round-avatar",width:"20",height:"20",alt:(0,n.unref)(a)("nav.alt.userAvatar")},null,8,Ge)):((0,n.openBlock)(),(0,n.createElementBlock)("i",He))]))}});a(2773);const qe=(0,O.A)(Ye,[["__scopeId","data-v-2d4aa4a2"]]);var Je=qe,Ze=a.p+"img/liz-icon.fdbc7bd8.svg";const Qe={class:"system-msg-avatar"},et=["src"];var tt=(0,n.defineComponent)({__name:"SystemAvatar",setup(e){return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Qe,[(0,n.createElementVNode)("img",{class:"img-svg",src:(0,n.unref)(Ze)},null,8,et)]))}});a(3188);const at=(0,O.A)(tt,[["__scopeId","data-v-7bae8fb7"]]);var nt=at;const ot={class:"chat-msg-content"},st={key:0,class:"chat-msg-bubble-actions"},it={class:"chat-msg-text"},ct={key:0,class:"chat-msg-selected-agent"},lt=["data-testid"],rt={key:1},dt={key:2},ut={key:0},mt={key:1},pt={key:3},gt={key:1,class:"chat-msg-section-footer"},ht={key:2,class:"chat-msg-section-footer"},ft={key:0,class:"chat-msg-section chat-msg-user-context-tags"},vt={key:1,class:"chat-msg-section"},bt={key:2,class:"chat-msg-section"},yt={key:3,class:"chat-msg-section"},xt={key:4,class:"chat-msg-timestamp"};var kt=(0,n.defineComponent)({__name:"index",props:{message:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},pendingConfirmation:{type:Boolean,default:!1}},emits:["update:message","confirm:message","send:message"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),c=e,r=t,d=(0,n.computed)(()=>c.message.role===i.Xh.Assistant&&!c.message.completed&&(c.message.thinking||!c.message.formattedMessageContent)),u=(0,n.ref)(!1),m=(0,n.ref)(null);function p(){if(!c.message.summaryContent&&!c.message.messageContent&&!c.message.thinkingContent&&!c.message.formattedMessageContent)return;let e="";i.Xh.Assistant&&c.message.showThinking&&(e+=c.message.thinkingContent?`${c.message.thinkingContent}\n`:""),c.message.summaryContent?(e+=c.message.summaryContent,c.message.showCompleteMessage&&(e+=`\n${c.message.messageContent||""}`)):e+=c.message.messageContent||c.message.formattedMessageContent||"",navigator.clipboard.writeText(e.trim()),u.value=!0,m.value&&clearTimeout(m.value),m.value=setTimeout(()=>{u.value=!1},1e3)}function g(){(0,n.nextTick)(()=>r("send:message",c.message))}function h(){c.message.showCompleteMessage=!c.message.showCompleteMessage,(0,n.nextTick)(()=>{r("update:message",c.message)})}function f(){c.message.showThinking=!c.message.showThinking,(0,n.nextTick)(()=>r("update:message",c.message))}return(0,n.onBeforeUnmount)(()=>{m.value&&clearTimeout(m.value)}),(t,a)=>{const o=(0,n.resolveDirective)("clean-tooltip"),l=(0,n.resolveDirective)("clean-html");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["chat-message",{"chat-message-user":c.message.role===(0,n.unref)(i.Xh).User,disabled:c.disabled}])},[((0,n.openBlock)(),(0,n.createBlock)((0,n.resolveDynamicComponent)(c.message.role===(0,n.unref)(i.Xh).User?Je:nt),{class:"chat-msg-avatar"})),(0,n.createElementVNode)("div",ot,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["chat-msg-bubble",{"chat-msg-bubble-user":c.message.role===(0,n.unref)(i.Xh).User,"chat-msg-bubble-assistant":c.message.role!==(0,n.unref)(i.Xh).User,"chat-msg-bubble-error":c.message.isError}])},[c.disabled?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",st,[c.message.role===(0,n.unref)(i.Xh).Assistant&&c.message.thinkingContent?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,class:"bubble-action-btn btn header-btn role-tertiary","data-testid":"rancher-ai-ui-chat-message-show-thinking-button",type:"button",role:"button",onClick:f},a[2]||(a[2]=[(0,n.createElementVNode)("i",{class:"icon icon-thinking-process"},null,-1)]))),[[o,c.message.showThinking?(0,n.unref)(s)("ai.message.actions.tooltip.hideThinking"):(0,n.unref)(s)("ai.message.actions.tooltip.showThinking")]]):(0,n.createCommentVNode)("",!0),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("button",{class:"bubble-action-btn btn header-btn role-tertiary",type:"button",role:"button",onClick:p},[(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)({"icon icon-checkmark":u.value,"icon icon-copy":!u.value})},null,2)])),[[o,(0,n.unref)(s)("ai.message.actions.tooltip.copy")]]),c.message.role!==(0,n.unref)(i.Xh).User||e.pendingConfirmation?(0,n.createCommentVNode)("",!0):(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:1,class:"bubble-action-btn btn header-btn role-tertiary",type:"button",role:"button",onClick:g},a[3]||(a[3]=[(0,n.createElementVNode)("i",{class:"icon icon-backup"},null,-1)]))),[[o,(0,n.unref)(s)("ai.message.actions.tooltip.resend")]])])),(0,n.createElementVNode)("div",it,[c.message.role===(0,n.unref)(i.Xh).Assistant&&c.message.agentMetadata?.agent?((0,n.openBlock)(),(0,n.createElementBlock)("div",ct,[(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",{class:"chat-msg-selected-agent-label","data-testid":`rancher-ai-ui-chat-message-selected-agent-label-${c.message.agentMetadata?.agent?.name}`},[(0,n.createTextVNode)((0,n.toDisplayString)(c.message.agentMetadata?.agent?.displayName)+" "+(0,n.toDisplayString)((0,n.unref)(s)(`ai.agents.selectionMode.${c.message.agentMetadata?.selectionMode||"none"}`)),1)],8,lt)),[[o,c.message.agentMetadata?.agent?.description]])])):(0,n.createCommentVNode)("",!0),!c.disabled&&d.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",rt,[(0,n.createVNode)(q,{"data-testid":"rancher-ai-ui-chat-message-thinking-label",phase:(0,n.unref)(i.N$).Thinking},null,8,["phase"])])):(0,n.createCommentVNode)("",!0),c.message.showThinking?((0,n.openBlock)(),(0,n.createElementBlock)("span",dt,[d.value?((0,n.openBlock)(),(0,n.createElementBlock)("br",ut)):(0,n.createCommentVNode)("",!0),c.message.formattedThinkingContent?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",mt,null,512)),[[l,c.message.formattedThinkingContent]]):(0,n.createCommentVNode)("",!0),a[4]||(a[4]=(0,n.createElementVNode)("br",null,null,-1))])):(0,n.createCommentVNode)("",!0),c.message.summaryContent?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",pt,null,512)),[[l,c.message.summaryContent]]):(0,n.createCommentVNode)("",!0),!c.message.formattedMessageContent||c.message.summaryContent&&!c.message.showCompleteMessage?(0,n.createCommentVNode)("",!0):(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:4,"data-testid":"rancher-ai-ui-chat-message-formatted-content",class:(0,n.normalizeClass)({"chat-msg-user-expanded":!!c.message.summaryContent&&c.message.showCompleteMessage})},null,2)),[[l,c.message.formattedMessageContent]])]),c.message.suggestionActions?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",gt,[(0,n.createVNode)(Xe,{suggestions:c.message.suggestionActions,onSelect:a[0]||(a[0]=e=>r("send:message",e))},null,8,["suggestions"])])):(0,n.createCommentVNode)("",!0),c.message.confirmation?((0,n.openBlock)(),(0,n.createElementBlock)("div",ht,[(0,n.createVNode)(je,{value:c.message.confirmation,"message-content":c.message.messageContent,onConfirm:a[1]||(a[1]=e=>r("confirm:message",{message:c.message,result:e}))},null,8,["value","message-content"])])):(0,n.createCommentVNode)("",!0),c.message.role===(0,n.unref)(i.Xh).Assistant&&c.message.thinkingContent&&c.message.showThinking?((0,n.openBlock)(),(0,n.createBlock)(A.A,{key:3,class:"inline-button",small:"",ghost:"",onClick:f},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("a",null,(0,n.toDisplayString)((0,n.unref)(s)("ai.message.actions.hideThinking")),1)]),_:1})):(0,n.createCommentVNode)("",!0),c.message.summaryContent?((0,n.openBlock)(),(0,n.createBlock)(A.A,{key:4,class:"inline-button",small:"",ghost:"",onClick:h},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("a",null,(0,n.toDisplayString)(c.message.showCompleteMessage?(0,n.unref)(s)("ai.message.actions.hideCompleteMessage"):(0,n.unref)(s)("ai.message.actions.showCompleteMessage")),1)]),_:1})):(0,n.createCommentVNode)("",!0)],2),c.message.role===(0,n.unref)(i.Xh).User&&c.message.contextContent?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",ft,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(c.message.contextContent,(e,t)=>((0,n.openBlock)(),(0,n.createBlock)(fe,{key:t,item:e,"remove-enabled":!1,type:"user",class:"chat-msg-user-context-tag"},null,8,["item"]))),128))])):(0,n.createCommentVNode)("",!0),c.message.sourceLinks?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",vt,[(0,n.createVNode)(Ee,{links:c.message.sourceLinks},null,8,["links"])])):(0,n.createCommentVNode)("",!0),c.message.relatedResourcesActions?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",bt,[(0,n.createVNode)(me,{label:(0,n.unref)(s)("ai.message.relatedResourcesActions.label"),actions:c.message.relatedResourcesActions},null,8,["label","actions"])])):(0,n.createCommentVNode)("",!0),c.message.actions?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",yt,[(0,n.createVNode)(me,{label:(0,n.unref)(s)("ai.message.quickActions.label"),actions:c.message.actions},null,8,["label","actions"])])):(0,n.createCommentVNode)("",!0),c.message.timestamp?((0,n.openBlock)(),(0,n.createElementBlock)("div",xt,(0,n.toDisplayString)(c.message.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)):(0,n.createCommentVNode)("",!0)])],2)}}});a(1755);const wt=(0,O.A)(kt,[["__scopeId","data-v-08b194e0"]]);var Ct=wt;const Et={class:"chat-welcome-msg-splash"},Nt={class:"chat-welcome-msg-avatar-panel"},_t={class:"chat-welcome-msg-avatar-circle"},Bt=["src"],Vt={class:"chat-welcome-msg-greeting"},Mt={class:"chat-welcome-msg-greeting-bubble"},At={class:"chat-welcome-msg-text-panel"},St={key:0,class:"chat-welcome-msg-bubble"},Dt={class:"chat-welcome-msg-text"},Tt={key:1,class:"chat-welcome-msg-bubble"},$t={class:"chat-welcome-msg-text"},It={key:2,class:"chat-welcome-msg-bubble chat-welcome-suggestions"},zt={class:"chat-welcome-msg-text"};var Pt=(0,n.defineComponent)({__name:"Welcome",props:{message:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["send:message"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t,r=(0,n.computed)(()=>{const e=i.message.templateContent?.content?.principal,t={name:e?.name||"User"};return"admin"===e?.loginName&&(t.name=e?.loginName),t});return(e,t)=>{const a=(0,n.resolveDirective)("clean-html");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["chat-welcome-message",{disabled:i.disabled}])},[(0,n.createElementVNode)("div",Et,[(0,n.createElementVNode)("div",Nt,[(0,n.createElementVNode)("div",_t,[(0,n.createElementVNode)("img",{src:(0,n.unref)(Ze),alt:"Liz Avatar",width:"70",height:"70"},null,8,Bt)]),(0,n.createElementVNode)("div",Vt,[(0,n.createElementVNode)("span",Mt,(0,n.toDisplayString)((0,n.unref)(s)("ai.message.system.welcome.greetings.line3",{name:r.value.name},!0)),1)])]),(0,n.createElementVNode)("div",At,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(s)("ai.message.system.welcome.greetings.line1",{},!0)),1),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(s)("ai.message.system.welcome.greetings.line2")),1)])]),i.message.templateContent?.content?.message?((0,n.openBlock)(),(0,n.createElementBlock)("div",St,[(0,n.createElementVNode)("div",Dt,[(0,n.withDirectives)((0,n.createElementVNode)("span",null,null,512),[[a,(0,n.unref)(p.gg)(i.message.templateContent?.content?.message||"")]])])])):(0,n.createCommentVNode)("",!0),i.message.completed&&i.message.messageContent?((0,n.openBlock)(),(0,n.createElementBlock)("div",Tt,[(0,n.createElementVNode)("div",$t,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(i.message.messageContent),1)])])):(0,n.createCommentVNode)("",!0),i.message.completed&&i.message.suggestionActions?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",It,[(0,n.createElementVNode)("div",zt,[(0,n.createVNode)(Xe,{label:(0,n.unref)(s)("ai.message.system.welcome.suggestions.label"),suggestions:i.message.suggestionActions,onSelect:t[0]||(t[0]=e=>c("send:message",e))},null,8,["label","suggestions"])])])):(0,n.createCommentVNode)("",!0)],2)}}});a(7380);const jt=(0,O.A)(Pt,[["__scopeId","data-v-015d8cf2"]]);var Lt=jt;const Ut={key:0,class:"chat-system-suggestion-msg-bubble"},Rt={class:"chat-system-suggestion-msg-text"},Kt={class:"chat-system-suggestion-actions"},Ot=["data-testid"],Ft={class:"chat-system-suggestion-msg-text"},Xt={key:1,class:"chat-system-suggestion-actions-buttons"},Wt={class:"rc-button-label"},Gt={class:"rc-button-label"};var Ht=(0,n.defineComponent)({__name:"SystemSuggestion",props:{message:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:message"],setup(e,{emit:t}){const a=e,o=t,s=(0,n.computed)(()=>{const e=a.message?.actions||[];return{confirm:e[0],cancel:e[1]}});function i(e){s.value[e]?.action&&(a.message.confirmation=s.value[e].action(),o("update:message",a.message))}return(e,t)=>{const o=(0,n.resolveDirective)("clean-html");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["chat-system-suggestion-message",{disabled:a.disabled}])},[a.message?.templateContent?.content?.message?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ut,[(0,n.createElementVNode)("div",Rt,[(0,n.withDirectives)((0,n.createElementVNode)("span",null,null,512),[[o,(0,n.unref)(p.gg)(a.message.templateContent.content.message||"")]])]),(0,n.createElementVNode)("div",Kt,[a.message.confirmation?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,"data-testid":`rancher-ai-ui-chat-message-confirmation-${a.message.confirmation.status}`,class:(0,n.normalizeClass)(["chat-system-suggestion-actions-result",`status-${a.message.confirmation.status}`])},[(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(["icon",a.message.confirmation.icon])},null,2),(0,n.withDirectives)((0,n.createElementVNode)("span",Ft,null,512),[[o,(0,n.unref)(p.gg)(a.message.confirmation.label||"")]])],10,Ot)):((0,n.openBlock)(),(0,n.createElementBlock)("div",Xt,[s.value.cancel?.action?((0,n.openBlock)(),(0,n.createBlock)(A.A,{key:0,small:"",tertiary:"","data-testid":"rancher-ai-ui-chat-message-confirmation-cancel-button",onClick:t[0]||(t[0]=e=>i("cancel"))},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",Wt,(0,n.toDisplayString)(s.value.cancel?.label),1)]),_:1})):(0,n.createCommentVNode)("",!0),s.value.confirm?.action?((0,n.openBlock)(),(0,n.createBlock)(A.A,{key:1,small:"",secondary:"","data-testid":"rancher-ai-ui-chat-message-confirmation-confirm-button",onClick:t[1]||(t[1]=e=>i("confirm"))},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",Gt,(0,n.toDisplayString)(s.value.confirm?.label),1)]),_:1})):(0,n.createCommentVNode)("",!0)]))])])):(0,n.createCommentVNode)("",!0)],2)}}});a(4768);const Yt=(0,O.A)(Ht,[["__scopeId","data-v-47139b43"]]);var qt=Yt;const Jt={class:"scroll-button"};var Zt=(0,n.defineComponent)({__name:"ScrollButton",props:{direction:{type:String,default:"down"}},emits:["scroll"],setup(e,{emit:t}){const a=e,o=t;return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Jt,[(0,n.createElementVNode)("button",{class:"scroll-button-btn role-tertiary",type:"button",role:"button",onClick:t[0]||(t[0]=e=>o("scroll",a.direction))},[(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(["icon",`icon-chevron-${a.direction}`,"text-label"])},null,2)])]))}});a(9524);const Qt=(0,O.A)(Zt,[["__scopeId","data-v-5ac99e1f"]]);var ea=Qt,ta=(0,n.defineComponent)({__name:"Messages",props:{messages:{type:Array,default:()=>[]},errors:{type:Array,default:()=>[]},messagePhase:{type:String,default:""}},emits:["update:message","confirm:message","send:message"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),c=e,r=t,d=(0,n.ref)(null),u=(0,n.ref)(!0),m=(0,n.ref)(!1),g=(0,n.computed)(()=>[...c.messages].filter(e=>e.messageContent||e.thinkingContent||e.confirmation||e.suggestionActions?.length||e.templateContent).map(e=>({...e,formattedMessageContent:e.role===i.Xh.Assistant||e.summaryContent?(0,p.gg)(e.messageContent||""):e.messageContent,formattedThinkingContent:e.role===i.Xh.Assistant?(0,p.gg)(e.thinkingContent||""):""})).sort((e,t)=>(Number(e.timestamp)||0)-(Number(t.timestamp)||0)||`${e.id}`.localeCompare(`${t.id}`))),h=(0,n.computed)(()=>c.errors.map(e=>({role:i.Xh.System,formattedMessageContent:e.message||s(e.key),timestamp:new Date,completed:!0,isError:!0,actions:e.action?[e.action]:[]}))),f=(0,n.computed)(()=>c.errors.length>0);function v(e){switch(e){case i.dU.Welcome:return Lt;case i.dU.SystemSuggestion:return qt;default:return null}}function b(){const e=d.value;e&&(0,n.nextTick)(()=>{u.value=e.scrollTop+e.clientHeight>=e.scrollHeight-2,m.value=e.scrollTop+e.clientHeight<e.scrollHeight-150})}function y(){d.value&&(d.value.scrollTop=d.value.scrollHeight)}(0,n.watch)(()=>[c.messages,c.messagePhase],(e,t)=>{const a=(e||[])[0],o=(t||[])[0];(0,n.nextTick)(()=>{const e=u.value||o&&a&&a.length>o.length&&a[a.length-1].role===i.Xh.User;e&&y()})},{immediate:!0,deep:!0});const x=(0,n.watch)(()=>c.errors,(e,t)=>{(0,n.nextTick)(()=>{d.value&&(e||[]).length>(t||[]).length&&(d.value.scrollTop=d.value.scrollHeight,x())})},{immediate:!0,deep:!0});return(0,n.onMounted)(()=>{d.value&&d.value.addEventListener("scroll",b)}),(0,n.onBeforeUnmount)(()=>{d.value&&d.value.removeEventListener("scroll",b)}),(t,a)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{ref_key:"messagesView",ref:d,class:"chat-messages"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(g.value,(t,o)=>((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:o},[t.templateContent?((0,n.openBlock)(),(0,n.createBlock)((0,n.resolveDynamicComponent)(v(t.templateContent?.component)),{key:0,class:(0,n.normalizeClass)({"chat-message-template-welcome":g.value.length>1}),"data-testid":`rancher-ai-ui-chat-message-box-${t.id}`,"data-teststatus":`rancher-ai-ui-chat-message-status-${t.id}-${t.completed?"completed":"inprogress"}`,disabled:f.value,message:t,"onUpdate:message":e=>r("update:message",t),"onSend:message":a[0]||(a[0]=e=>r("send:message",e))},null,40,["class","data-testid","data-teststatus","disabled","message","onUpdate:message"])):((0,n.openBlock)(),(0,n.createBlock)(Ct,{key:1,"data-testid":`rancher-ai-ui-chat-message-box-${t.id}`,"data-teststatus":`rancher-ai-ui-chat-message-status-${t.id}-${t.completed?"completed":"inprogress"}`,message:t,disabled:f.value,"pending-confirmation":e.messagePhase===(0,n.unref)(i.N$).AwaitingConfirmation,"onUpdate:message":e=>r("update:message",t),"onConfirm:message":a[1]||(a[1]=e=>r("confirm:message",e)),"onSend:message":a[2]||(a[2]=e=>r("send:message",e))},null,8,["data-testid","data-teststatus","message","disabled","pending-confirmation","onUpdate:message"]))],64))),128)),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(h.value,(e,t)=>((0,n.openBlock)(),(0,n.createBlock)(Ct,{key:t,message:e},null,8,["message"]))),128)),f.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(q,{key:0,class:(0,n.normalizeClass)(["chat-message-processing-label text-label",{"sticky-bottom":g.value.filter(e=>e.role===(0,n.unref)(i.Xh).User).length>0}]),phase:e.messagePhase},null,8,["class","phase"])),m.value&&!f.value?((0,n.openBlock)(),(0,n.createBlock)(ea,{key:1,class:"chat-message-fast-scroll",onScroll:y})):(0,n.createCommentVNode)("",!0)],512))}});a(9123);const aa=(0,O.A)(ta,[["__scopeId","data-v-34a5ab89"]]);var na=aa;const oa={key:0,class:"context-select"},sa={class:"tags"},ia={key:0,class:"context-reset"},ca={key:1,class:"text-muted no-context"};var la=(0,n.defineComponent)({__name:"SelectContext",props:{options:{type:Array,default(){return[]}},autoSelect:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:t}){function a(e){return`${e.tag}_${e.value}`}const s=(0,o.Pj)(),{t:i}=(0,l.s)(s),c=e,r=(0,n.ref)([]),d=(0,n.ref)(!1),u=t;function m(e){r.value.find(t=>a(t)===a(e))?g(e):p(e)}function p(e){r.value.find(t=>a(t)===a(e))||(r.value=[...r.value,e],u("update",r.value))}function g(e){r.value=r.value.filter(t=>a(t)!==a(e)),u("update",r.value)}function h(){r.value=c.options,u("update",r.value)}return(0,n.watch)(()=>c.autoSelect,e=>{r.value=e,u("update",r.value)},{immediate:!0}),(0,n.watch)(()=>c.options,e=>{r.value=r.value.filter(t=>e.find(e=>a(e)===a(t))),u("update",r.value)}),(t,o)=>{const s=(0,n.resolveDirective)("clean-tooltip");return c.options.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",oa,[(0,n.createVNode)((0,n.unref)(S.Jj),{class:"context-dropdown",placement:"top-end","onUpdate:open":o[0]||(o[0]=e=>d.value=e)},{dropdownCollection:(0,n.withCtx)(()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(c.options,(e,t)=>(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(S.s$),{key:t,onClick:t=>m(e)},{before:(0,n.withCtx)(()=>[e.icon?((0,n.openBlock)(),(0,n.createElementBlock)("i",{key:0,class:(0,n.normalizeClass)(["icon",e.icon])},null,2)):(0,n.createCommentVNode)("",!0)]),default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.tag)+":"+(0,n.toDisplayString)(e.valueLabel||e.value)+" ",1),r.value.find(t=>a(t)===a(e))?((0,n.openBlock)(),(0,n.createElementBlock)("i",{key:0,class:(0,n.normalizeClass)({"icon icon-close":r.value.find(t=>a(t)===a(e))})},null,2)):(0,n.createCommentVNode)("",!0)]),_:2},1032,["onClick"])),[[s,e.description]])),128))]),default:(0,n.withCtx)(()=>[(0,n.createVNode)((0,n.unref)(S.Nq),{ghost:"",small:"",class:"context-trigger",disabled:c.disabled},{after:(0,n.withCtx)(()=>[(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)({"icon icon-chevron-up":d.value,"icon icon-chevron-down":!d.value})},null,2)]),default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["context-trigger-text",{"ml-5":c.disabled}])},(0,n.toDisplayString)((0,n.unref)(i)("ai.context.add")),3)]),_:1},8,["disabled"])]),_:1}),(0,n.createElementVNode)("div",sa,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(r.value,(e,t)=>((0,n.openBlock)(),(0,n.createBlock)(fe,{key:t,item:e,onRemove:t=>g(e)},null,8,["item","onRemove"]))),128))]),e.options.length!==r.value.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",ia,[(0,n.createVNode)(A.A,{small:"",tertiary:"",onClick:h},{default:(0,n.withCtx)(()=>[o[1]||(o[1]=(0,n.createElementVNode)("i",{class:"icon icon-refresh mr-5"},null,-1)),(0,n.createTextVNode)(" "+(0,n.toDisplayString)((0,n.unref)(i)("ai.context.reset")),1)]),_:1,__:[1]})])):(0,n.createCommentVNode)("",!0)])):((0,n.openBlock)(),(0,n.createElementBlock)("span",ca,(0,n.toDisplayString)((0,n.unref)(i)("ai.context.none")),1))}}});a(979);const ra=(0,O.A)(la,[["__scopeId","data-v-6f60d4a9"]]);var da=ra,ua=(0,n.defineComponent)({__name:"Context",props:{value:{type:Array,default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){const a=e,o=t;return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["chat-context",{disabled:a.disabled}])},[(0,n.createVNode)(da,{options:a.value,"auto-select":a.value,disabled:a.disabled,onUpdate:t[0]||(t[0]=e=>o("select",e))},null,8,["options","auto-select","disabled"])],2))}});a(8792);const ma=(0,O.A)(ua,[["__scopeId","data-v-5213812e"]]);var pa=ma,ga=a(5250);const ha={class:"agent-selector-container","data-testid":"rancher-ai-ui-multi-agent-select"},fa={class:"selected-agent-name"};var va=(0,n.defineComponent)({__name:"SelectAgent",props:{agents:{type:Array,default(){return[]}},agentName:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t,r=(0,n.computed)(()=>[{name:"default",displayName:s("ai.agents.items.default.displayName"),description:s("ai.agents.items.default.description")},...i.agents]),d=(0,n.computed)(()=>i.agentName||"default"),u=(0,ga.debounce)(e=>{c("select","default"===e?"":e)},100),m=(0,n.ref)(!1);return(e,t)=>{const a=(0,n.resolveDirective)("clean-tooltip");return(0,n.openBlock)(),(0,n.createElementBlock)("div",ha,[(0,n.createVNode)((0,n.unref)(S.Jj),{class:"agent-dropdown",placement:"top-end","onUpdate:open":t[0]||(t[0]=e=>m.value=e)},{dropdownCollection:(0,n.withCtx)(()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(r.value,(e,t)=>(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(S.s$),{key:t,"data-testid":`rancher-ai-ui-multi-agent-select-option-${e.name}`,class:"agent-label",onClick:t=>(0,n.unref)(u)(e.name)},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.displayName||e.name),1),(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(["icon icon-checkmark",{hidden:e.name!==d.value}])},null,2)]),_:2},1032,["data-testid","onClick"])),[[a,{content:e.description,delay:{show:500}}]])),128))]),default:(0,n.withCtx)(()=>[(0,n.createVNode)((0,n.unref)(S.Nq),{ghost:"",small:"",class:"agent-trigger",disabled:i.disabled},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",fa,(0,n.toDisplayString)(r.value?.find(e=>e.name===d.value)?.displayName||(0,n.unref)(s)("ai.agents.items.unknown")),1),(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(["icon icon-chevron-down chevron-icon",{"is-open":m.value}])},null,2)]),_:1},8,["disabled"])]),_:1})])}}});a(6827);const ba=(0,O.A)(va,[["__scopeId","data-v-f027a0b2"]]);var ya=ba;const xa={class:"llm-model-label label text-deemphasized"};var ka=(0,n.defineComponent)({__name:"LlmModelLabel",props:{llmConfig:{type:Object,default:null}},setup(e){const t=(0,o.Pj)(),{t:a}=(0,l.s)(t),s=e,i=(0,n.computed)(()=>s.llmConfig?a("ai.configurations.label",{name:s.llmConfig.name,model:s.llmConfig.model},!0):a("ai.configurations.models.unknown")),c=(0,n.computed)(()=>s.llmConfig&&s.llmConfig.model?.length>20?s.llmConfig.model:"");return(e,t)=>{const a=(0,n.resolveDirective)("clean-tooltip");return(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",xa,[(0,n.createTextVNode)((0,n.toDisplayString)(i.value),1)])),[[a,c.value]])}}});a(2704);const wa=(0,O.A)(ka,[["__scopeId","data-v-3c3c8e2c"]]);var Ca=wa;const Ea={class:"textlabel-popper"};var Na=(0,n.defineComponent)({__name:"TextLabel",props:{label:{type:String,default:""},disabled:{type:Boolean,default:!1}},setup(e){const t=e;return(a,o)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Ea,[(0,n.createVNode)((0,n.unref)(S.Jj),{placement:"top"},{dropdownCollection:(0,n.withCtx)(()=>[(0,n.renderSlot)(a.$slots,"default")]),default:(0,n.withCtx)(()=>[(0,n.createVNode)((0,n.unref)(S.Nq),{ghost:"",small:"",disabled:t.disabled},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["inline-button label text-deemphasized",{"btn-disabled":t.disabled}])},(0,n.toDisplayString)(e.label),3)]),_:1},8,["disabled"])]),_:3})]))}});a(7648);const _a=(0,O.A)(Na,[["__scopeId","data-v-1969617f"]]);var Ba=_a;const Va={class:"disclaimer"},Ma={class:"disclaimer-section"},Aa={class:"disclaimer-section-title"},Sa={class:"disclaimer-section-body"},Da={class:"disclaimer-section"},Ta={class:"disclaimer-section-title"},$a={class:"disclaimer-section-body"},Ia={class:"disclaimer-section"},za={class:"disclaimer-section-title"},Pa={class:"disclaimer-section-body"};var ja=(0,n.defineComponent)({__name:"VerifyResultsDisclaimer",props:{disabled:{type:Boolean,default:!1}},setup(e){const t=(0,o.Pj)(),{t:a}=(0,l.s)(t),s=e;return(e,t)=>((0,n.openBlock)(),(0,n.createBlock)(Ba,{label:(0,n.unref)(a)("ai.configurations.verifyResults.button.label"),disabled:s.disabled},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("div",Va,[(0,n.createElementVNode)("div",Ma,[(0,n.createElementVNode)("span",Aa,(0,n.toDisplayString)((0,n.unref)(a)("ai.configurations.verifyResults.disclaimer.section1.title")),1),(0,n.createElementVNode)("span",Sa,(0,n.toDisplayString)((0,n.unref)(a)("ai.configurations.verifyResults.disclaimer.section1.body")),1)]),(0,n.createElementVNode)("div",Da,[(0,n.createElementVNode)("span",Ta,(0,n.toDisplayString)((0,n.unref)(a)("ai.configurations.verifyResults.disclaimer.section2.title")),1),(0,n.createElementVNode)("span",$a,(0,n.toDisplayString)((0,n.unref)(a)("ai.configurations.verifyResults.disclaimer.section2.body")),1)]),(0,n.createElementVNode)("div",Ia,[(0,n.createElementVNode)("span",za,(0,n.toDisplayString)((0,n.unref)(a)("ai.configurations.verifyResults.disclaimer.section3.title")),1),(0,n.createElementVNode)("span",Pa,(0,n.toDisplayString)((0,n.unref)(a)("ai.configurations.verifyResults.disclaimer.section3.body")),1)])])]),_:1},8,["label","disabled"]))}});a(527);const La=(0,O.A)(ja,[["__scopeId","data-v-b04f1c04"]]);var Ua=La;function Ra(){const e=(0,o.Pj)(),t=(0,n.computed)(()=>e.getters["rancher-ai-ui/input/text"]);function a(t){e.commit("rancher-ai-ui/input/text",t)}function s(e){return(e||"").split("\n").filter(e=>""!==e.trim()).join("\n").trim()}return{inputText:t,updateInput:a,cleanInput:s}}const Ka={class:"chat-console","data-testid":"rancher-ai-ui-chat-console"},Oa=["value","placeholder","disabled"],Fa={class:"chat-input-actions"},Xa={class:"chat-console-row chat-console-chat-text-info"},Wa=200;var Ga=(0,n.defineComponent)({__name:"Console",props:{llmConfig:{type:Object,default:null},agents:{type:Array,default:()=>[]},agentName:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["input:content","select:agent"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t,{inputText:r,updateInput:d,cleanInput:u}=Ra(),m=(0,n.ref)(null),p=(0,n.ref)(!1),g=(0,n.computed)(()=>i.disabled?"":r.value);function h(e){d(e?.target?.value),(0,n.nextTick)(y)}function f(e){"Enter"!==e.key||e.shiftKey||v(e)}function v(e){e.preventDefault(),e.stopPropagation();const t=u(g.value);t&&c("input:content",t),d(""),(0,n.nextTick)(y)}function b(e){c("select:agent",e),(0,n.nextTick)(()=>{m.value?.focus()})}function y(){const e=m.value;if(e){e.style.height="36px";const t=e.scrollHeight,a=t>Wa?Wa:t;e.style.height=`${a}px`,e.style.overflowY=t>Wa?"auto":"hidden"}}return(0,n.onMounted)(()=>{(0,n.nextTick)(()=>{m.value?.focus(),y()})}),(0,n.watch)(()=>g.value,()=>{(0,n.nextTick)(()=>{y()})},{}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Ka,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["chat-input-wrapper",{focused:p.value,disabled:i.disabled}])},[(0,n.createElementVNode)("textarea",{ref_key:"promptTextarea",ref:m,class:"chat-input",rows:"1",value:g.value,placeholder:i.disabled?"":(0,n.unref)(s)("ai.prompt.placeholder"),disabled:i.disabled,autocomplete:"off","data-testid":"rancher-ai-ui-chat-input-textarea",onInput:h,onKeydown:f,onFocus:t[0]||(t[0]=e=>p.value=!0),onBlur:t[1]||(t[1]=e=>p.value=!1)},null,40,Oa),(0,n.createElementVNode)("div",Fa,[i.agents.length>1?((0,n.openBlock)(),(0,n.createBlock)(ya,{key:0,agents:i.agents,"agent-name":i.agentName,disabled:i.disabled,onSelect:b},null,8,["agents","agent-name","disabled"])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["chat-input-send",{disabled:i.disabled}])},[(0,n.createVNode)(A.A,{class:"send-button",disabled:!(0,n.unref)(u)(g.value)||i.disabled,onClick:v,onKeydown:(0,n.withKeys)(v,["enter"])},{default:(0,n.withCtx)(()=>t[2]||(t[2]=[(0,n.createElementVNode)("i",{class:"icon icon-lg icon-send"},null,-1)])),_:1,__:[2]},8,["disabled"])],2)])],2),(0,n.createElementVNode)("div",Xa,[(0,n.createVNode)(Ca,{"llm-config":i.llmConfig},null,8,["llm-config"]),(0,n.createVNode)(Ua,{disabled:i.disabled},null,8,["disabled"])])]))}});a(9495);const Ha=(0,O.A)(Ga,[["__scopeId","data-v-cc231536"]]);var Ya=Ha,qa=a(9815);const Ja={class:"chat-header"},Za={class:"chat-title"},Qa={class:"chat-name"},en={class:"label"};var tn=(0,n.defineComponent)({__name:"HistoryHeader",props:{disabled:{type:Boolean,default:!1}},emits:["toggle:history"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=e,c=t;function r(){i.disabled||c("toggle:history")}return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Ja,[(0,n.createElementVNode)("div",Za,[(0,n.createElementVNode)("div",Qa,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["chat-history-btn",{disabled:e.disabled}])},[(0,n.createVNode)(A.A,{small:"",ghost:"",class:"btn-open-history","data-testid":"rancher-ai-ui-chat-history-header-button",onClick:r,onKeydown:[(0,n.withKeys)((0,n.withModifiers)(r,["stop"]),["enter"]),(0,n.withKeys)((0,n.withModifiers)(r,["stop"]),["space","enter"])]},{default:(0,n.withCtx)(()=>t[0]||(t[0]=[(0,n.createElementVNode)("i",{class:"icon icon-menu"},null,-1)])),_:1,__:[0]},8,["onKeydown"])],2),(0,n.createElementVNode)("span",en,(0,n.toDisplayString)((0,n.unref)(s)("ai.header.title")),1)])])]))}});a(9234);const an=(0,O.A)(tn,[["__scopeId","data-v-c4a8a7f4"]]);var nn=an;const on={class:"history-chat-item-menu-container","data-testid":"rancher-ai-ui-chat-history-chat-item-menu-button"},sn=["data-testid"];var cn=(0,n.defineComponent)({__name:"HistoryChatMenu",emits:["update:chat","delete:chat"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=t,c=(0,n.ref)([{id:"rename-chat",label:s("ai.history.menu.items.rename"),icon:"icon-edit",action:()=>{i("update:chat")}},{id:"delete-chat",label:s("ai.history.menu.items.delete"),icon:"icon-trash",action:()=>{i("delete:chat")}}]),r=(0,n.ref)(!1);return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",on,[(0,n.createVNode)((0,n.unref)(S.Jj),{class:"menu-dropdown",placement:"top-end","onUpdate:open":t[0]||(t[0]=e=>r.value=e)},{dropdownCollection:(0,n.withCtx)(()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(c.value,(e,t)=>((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(S.s$),{key:t,class:"history-chat-menu-dropdown-item",onClick:e.action},{before:(0,n.withCtx)(()=>[e.icon?((0,n.openBlock)(),(0,n.createElementBlock)("i",{key:0,class:(0,n.normalizeClass)(["icon",e.icon])},null,2)):(0,n.createCommentVNode)("",!0)]),default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("span",{"data-testid":`rancher-ai-ui-chat-history-chat-item-menu-button-option-${e.id}`},(0,n.toDisplayString)(e.label),9,sn)]),_:2},1032,["onClick"]))),128))]),default:(0,n.withCtx)(()=>[(0,n.createVNode)((0,n.unref)(S.Nq),{ghost:"",small:""},{default:(0,n.withCtx)(()=>t[1]||(t[1]=[(0,n.createElementVNode)("i",{class:"icon icon-actions"},null,-1)])),_:1,__:[1]})]),_:1})]))}});a(884);const ln=(0,O.A)(cn,[["__scopeId","data-v-1e539b81"]]);var rn=ln,dn=a(7475);const un={class:"history-panel","data-testid":"rancher-ai-ui-chat-history-panel"},mn={class:"history-header"},pn={class:"history-body"},gn={key:0,class:"history-chat-panel"},hn={class:"history-chat-title"},fn={class:"history-chat-title-label text-label"},vn={class:"history-chat-list"},bn=["onBlur","onKeydown"],yn={key:1,"data-testid":"rancher-ai-ui-chat-history-item-name",class:"history-chat-name"};var xn=(0,n.defineComponent)({__name:"History",props:{chats:{type:Array,default:()=>[]},activeChatId:{type:String,default:null},open:{type:Boolean,default:!1}},emits:["close:panel","create:chat","open:chat","update:chat","delete:chat"],setup(e,{emit:t}){const a=(0,o.Pj)(),{t:s}=(0,l.s)(a),i=(0,qa.E)(),c=e,r=t,d=(0,n.reactive)({}),u=(0,n.ref)(null);function m(e){let t="";return e.createdAt&&(t=new Date(e.createdAt).toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})),s("ai.history.chat.items.nameTooltip",{name:e.name||"",createdAt:t},!0)}function p(){r("create:chat")}function g(e){u.value||r("open:chat",e)}function h(e){i.modal.open(dn["default"],{props:{name:e.name,onConfirm:()=>r("delete:chat",e.id)},width:"400px"})}function f(e){u.value={...e},(0,n.nextTick)(()=>{const e=document.getElementById("history-chat-name-edit-input");e?.focus()})}function v(e){const t=u.value?.id,a=u.value?.name?.trim();t&&a&&e.name!==a&&(e.name=a,r("update:chat",{id:t,payload:{name:a}})),b()}function b(){u.value=null}return(e,t)=>{const a=(0,n.resolveDirective)("clean-tooltip");return(0,n.openBlock)(),(0,n.createBlock)(n.Transition,{name:"slide-in"},{default:(0,n.withCtx)(()=>[c.open?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"history-panel-overlay","data-testid":"rancher-ai-ui-chat-history-panel-overlay",onClick:t[3]||(t[3]=(0,n.withModifiers)(e=>r("close:panel"),["self"]))},[(0,n.createElementVNode)("div",un,[(0,n.createElementVNode)("div",mn,[(0,n.createVNode)(nn,{"onToggle:history":t[0]||(t[0]=e=>r("close:panel"))})]),(0,n.createElementVNode)("div",pn,[(0,n.createVNode)(A.A,{ref:"createBtn",primary:"",class:"btn-create-chat","data-testid":"rancher-ai-ui-chat-history-create-chat-button",onClick:p,onKeydown:[(0,n.withKeys)((0,n.withModifiers)(p,["stop"]),["enter"]),(0,n.withKeys)((0,n.withModifiers)(p,["stop"]),["space","enter"])]},{default:(0,n.withCtx)(()=>[t[4]||(t[4]=(0,n.createElementVNode)("i",{class:"icon icon-plus"},null,-1)),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(s)("ai.history.chat.create")),1)]),_:1,__:[4]},8,["onKeydown"]),c.chats.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",gn,[(0,n.createElementVNode)("div",hn,[(0,n.createElementVNode)("span",fn,(0,n.toDisplayString)((0,n.unref)(s)("ai.history.chat.previous")),1)]),(0,n.createElementVNode)("div",vn,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(c.chats,(e,o)=>((0,n.openBlock)(),(0,n.createBlock)(A.A,{key:e.id,tertiary:"",class:(0,n.normalizeClass)(["history-chat-item",{focused:c.activeChatId===e.id||u.value?.id===e.id}]),"data-testid":`rancher-ai-ui-chat-history-chat-item-${o}`,onClick:t=>g(e.id),onKeydown:[(0,n.withKeys)((0,n.withModifiers)(t=>g(e.id),["stop"]),["enter"]),(0,n.withKeys)((0,n.withModifiers)(t=>g(e.id),["stop"]),["space","enter"])],onMouseover:t=>d[e.id]=!0,onMouseleave:t=>d[e.id]=!1},{default:(0,n.withCtx)(()=>[u.value?.id===e.id?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("input",{key:0,id:"history-chat-name-edit-input","onUpdate:modelValue":t[1]||(t[1]=e=>u.value.name=e),"data-testid":"rancher-ai-ui-chat-history-item-name-input",class:"history-chat-name-edit",type:"text",maxlength:64,autocomplete:"off",onBlur:t=>v(e),onKeydown:[(0,n.withKeys)((0,n.withModifiers)(t=>v(e),["stop","prevent"]),["enter"]),(0,n.withKeys)((0,n.withModifiers)(b,["stop","prevent"]),["esc"])]},null,40,bn)),[[n.vModelText,u.value.name]]):(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",yn,[(0,n.createTextVNode)((0,n.toDisplayString)(e.name),1)])),[[a,m(e)]]),d[e.id]?((0,n.openBlock)(),(0,n.createBlock)(rn,{key:2,onClick:t[2]||(t[2]=(0,n.withModifiers)(()=>{},["stop"])),"onUpdate:chat":t=>f(e),"onDelete:chat":t=>h(e)},null,8,["onUpdate:chat","onDelete:chat"])):(0,n.createCommentVNode)("",!0)]),_:2},1032,["class","data-testid","onClick","onKeydown","onMouseover","onMouseleave"]))),128))])])):(0,n.createCommentVNode)("",!0)])])])):(0,n.createCommentVNode)("",!0)]),_:1})}}});a(1886);const kn=(0,O.A)(xn,[["__scopeId","data-v-0087f090"]]);var wn=kn;const Cn={class:"chat-container","data-testid":"rancher-ai-ui-chat-container"},En=["data-testid"],Nn="default";var _n=(0,n.defineComponent)({__name:"Chat",setup(e){const t=(0,o.Pj)(),{llmConfig:a,error:l}=_(),{agents:r,agentName:d,selectAgent:u}=M(Nn),{messages:p,onopen:g,onmessage:h,sendMessage:f,updateMessage:v,confirmMessage:x,downloadMessages:k,loadMessages:w,selectContext:E,resetChatError:N,phase:B,error:A}=b(Nn,r,d,u),{fetchChats:S,fetchMessages:D,updateChat:T,deleteChat:$}=V(r),{ws:I,connect:z,disconnect:P,error:j}=c({onopen:g,onmessage:h}),{context:L}=m(),{resize:U,close:R,restore:K}=C(),O=(0,n.ref)(!1),F=(0,n.ref)([]),W=(0,n.computed)(()=>t.getters["rancher-ai-ui/chat/metadata"]?.activeChatId||null),G=(0,n.computed)(()=>l.value?[l.value]:[j.value,A.value].filter(e=>e));function H(){N(),R()}async function Y(){G.value.length>0||(O.value||(F.value=await S()),O.value=!O.value)}async function q(e){O.value=!1,e&&e===W.value||(N(),P({showError:!1}),w(e?await D(e):[]),(0,n.nextTick)(()=>{t.commit("rancher-ai-ui/chat/setMetadata",{activeChatId:e}),z(e)}))}async function J(e){const{id:t,payload:a}=e;await T(t,a),F.value=await S()}async function Z(e){await $(e),e===W.value?q(null):F.value=await S()}function Q(){t.state.$router.push({name:`c-cluster-settings-${s.PRODUCT_NAME}`,params:{cluster:t.state.$route.params.cluster||"local"}})}function ee(){y.A.isOpen(t)||I.value?.readyState===WebSocket.OPEN||P(),K()}return(0,n.onMounted)(()=>{z(),window.addEventListener("beforeunload",ee)}),(0,n.onBeforeUnmount)(()=>{ee(),window.removeEventListener("beforeunload",ee)}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Cn,[(0,n.createElementVNode)("div",{class:"resize-bar",onMousedown:t[0]||(t[0]=(0,n.withModifiers)((...e)=>(0,n.unref)(U)&&(0,n.unref)(U)(...e),["prevent","stop"])),onTouchstart:t[1]||(t[1]=(0,n.withModifiers)((...e)=>(0,n.unref)(U)&&(0,n.unref)(U)(...e),["prevent","stop"]))},null,32),(0,n.createElementVNode)("div",{class:"chat-panel","data-testid":"rancher-ai-ui-chat-panel-"+(1===(0,n.unref)(I)?.readyState?"ready":"not-ready")},[(0,n.createVNode)(X,{disabled:G.value.length>0,"onClose:chat":H,"onConfig:chat":Q,"onDownload:chat":(0,n.unref)(k),"onToggle:history":Y},null,8,["disabled","onDownload:chat"]),(0,n.createVNode)(na,{messages:(0,n.unref)(p),errors:G.value,"message-phase":(0,n.unref)(B),"onUpdate:message":(0,n.unref)(v),"onConfirm:message":t[2]||(t[2]=e=>(0,n.unref)(x)(e,(0,n.unref)(I))),"onSend:message":t[3]||(t[3]=e=>(0,n.unref)(f)(e,(0,n.unref)(I)))},null,8,["messages","errors","message-phase","onUpdate:message"]),(0,n.createVNode)(pa,{value:(0,n.unref)(L),disabled:G.value.length>0,onSelect:(0,n.unref)(E)},null,8,["value","disabled","onSelect"]),(0,n.createVNode)(Ya,{"llm-config":(0,n.unref)(a),agents:(0,n.unref)(r),"agent-name":(0,n.unref)(d),disabled:!(0,n.unref)(I)||3===(0,n.unref)(I).readyState||G.value.length>0||(0,n.unref)(B)===(0,n.unref)(i.N$).AwaitingConfirmation,"onInput:content":t[4]||(t[4]=e=>(0,n.unref)(f)(e,(0,n.unref)(I))),"onSelect:agent":(0,n.unref)(u)},null,8,["llm-config","agents","agent-name","disabled","onSelect:agent"]),(0,n.createVNode)(wn,{chats:F.value,"active-chat-id":W.value,open:O.value&&!G.value.length,"onClose:panel":t[5]||(t[5]=e=>O.value=!1),"onCreate:chat":t[6]||(t[6]=e=>q(null)),"onOpen:chat":q,"onUpdate:chat":J,"onDelete:chat":Z},null,8,["chats","active-chat-id","open"])],8,En)]))}});a(2176),a(30);const Bn=(0,O.A)(_n,[["__scopeId","data-v-f33e43aa"]]);var Vn=Bn}}]);
//# sourceMappingURL=rancher-ai-ui-0.1.21.umd.min.442.js.map